!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t(require("zod"));else if("function"==typeof define&&define.amd)define(["zod"],t);else{var r="object"==typeof exports?t(require("zod")):t(e.zod);for(var s in r)("object"==typeof exports?exports:e)[s]=r[s]}}(this,e=>(()=>{var t,r,s={2058(e,t){"use strict";function r(e,t){return{validate:e,compare:t}}Object.defineProperty(t,"__esModule",{value:!0}),t.formatNames=t.fastFormats=t.fullFormats=void 0,t.fullFormats={date:r(i,n),time:r(l(!0),u),"date-time":r(p(!0),f),"iso-time":r(l(),c),"iso-date-time":r(p(),h),duration:/^P(?!$)((\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+S)?)?|(\d+W)?)$/,uri:function(e){return m.test(e)&&y.test(e)},"uri-reference":/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,"uri-template":/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,url:/^(?:https?|ftp):\/\/(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z0-9\u{00a1}-\u{ffff}]+-)*[a-z0-9\u{00a1}-\u{ffff}]+)(?:\.(?:[a-z0-9\u{00a1}-\u{ffff}]+-)*[a-z0-9\u{00a1}-\u{ffff}]+)*(?:\.(?:[a-z\u{00a1}-\u{ffff}]{2,})))(?::\d{2,5})?(?:\/[^\s]*)?$/iu,email:/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,hostname:/^(?=.{1,253}\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\.?$/i,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)\.){3}(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)$/,ipv6:/^((([0-9a-f]{1,4}:){7}([0-9a-f]{1,4}|:))|(([0-9a-f]{1,4}:){6}(:[0-9a-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){5}(((:[0-9a-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){4}(((:[0-9a-f]{1,4}){1,3})|((:[0-9a-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){3}(((:[0-9a-f]{1,4}){1,4})|((:[0-9a-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){2}(((:[0-9a-f]{1,4}){1,5})|((:[0-9a-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){1}(((:[0-9a-f]{1,4}){1,6})|((:[0-9a-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9a-f]{1,4}){1,7})|((:[0-9a-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))$/i,regex:function(e){if(w.test(e))return!1;try{return new RegExp(e),!0}catch(e){return!1}},uuid:/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,"json-pointer":/^(?:\/(?:[^~/]|~0|~1)*)*$/,"json-pointer-uri-fragment":/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,"relative-json-pointer":/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/,byte:function(e){return v.lastIndex=0,v.test(e)},int32:{type:"number",validate:function(e){return Number.isInteger(e)&&e<=_&&e>=g}},int64:{type:"number",validate:function(e){return Number.isInteger(e)}},float:{type:"number",validate:$},double:{type:"number",validate:$},password:!0,binary:!0},t.fastFormats={...t.fullFormats,date:r(/^\d\d\d\d-[0-1]\d-[0-3]\d$/,n),time:r(/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,u),"date-time":r(/^\d\d\d\d-[0-1]\d-[0-3]\dt(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,f),"iso-time":r(/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,c),"iso-date-time":r(/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s](?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,h),uri:/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/)?[^\s]*$/i,"uri-reference":/^(?:(?:[a-z][a-z0-9+\-.]*:)?\/?\/)?(?:[^\\\s#][^\s#]*)?(?:#[^\\\s]*)?$/i,email:/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i},t.formatNames=Object.keys(t.fullFormats);let s=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,o=[0,31,28,31,30,31,30,31,31,30,31,30,31];function i(e){var t;let r=s.exec(e);if(!r)return!1;let i=+r[1],n=+r[2],a=+r[3];return n>=1&&n<=12&&a>=1&&a<=(2===n&&(t=i)%4==0&&(t%100!=0||t%400==0)?29:o[n])}function n(e,t){if(e&&t)return e>t?1:e<t?-1:0}let a=/^(\d\d):(\d\d):(\d\d(?:\.\d+)?)(z|([+-])(\d\d)(?::?(\d\d))?)?$/i;function l(e){return function(t){let r=a.exec(t);if(!r)return!1;let s=+r[1],o=+r[2],i=+r[3],n=r[4],l="-"===r[5]?-1:1,u=+(r[6]||0),c=+(r[7]||0);if(u>23||c>59||e&&!n)return!1;if(s<=23&&o<=59&&i<60)return!0;let d=o-c*l,p=s-u*l-(d<0);return(23===p||-1===p)&&(59===d||-1===d)&&i<61}}function u(e,t){if(!(e&&t))return;let r=new Date("2020-01-01T"+e).valueOf(),s=new Date("2020-01-01T"+t).valueOf();if(r&&s)return r-s}function c(e,t){if(!(e&&t))return;let r=a.exec(e),s=a.exec(t);if(r&&s)return(e=r[1]+r[2]+r[3])>(t=s[1]+s[2]+s[3])?1:e<t?-1:0}let d=/t|\s/i;function p(e){let t=l(e);return function(e){let r=e.split(d);return 2===r.length&&i(r[0])&&t(r[1])}}function f(e,t){if(!(e&&t))return;let r=new Date(e).valueOf(),s=new Date(t).valueOf();if(r&&s)return r-s}function h(e,t){if(!(e&&t))return;let[r,s]=e.split(d),[o,i]=t.split(d),a=n(r,o);if(void 0!==a)return a||u(s,i)}let m=/\/|:/,y=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,v=/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/gm,g=-0x80000000,_=0x80000000-1;function $(){return!0}let w=/[^\\]\\Z/},494(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let s=r(2058),o=r(7122),i=r(6556),n=new i.Name("fullFormats"),a=new i.Name("fastFormats"),l=(e,t={keywords:!0})=>{if(Array.isArray(t))return u(e,t,s.fullFormats,n),e;let[r,i]="fast"===t.mode?[s.fastFormats,a]:[s.fullFormats,n];return u(e,t.formats||s.formatNames,r,i),t.keywords&&(0,o.default)(e),e};function u(e,t,r,s){var o;for(let n of(null!=(o=e.opts.code).formats||(o.formats=(0,i._)`require("ajv-formats/dist/formats").${s}`),t))e.addFormat(n,r[n])}l.get=(e,t="full")=>{let r=("fast"===t?s.fastFormats:s.fullFormats)[e];if(!r)throw Error(`Unknown format "${e}"`);return r},e.exports=t=l,Object.defineProperty(t,"__esModule",{value:!0}),t.default=l},7122(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.formatLimitDefinition=void 0;let s=r(4319),o=r(6556),i=o.operators,n={formatMaximum:{okStr:"<=",ok:i.LTE,fail:i.GT},formatMinimum:{okStr:">=",ok:i.GTE,fail:i.LT},formatExclusiveMaximum:{okStr:"<",ok:i.LT,fail:i.GTE},formatExclusiveMinimum:{okStr:">",ok:i.GT,fail:i.LTE}};t.formatLimitDefinition={keyword:Object.keys(n),type:"string",schemaType:"string",$data:!0,error:{message:({keyword:e,schemaCode:t})=>(0,o.str)`should be ${n[e].okStr} ${t}`,params:({keyword:e,schemaCode:t})=>(0,o._)`{comparison: ${n[e].okStr}, limit: ${t}}`},code(e){let t,r,{gen:i,data:a,schemaCode:l,keyword:u,it:c}=e,{opts:d,self:p}=c;if(!d.validateFormats)return;let f=new s.KeywordCxt(c,p.RULES.all.format.definition,"format");function h(e){return(0,o._)`${e}.compare(${a}, ${l}) ${n[u].fail} 0`}f.$data?(t=i.scopeValue("formats",{ref:p.formats,code:d.code.formats}),r=i.const("fmt",(0,o._)`${t}[${f.schemaCode}]`),e.fail$data((0,o.or)((0,o._)`typeof ${r} != "object"`,(0,o._)`${r} instanceof RegExp`,(0,o._)`typeof ${r}.compare != "function"`,h(r)))):function(){let t=f.schema,r=p.formats[t];if(!r||!0===r)return;if("object"!=typeof r||r instanceof RegExp||"function"!=typeof r.compare)throw Error(`"${u}": format "${t}" does not define "compare" function`);let s=i.scopeValue("formats",{key:t,ref:r,code:d.code.formats?(0,o._)`${d.code.formats}${(0,o.getProperty)(t)}`:void 0});e.fail$data(h(s))}()},dependencies:["format"]},t.default=e=>(e.addKeyword(t.formatLimitDefinition),e)},4319(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MissingRefError=t.ValidationError=t.CodeGen=t.Name=t.nil=t.stringify=t.str=t._=t.KeywordCxt=t.Ajv=void 0;let s=r(7285),o=r(8181),i=r(2278),n=r(7578),a=["/properties"],l="http://json-schema.org/draft-07/schema";class u extends s.default{_addVocabularies(){super._addVocabularies(),o.default.forEach(e=>this.addVocabulary(e)),this.opts.discriminator&&this.addKeyword(i.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;let e=this.opts.$data?this.$dataMetaSchema(n,a):n;this.addMetaSchema(e,l,!1),this.refs["http://json-schema.org/schema"]=l}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(l)?l:void 0)}}t.Ajv=u,e.exports=t=u,e.exports.Ajv=u,Object.defineProperty(t,"__esModule",{value:!0}),t.default=u;var c=r(6889);Object.defineProperty(t,"KeywordCxt",{enumerable:!0,get:function(){return c.KeywordCxt}});var d=r(6556);Object.defineProperty(t,"_",{enumerable:!0,get:function(){return d._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return d.str}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return d.stringify}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return d.nil}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return d.Name}}),Object.defineProperty(t,"CodeGen",{enumerable:!0,get:function(){return d.CodeGen}});var p=r(9645);Object.defineProperty(t,"ValidationError",{enumerable:!0,get:function(){return p.default}});var f=r(218);Object.defineProperty(t,"MissingRefError",{enumerable:!0,get:function(){return f.default}})},1175(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.regexpCode=t.getEsmExportName=t.getProperty=t.safeStringify=t.stringify=t.strConcat=t.addCodeArg=t.str=t._=t.nil=t._Code=t.Name=t.IDENTIFIER=t._CodeOrName=void 0;class r{}t._CodeOrName=r,t.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;class s extends r{constructor(e){if(super(),!t.IDENTIFIER.test(e))throw Error("CodeGen: name must be a valid identifier");this.str=e}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}}t.Name=s;class o extends r{constructor(e){super(),this._items="string"==typeof e?[e]:e}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;let e=this._items[0];return""===e||'""'===e}get str(){var e;return null!=(e=this._str)?e:this._str=this._items.reduce((e,t)=>`${e}${t}`,"")}get names(){var e;return null!=(e=this._names)?e:this._names=this._items.reduce((e,t)=>(t instanceof s&&(e[t.str]=(e[t.str]||0)+1),e),{})}}function i(e,...t){let r=[e[0]],s=0;for(;s<t.length;)l(r,t[s]),r.push(e[++s]);return new o(r)}t._Code=o,t.nil=new o(""),t._=i;let n=new o("+");function a(e,...t){let r=[u(e[0])],i=0;for(;i<t.length;)r.push(n),l(r,t[i]),r.push(n,u(e[++i]));return function(e){let t=1;for(;t<e.length-1;){if(e[t]===n){var r,o;let i=(r=e[t-1],'""'===(o=e[t+1])?r:'""'===r?o:"string"==typeof r?o instanceof s||'"'!==r[r.length-1]?void 0:"string"!=typeof o?`${r.slice(0,-1)}${o}"`:'"'===o[0]?r.slice(0,-1)+o.slice(1):void 0:"string"!=typeof o||'"'!==o[0]||r instanceof s?void 0:`"${r}${o.slice(1)}`);if(void 0!==i){e.splice(t-1,3,i);continue}e[t++]="+"}t++}}(r),new o(r)}function l(e,t){var r;t instanceof o?e.push(...t._items):t instanceof s?e.push(t):e.push("number"==typeof(r=t)||"boolean"==typeof r||null===r?r:u(Array.isArray(r)?r.join(","):r))}function u(e){return JSON.stringify(e).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}t.str=a,t.addCodeArg=l,t.strConcat=function(e,t){return t.emptyStr()?e:e.emptyStr()?t:a`${e}${t}`},t.stringify=function(e){return new o(u(e))},t.safeStringify=u,t.getProperty=function(e){return"string"==typeof e&&t.IDENTIFIER.test(e)?new o(`.${e}`):i`[${e}]`},t.getEsmExportName=function(e){if("string"==typeof e&&t.IDENTIFIER.test(e))return new o(`${e}`);throw Error(`CodeGen: invalid export name: ${e}, use explicit $id name mapping`)},t.regexpCode=function(e){return new o(e.toString())}},6556(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.or=t.and=t.not=t.CodeGen=t.operators=t.varKinds=t.ValueScopeName=t.ValueScope=t.Scope=t.Name=t.regexpCode=t.stringify=t.getProperty=t.nil=t.strConcat=t.str=t._=void 0;let s=r(1175),o=r(7100);var i=r(1175);Object.defineProperty(t,"_",{enumerable:!0,get:function(){return i._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return i.str}}),Object.defineProperty(t,"strConcat",{enumerable:!0,get:function(){return i.strConcat}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return i.nil}}),Object.defineProperty(t,"getProperty",{enumerable:!0,get:function(){return i.getProperty}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return i.stringify}}),Object.defineProperty(t,"regexpCode",{enumerable:!0,get:function(){return i.regexpCode}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return i.Name}});var n=r(7100);Object.defineProperty(t,"Scope",{enumerable:!0,get:function(){return n.Scope}}),Object.defineProperty(t,"ValueScope",{enumerable:!0,get:function(){return n.ValueScope}}),Object.defineProperty(t,"ValueScopeName",{enumerable:!0,get:function(){return n.ValueScopeName}}),Object.defineProperty(t,"varKinds",{enumerable:!0,get:function(){return n.varKinds}}),t.operators={GT:new s._Code(">"),GTE:new s._Code(">="),LT:new s._Code("<"),LTE:new s._Code("<="),EQ:new s._Code("==="),NEQ:new s._Code("!=="),NOT:new s._Code("!"),OR:new s._Code("||"),AND:new s._Code("&&"),ADD:new s._Code("+")};class a{optimizeNodes(){return this}optimizeNames(e,t){return this}}class l extends a{constructor(e,t,r){super(),this.varKind=e,this.name=t,this.rhs=r}render({es5:e,_n:t}){let r=e?o.varKinds.var:this.varKind,s=void 0===this.rhs?"":` = ${this.rhs}`;return`${r} ${this.name}${s};`+t}optimizeNames(e,t){if(e[this.name.str])return this.rhs&&(this.rhs=R(this.rhs,e,t)),this}get names(){return this.rhs instanceof s._CodeOrName?this.rhs.names:{}}}class u extends a{constructor(e,t,r){super(),this.lhs=e,this.rhs=t,this.sideEffects=r}render({_n:e}){return`${this.lhs} = ${this.rhs};`+e}optimizeNames(e,t){if(!(this.lhs instanceof s.Name)||e[this.lhs.str]||this.sideEffects)return this.rhs=R(this.rhs,e,t),this}get names(){return O(this.lhs instanceof s.Name?{}:{...this.lhs.names},this.rhs)}}class c extends u{constructor(e,t,r,s){super(e,r,s),this.op=t}render({_n:e}){return`${this.lhs} ${this.op}= ${this.rhs};`+e}}class d extends a{constructor(e){super(),this.label=e,this.names={}}render({_n:e}){return`${this.label}:`+e}}class p extends a{constructor(e){super(),this.label=e,this.names={}}render({_n:e}){let t=this.label?` ${this.label}`:"";return`break${t};`+e}}class f extends a{constructor(e){super(),this.error=e}render({_n:e}){return`throw ${this.error};`+e}get names(){return this.error.names}}class h extends a{constructor(e){super(),this.code=e}render({_n:e}){return`${this.code};`+e}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(e,t){return this.code=R(this.code,e,t),this}get names(){return this.code instanceof s._CodeOrName?this.code.names:{}}}class m extends a{constructor(e=[]){super(),this.nodes=e}render(e){return this.nodes.reduce((t,r)=>t+r.render(e),"")}optimizeNodes(){let{nodes:e}=this,t=e.length;for(;t--;){let r=e[t].optimizeNodes();Array.isArray(r)?e.splice(t,1,...r):r?e[t]=r:e.splice(t,1)}return e.length>0?this:void 0}optimizeNames(e,t){let{nodes:r}=this,s=r.length;for(;s--;){let o=r[s];o.optimizeNames(e,t)||(function(e,t){for(let r in t)e[r]=(e[r]||0)-(t[r]||0)}(e,o.names),r.splice(s,1))}return r.length>0?this:void 0}get names(){return this.nodes.reduce((e,t)=>I(e,t.names),{})}}class y extends m{render(e){return"{"+e._n+super.render(e)+"}"+e._n}}class v extends m{}class g extends y{}g.kind="else";class _ extends y{constructor(e,t){super(t),this.condition=e}render(e){let t=`if(${this.condition})`+super.render(e);return this.else&&(t+="else "+this.else.render(e)),t}optimizeNodes(){super.optimizeNodes();let e=this.condition;if(!0===e)return this.nodes;let t=this.else;if(t){let e=t.optimizeNodes();t=this.else=Array.isArray(e)?new g(e):e}return t?!1===e?t instanceof _?t:t.nodes:this.nodes.length?this:new _(j(e),t instanceof _?[t]:t.nodes):!1!==e&&this.nodes.length?this:void 0}optimizeNames(e,t){var r;if(this.else=null==(r=this.else)?void 0:r.optimizeNames(e,t),super.optimizeNames(e,t)||this.else)return this.condition=R(this.condition,e,t),this}get names(){let e=super.names;return O(e,this.condition),this.else&&I(e,this.else.names),e}}_.kind="if";class $ extends y{}$.kind="for";class w extends ${constructor(e){super(),this.iteration=e}render(e){return`for(${this.iteration})`+super.render(e)}optimizeNames(e,t){if(super.optimizeNames(e,t))return this.iteration=R(this.iteration,e,t),this}get names(){return I(super.names,this.iteration.names)}}class b extends ${constructor(e,t,r,s){super(),this.varKind=e,this.name=t,this.from=r,this.to=s}render(e){let t=e.es5?o.varKinds.var:this.varKind,{name:r,from:s,to:i}=this;return`for(${t} ${r}=${s}; ${r}<${i}; ${r}++)`+super.render(e)}get names(){let e=O(super.names,this.from);return O(e,this.to)}}class E extends ${constructor(e,t,r,s){super(),this.loop=e,this.varKind=t,this.name=r,this.iterable=s}render(e){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(e)}optimizeNames(e,t){if(super.optimizeNames(e,t))return this.iterable=R(this.iterable,e,t),this}get names(){return I(super.names,this.iterable.names)}}class k extends y{constructor(e,t,r){super(),this.name=e,this.args=t,this.async=r}render(e){let t=this.async?"async ":"";return`${t}function ${this.name}(${this.args})`+super.render(e)}}k.kind="func";class S extends m{render(e){return"return "+super.render(e)}}S.kind="return";class T extends y{render(e){let t="try"+super.render(e);return this.catch&&(t+=this.catch.render(e)),this.finally&&(t+=this.finally.render(e)),t}optimizeNodes(){var e,t;return super.optimizeNodes(),null==(e=this.catch)||e.optimizeNodes(),null==(t=this.finally)||t.optimizeNodes(),this}optimizeNames(e,t){var r,s;return super.optimizeNames(e,t),null==(r=this.catch)||r.optimizeNames(e,t),null==(s=this.finally)||s.optimizeNames(e,t),this}get names(){let e=super.names;return this.catch&&I(e,this.catch.names),this.finally&&I(e,this.finally.names),e}}class x extends y{constructor(e){super(),this.error=e}render(e){return`catch(${this.error})`+super.render(e)}}x.kind="catch";class P extends y{render(e){return"finally"+super.render(e)}}function I(e,t){for(let r in t)e[r]=(e[r]||0)+(t[r]||0);return e}function O(e,t){return t instanceof s._CodeOrName?I(e,t.names):e}function R(e,t,r){var o;if(e instanceof s.Name)return i(e);if(!((o=e)instanceof s._Code&&o._items.some(e=>e instanceof s.Name&&1===t[e.str]&&void 0!==r[e.str])))return e;return new s._Code(e._items.reduce((e,t)=>(t instanceof s.Name&&(t=i(t)),t instanceof s._Code?e.push(...t._items):e.push(t),e),[]));function i(e){let s=r[e.str];return void 0===s||1!==t[e.str]?e:(delete t[e.str],s)}}function j(e){return"boolean"==typeof e||"number"==typeof e||null===e?!e:(0,s._)`!${C(e)}`}P.kind="finally",t.CodeGen=class{constructor(e,t={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...t,_n:t.lines?"\n":""},this._extScope=e,this._scope=new o.Scope({parent:e}),this._nodes=[new v]}toString(){return this._root.render(this.opts)}name(e){return this._scope.name(e)}scopeName(e){return this._extScope.name(e)}scopeValue(e,t){let r=this._extScope.value(e,t);return(this._values[r.prefix]||(this._values[r.prefix]=new Set)).add(r),r}getScopeValue(e,t){return this._extScope.getValue(e,t)}scopeRefs(e){return this._extScope.scopeRefs(e,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(e,t,r,s){let o=this._scope.toName(t);return void 0!==r&&s&&(this._constants[o.str]=r),this._leafNode(new l(e,o,r)),o}const(e,t,r){return this._def(o.varKinds.const,e,t,r)}let(e,t,r){return this._def(o.varKinds.let,e,t,r)}var(e,t,r){return this._def(o.varKinds.var,e,t,r)}assign(e,t,r){return this._leafNode(new u(e,t,r))}add(e,r){return this._leafNode(new c(e,t.operators.ADD,r))}code(e){return"function"==typeof e?e():e!==s.nil&&this._leafNode(new h(e)),this}object(...e){let t=["{"];for(let[r,o]of e)t.length>1&&t.push(","),t.push(r),(r!==o||this.opts.es5)&&(t.push(":"),(0,s.addCodeArg)(t,o));return t.push("}"),new s._Code(t)}if(e,t,r){if(this._blockNode(new _(e)),t&&r)this.code(t).else().code(r).endIf();else if(t)this.code(t).endIf();else if(r)throw Error('CodeGen: "else" body without "then" body');return this}elseIf(e){return this._elseNode(new _(e))}else(){return this._elseNode(new g)}endIf(){return this._endBlockNode(_,g)}_for(e,t){return this._blockNode(e),t&&this.code(t).endFor(),this}for(e,t){return this._for(new w(e),t)}forRange(e,t,r,s,i=this.opts.es5?o.varKinds.var:o.varKinds.let){let n=this._scope.toName(e);return this._for(new b(i,n,t,r),()=>s(n))}forOf(e,t,r,i=o.varKinds.const){let n=this._scope.toName(e);if(this.opts.es5){let e=t instanceof s.Name?t:this.var("_arr",t);return this.forRange("_i",0,(0,s._)`${e}.length`,t=>{this.var(n,(0,s._)`${e}[${t}]`),r(n)})}return this._for(new E("of",i,n,t),()=>r(n))}forIn(e,t,r,i=this.opts.es5?o.varKinds.var:o.varKinds.const){if(this.opts.ownProperties)return this.forOf(e,(0,s._)`Object.keys(${t})`,r);let n=this._scope.toName(e);return this._for(new E("in",i,n,t),()=>r(n))}endFor(){return this._endBlockNode($)}label(e){return this._leafNode(new d(e))}break(e){return this._leafNode(new p(e))}return(e){let t=new S;if(this._blockNode(t),this.code(e),1!==t.nodes.length)throw Error('CodeGen: "return" should have one node');return this._endBlockNode(S)}try(e,t,r){if(!t&&!r)throw Error('CodeGen: "try" without "catch" and "finally"');let s=new T;if(this._blockNode(s),this.code(e),t){let e=this.name("e");this._currNode=s.catch=new x(e),t(e)}return r&&(this._currNode=s.finally=new P,this.code(r)),this._endBlockNode(x,P)}throw(e){return this._leafNode(new f(e))}block(e,t){return this._blockStarts.push(this._nodes.length),e&&this.code(e).endBlock(t),this}endBlock(e){let t=this._blockStarts.pop();if(void 0===t)throw Error("CodeGen: not in self-balancing block");let r=this._nodes.length-t;if(r<0||void 0!==e&&r!==e)throw Error(`CodeGen: wrong number of nodes: ${r} vs ${e} expected`);return this._nodes.length=t,this}func(e,t=s.nil,r,o){return this._blockNode(new k(e,t,r)),o&&this.code(o).endFunc(),this}endFunc(){return this._endBlockNode(k)}optimize(e=1){for(;e-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(e){return this._currNode.nodes.push(e),this}_blockNode(e){this._currNode.nodes.push(e),this._nodes.push(e)}_endBlockNode(e,t){let r=this._currNode;if(r instanceof e||t&&r instanceof t)return this._nodes.pop(),this;throw Error(`CodeGen: not in block "${t?`${e.kind}/${t.kind}`:e.kind}"`)}_elseNode(e){let t=this._currNode;if(!(t instanceof _))throw Error('CodeGen: "else" without "if"');return this._currNode=t.else=e,this}get _root(){return this._nodes[0]}get _currNode(){let e=this._nodes;return e[e.length-1]}set _currNode(e){let t=this._nodes;t[t.length-1]=e}},t.not=j;let N=z(t.operators.AND);t.and=function(...e){return e.reduce(N)};let A=z(t.operators.OR);function z(e){return(t,r)=>t===s.nil?r:r===s.nil?t:(0,s._)`${C(t)} ${e} ${C(r)}`}function C(e){return e instanceof s.Name?e:(0,s._)`(${e})`}t.or=function(...e){return e.reduce(A)}},7100(e,t,r){"use strict";var s,o;Object.defineProperty(t,"__esModule",{value:!0}),t.ValueScope=t.ValueScopeName=t.Scope=t.varKinds=t.UsedValueState=void 0;let i=r(1175);class n extends Error{constructor(e){super(`CodeGen: "code" for ${e} not defined`),this.value=e.value}}(o=s||(t.UsedValueState=s={}))[o.Started=0]="Started",o[o.Completed=1]="Completed",t.varKinds={const:new i.Name("const"),let:new i.Name("let"),var:new i.Name("var")};class a{constructor({prefixes:e,parent:t}={}){this._names={},this._prefixes=e,this._parent=t}toName(e){return e instanceof i.Name?e:this.name(e)}name(e){return new i.Name(this._newName(e))}_newName(e){let t=this._names[e]||this._nameGroup(e);return`${e}${t.index++}`}_nameGroup(e){var t,r;if((null==(r=null==(t=this._parent)?void 0:t._prefixes)?void 0:r.has(e))||this._prefixes&&!this._prefixes.has(e))throw Error(`CodeGen: prefix "${e}" is not allowed in this scope`);return this._names[e]={prefix:e,index:0}}}t.Scope=a;class l extends i.Name{constructor(e,t){super(t),this.prefix=e}setValue(e,{property:t,itemIndex:r}){this.value=e,this.scopePath=(0,i._)`.${new i.Name(t)}[${r}]`}}t.ValueScopeName=l;let u=(0,i._)`\n`;t.ValueScope=class extends a{constructor(e){super(e),this._values={},this._scope=e.scope,this.opts={...e,_n:e.lines?u:i.nil}}get(){return this._scope}name(e){return new l(e,this._newName(e))}value(e,t){var r;if(void 0===t.ref)throw Error("CodeGen: ref must be passed in value");let s=this.toName(e),{prefix:o}=s,i=null!=(r=t.key)?r:t.ref,n=this._values[o];if(n){let e=n.get(i);if(e)return e}else n=this._values[o]=new Map;n.set(i,s);let a=this._scope[o]||(this._scope[o]=[]),l=a.length;return a[l]=t.ref,s.setValue(t,{property:o,itemIndex:l}),s}getValue(e,t){let r=this._values[e];if(r)return r.get(t)}scopeRefs(e,t=this._values){return this._reduceValues(t,t=>{if(void 0===t.scopePath)throw Error(`CodeGen: name "${t}" has no value`);return(0,i._)`${e}${t.scopePath}`})}scopeCode(e=this._values,t,r){return this._reduceValues(e,e=>{if(void 0===e.value)throw Error(`CodeGen: name "${e}" has no value`);return e.value.code},t,r)}_reduceValues(e,r,o={},a){let l=i.nil;for(let u in e){let c=e[u];if(!c)continue;let d=o[u]=o[u]||new Map;c.forEach(e=>{if(d.has(e))return;d.set(e,s.Started);let o=r(e);if(o){let r=this.opts.es5?t.varKinds.var:t.varKinds.const;l=(0,i._)`${l}${r} ${e} = ${o};${this.opts._n}`}else if(o=null==a?void 0:a(e))l=(0,i._)`${l}${o}${this.opts._n}`;else throw new n(e);d.set(e,s.Completed)})}return l}}},7747(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.extendErrors=t.resetErrorsCount=t.reportExtraError=t.reportError=t.keyword$DataError=t.keywordError=void 0;let s=r(6556),o=r(8512),i=r(4614);function n(e,t){let r=e.const("err",t);e.if((0,s._)`${i.default.vErrors} === null`,()=>e.assign(i.default.vErrors,(0,s._)`[${r}]`),(0,s._)`${i.default.vErrors}.push(${r})`),e.code((0,s._)`${i.default.errors}++`)}function a(e,t){let{gen:r,validateName:o,schemaEnv:i}=e;i.$async?r.throw((0,s._)`new ${e.ValidationError}(${t})`):(r.assign((0,s._)`${o}.errors`,t),r.return(!1))}t.keywordError={message:({keyword:e})=>(0,s.str)`must pass "${e}" keyword validation`},t.keyword$DataError={message:({keyword:e,schemaType:t})=>t?(0,s.str)`"${e}" keyword must be ${t} ($data)`:(0,s.str)`"${e}" keyword is invalid ($data)`},t.reportError=function(e,r=t.keywordError,o,i){let{it:l}=e,{gen:c,compositeRule:d,allErrors:p}=l,f=u(e,r,o);(null!=i?i:d||p)?n(c,f):a(l,(0,s._)`[${f}]`)},t.reportExtraError=function(e,r=t.keywordError,s){let{it:o}=e,{gen:l,compositeRule:c,allErrors:d}=o;n(l,u(e,r,s)),c||d||a(o,i.default.vErrors)},t.resetErrorsCount=function(e,t){e.assign(i.default.errors,t),e.if((0,s._)`${i.default.vErrors} !== null`,()=>e.if(t,()=>e.assign((0,s._)`${i.default.vErrors}.length`,t),()=>e.assign(i.default.vErrors,null)))},t.extendErrors=function({gen:e,keyword:t,schemaValue:r,data:o,errsCount:n,it:a}){if(void 0===n)throw Error("ajv implementation error");let l=e.name("err");e.forRange("i",n,i.default.errors,n=>{e.const(l,(0,s._)`${i.default.vErrors}[${n}]`),e.if((0,s._)`${l}.instancePath === undefined`,()=>e.assign((0,s._)`${l}.instancePath`,(0,s.strConcat)(i.default.instancePath,a.errorPath))),e.assign((0,s._)`${l}.schemaPath`,(0,s.str)`${a.errSchemaPath}/${t}`),a.opts.verbose&&(e.assign((0,s._)`${l}.schema`,r),e.assign((0,s._)`${l}.data`,o))})};let l={keyword:new s.Name("keyword"),schemaPath:new s.Name("schemaPath"),params:new s.Name("params"),propertyName:new s.Name("propertyName"),message:new s.Name("message"),schema:new s.Name("schema"),parentSchema:new s.Name("parentSchema")};function u(e,t,r){let{createErrors:n}=e.it;return!1===n?(0,s._)`{}`:function(e,t,r={}){let{gen:n,it:a}=e,u=[function({errorPath:e},{instancePath:t}){let r=t?(0,s.str)`${e}${(0,o.getErrorPath)(t,o.Type.Str)}`:e;return[i.default.instancePath,(0,s.strConcat)(i.default.instancePath,r)]}(a,r),function({keyword:e,it:{errSchemaPath:t}},{schemaPath:r,parentSchema:i}){let n=i?t:(0,s.str)`${t}/${e}`;return r&&(n=(0,s.str)`${n}${(0,o.getErrorPath)(r,o.Type.Str)}`),[l.schemaPath,n]}(e,r)];return function(e,{params:t,message:r},o){let{keyword:n,data:a,schemaValue:u,it:c}=e,{opts:d,propertyName:p,topSchemaRef:f,schemaPath:h}=c;o.push([l.keyword,n],[l.params,"function"==typeof t?t(e):t||(0,s._)`{}`]),d.messages&&o.push([l.message,"function"==typeof r?r(e):r]),d.verbose&&o.push([l.schema,u],[l.parentSchema,(0,s._)`${f}${h}`],[i.default.data,a]),p&&o.push([l.propertyName,p])}(e,t,u),n.object(...u)}(e,t,r)}},9198(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.resolveSchema=t.getCompilingSchema=t.resolveRef=t.compileSchema=t.SchemaEnv=void 0;let s=r(6556),o=r(9645),i=r(4614),n=r(234),a=r(8512),l=r(6889);class u{constructor(e){var t;let r;this.refs={},this.dynamicAnchors={},"object"==typeof e.schema&&(r=e.schema),this.schema=e.schema,this.schemaId=e.schemaId,this.root=e.root||this,this.baseId=null!=(t=e.baseId)?t:(0,n.normalizeId)(null==r?void 0:r[e.schemaId||"$id"]),this.schemaPath=e.schemaPath,this.localRefs=e.localRefs,this.meta=e.meta,this.$async=null==r?void 0:r.$async,this.refs={}}}function c(e){let t,r,a=p.call(this,e);if(a)return a;let u=(0,n.getFullPath)(this.opts.uriResolver,e.root.baseId),{es5:c,lines:d}=this.opts.code,{ownProperties:f}=this.opts,h=new s.CodeGen(this.scope,{es5:c,lines:d,ownProperties:f});e.$async&&(t=h.scopeValue("Error",{ref:o.default,code:(0,s._)`require("ajv/dist/runtime/validation_error").default`}));let m=h.scopeName("validate");e.validateName=m;let y={gen:h,allErrors:this.opts.allErrors,data:i.default.data,parentData:i.default.parentData,parentDataProperty:i.default.parentDataProperty,dataNames:[i.default.data],dataPathArr:[s.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:h.scopeValue("schema",!0===this.opts.code.source?{ref:e.schema,code:(0,s.stringify)(e.schema)}:{ref:e.schema}),validateName:m,ValidationError:t,schema:e.schema,schemaEnv:e,rootId:u,baseId:e.baseId||u,schemaPath:s.nil,errSchemaPath:e.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,s._)`""`,opts:this.opts,self:this};try{this._compilations.add(e),(0,l.validateFunctionCode)(y),h.optimize(this.opts.code.optimize);let t=h.toString();r=`${h.scopeRefs(i.default.scope)}return ${t}`,this.opts.code.process&&(r=this.opts.code.process(r,e));let o=Function(`${i.default.self}`,`${i.default.scope}`,r)(this,this.scope.get());if(this.scope.value(m,{ref:o}),o.errors=null,o.schema=e.schema,o.schemaEnv=e,e.$async&&(o.$async=!0),!0===this.opts.code.source&&(o.source={validateName:m,validateCode:t,scopeValues:h._values}),this.opts.unevaluated){let{props:e,items:t}=y;o.evaluated={props:e instanceof s.Name?void 0:e,items:t instanceof s.Name?void 0:t,dynamicProps:e instanceof s.Name,dynamicItems:t instanceof s.Name},o.source&&(o.source.evaluated=(0,s.stringify)(o.evaluated))}return e.validate=o,e}catch(t){throw delete e.validate,delete e.validateName,r&&this.logger.error("Error compiling schema, function code:",r),t}finally{this._compilations.delete(e)}}function d(e){return(0,n.inlineRef)(e.schema,this.opts.inlineRefs)?e.schema:e.validate?e:c.call(this,e)}function p(e){for(let s of this._compilations){var t,r;if(t=s,r=e,t.schema===r.schema&&t.root===r.root&&t.baseId===r.baseId)return s}}function f(e,t){let r;for(;"string"==typeof(r=this.refs[t]);)t=r;return r||this.schemas[t]||h.call(this,e,t)}function h(e,t){let r=this.opts.uriResolver.parse(t),s=(0,n._getFullPath)(this.opts.uriResolver,r),o=(0,n.getFullPath)(this.opts.uriResolver,e.baseId,void 0);if(Object.keys(e.schema).length>0&&s===o)return y.call(this,r,e);let i=(0,n.normalizeId)(s),a=this.refs[i]||this.schemas[i];if("string"==typeof a){let t=h.call(this,e,a);if("object"!=typeof(null==t?void 0:t.schema))return;return y.call(this,r,t)}if("object"==typeof(null==a?void 0:a.schema)){if(a.validate||c.call(this,a),i===(0,n.normalizeId)(t)){let{schema:t}=a,{schemaId:r}=this.opts,s=t[r];return s&&(o=(0,n.resolveUrl)(this.opts.uriResolver,o,s)),new u({schema:t,schemaId:r,root:e,baseId:o})}return y.call(this,r,a)}}t.SchemaEnv=u,t.compileSchema=c,t.resolveRef=function(e,t,r){var s;r=(0,n.resolveUrl)(this.opts.uriResolver,t,r);let o=e.refs[r];if(o)return o;let i=f.call(this,e,r);if(void 0===i){let o=null==(s=e.localRefs)?void 0:s[r],{schemaId:n}=this.opts;o&&(i=new u({schema:o,schemaId:n,root:e,baseId:t}))}if(void 0!==i)return e.refs[r]=d.call(this,i)},t.getCompilingSchema=p,t.resolveSchema=h;let m=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function y(e,{baseId:t,schema:r,root:s}){var o;let i;if((null==(o=e.fragment)?void 0:o[0])!=="/")return;for(let s of e.fragment.slice(1).split("/")){if("boolean"==typeof r)return;let e=r[(0,a.unescapeFragment)(s)];if(void 0===e)return;let o="object"==typeof(r=e)&&r[this.opts.schemaId];!m.has(s)&&o&&(t=(0,n.resolveUrl)(this.opts.uriResolver,t,o))}if("boolean"!=typeof r&&r.$ref&&!(0,a.schemaHasRulesButRef)(r,this.RULES)){let e=(0,n.resolveUrl)(this.opts.uriResolver,t,r.$ref);i=h.call(this,s,e)}let{schemaId:l}=this.opts;if((i=i||new u({schema:r,schemaId:l,root:s,baseId:t})).schema!==i.root.schema)return i}},4614(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let s=r(6556);t.default={data:new s.Name("data"),valCxt:new s.Name("valCxt"),instancePath:new s.Name("instancePath"),parentData:new s.Name("parentData"),parentDataProperty:new s.Name("parentDataProperty"),rootData:new s.Name("rootData"),dynamicAnchors:new s.Name("dynamicAnchors"),vErrors:new s.Name("vErrors"),errors:new s.Name("errors"),this:new s.Name("this"),self:new s.Name("self"),scope:new s.Name("scope"),json:new s.Name("json"),jsonPos:new s.Name("jsonPos"),jsonLen:new s.Name("jsonLen"),jsonPart:new s.Name("jsonPart")}},218(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let s=r(234);t.default=class extends Error{constructor(e,t,r,o){super(o||`can't resolve reference ${r} from id ${t}`),this.missingRef=(0,s.resolveUrl)(e,t,r),this.missingSchema=(0,s.normalizeId)((0,s.getFullPath)(e,this.missingRef))}}},234(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getSchemaRefs=t.resolveUrl=t.normalizeId=t._getFullPath=t.getFullPath=t.inlineRef=void 0;let s=r(8512),o=r(7371),i=r(205),n=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);t.inlineRef=function(e,t=!0){return"boolean"==typeof e||(!0===t?!function e(t){for(let r in t){if(a.has(r))return!0;let s=t[r];if(Array.isArray(s)&&s.some(e)||"object"==typeof s&&e(s))return!0}return!1}(e):!!t&&function e(t){let r=0;for(let o in t)if("$ref"===o||(r++,!n.has(o)&&("object"==typeof t[o]&&(0,s.eachItem)(t[o],t=>r+=e(t)),r===1/0)))return 1/0;return r}(e)<=t)};let a=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function l(e,t="",r){!1!==r&&(t=d(t));let s=e.parse(t);return u(e,s)}function u(e,t){return e.serialize(t).split("#")[0]+"#"}t.getFullPath=l,t._getFullPath=u;let c=/#\/?$/;function d(e){return e?e.replace(c,""):""}t.normalizeId=d,t.resolveUrl=function(e,t,r){return r=d(r),e.resolve(t,r)};let p=/^[a-z_][-a-z0-9._]*$/i;t.getSchemaRefs=function(e,t){if("boolean"==typeof e)return{};let{schemaId:r,uriResolver:s}=this.opts,n=d(e[r]||t),a={"":n},u=l(s,n,!1),c={},f=new Set;return i(e,{allKeys:!0},(e,t,s,o)=>{if(void 0===o)return;let i=u+t,n=a[o];function l(t){let r=this.opts.uriResolver.resolve;if(t=d(n?r(n,t):t),f.has(t))throw m(t);f.add(t);let s=this.refs[t];return"string"==typeof s&&(s=this.refs[s]),"object"==typeof s?h(e,s.schema,t):t!==d(i)&&("#"===t[0]?(h(e,c[t],t),c[t]=e):this.refs[t]=i),t}function y(e){if("string"==typeof e){if(!p.test(e))throw Error(`invalid anchor "${e}"`);l.call(this,`#${e}`)}}"string"==typeof e[r]&&(n=l.call(this,e[r])),y.call(this,e.$anchor),y.call(this,e.$dynamicAnchor),a[t]=n}),c;function h(e,t,r){if(void 0!==t&&!o(e,t))throw m(r)}function m(e){return Error(`reference "${e}" resolves to more than one schema`)}}},9881(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getRules=t.isJSONType=void 0;let r=new Set(["string","number","integer","boolean","null","object","array"]);t.isJSONType=function(e){return"string"==typeof e&&r.has(e)},t.getRules=function(){let e={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...e,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},e.number,e.string,e.array,e.object],post:{rules:[]},all:{},keywords:{}}}},8512(e,t,r){"use strict";var s,o;Object.defineProperty(t,"__esModule",{value:!0}),t.checkStrictMode=t.getErrorPath=t.Type=t.useFunc=t.setEvaluated=t.evaluatedPropsToName=t.mergeEvaluated=t.eachItem=t.unescapeJsonPointer=t.escapeJsonPointer=t.escapeFragment=t.unescapeFragment=t.schemaRefOrVal=t.schemaHasRulesButRef=t.schemaHasRules=t.checkUnknownRules=t.alwaysValidSchema=t.toHash=void 0;let i=r(6556),n=r(1175);function a(e,t=e.schema){let{opts:r,self:s}=e;if(!r.strictSchema||"boolean"==typeof t)return;let o=s.RULES.keywords;for(let r in t)o[r]||m(e,`unknown keyword: "${r}"`)}function l(e,t){if("boolean"==typeof e)return!e;for(let r in e)if(t[r])return!0;return!1}function u(e){return"number"==typeof e?`${e}`:e.replace(/~/g,"~0").replace(/\//g,"~1")}function c(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function d({mergeNames:e,mergeToName:t,mergeValues:r,resultToName:s}){return(o,n,a,l)=>{let u=void 0===a?n:a instanceof i.Name?(n instanceof i.Name?e(o,n,a):t(o,n,a),a):n instanceof i.Name?(t(o,a,n),n):r(n,a);return l!==i.Name||u instanceof i.Name?u:s(o,u)}}function p(e,t){if(!0===t)return e.var("props",!0);let r=e.var("props",(0,i._)`{}`);return void 0!==t&&f(e,r,t),r}function f(e,t,r){Object.keys(r).forEach(r=>e.assign((0,i._)`${t}${(0,i.getProperty)(r)}`,!0))}t.toHash=function(e){let t={};for(let r of e)t[r]=!0;return t},t.alwaysValidSchema=function(e,t){return"boolean"==typeof t?t:0===Object.keys(t).length||(a(e,t),!l(t,e.self.RULES.all))},t.checkUnknownRules=a,t.schemaHasRules=l,t.schemaHasRulesButRef=function(e,t){if("boolean"==typeof e)return!e;for(let r in e)if("$ref"!==r&&t.all[r])return!0;return!1},t.schemaRefOrVal=function({topSchemaRef:e,schemaPath:t},r,s,o){if(!o){if("number"==typeof r||"boolean"==typeof r)return r;if("string"==typeof r)return(0,i._)`${r}`}return(0,i._)`${e}${t}${(0,i.getProperty)(s)}`},t.unescapeFragment=function(e){return c(decodeURIComponent(e))},t.escapeFragment=function(e){return encodeURIComponent(u(e))},t.escapeJsonPointer=u,t.unescapeJsonPointer=c,t.eachItem=function(e,t){if(Array.isArray(e))for(let r of e)t(r);else t(e)},t.mergeEvaluated={props:d({mergeNames:(e,t,r)=>e.if((0,i._)`${r} !== true && ${t} !== undefined`,()=>{e.if((0,i._)`${t} === true`,()=>e.assign(r,!0),()=>e.assign(r,(0,i._)`${r} || {}`).code((0,i._)`Object.assign(${r}, ${t})`))}),mergeToName:(e,t,r)=>e.if((0,i._)`${r} !== true`,()=>{!0===t?e.assign(r,!0):(e.assign(r,(0,i._)`${r} || {}`),f(e,r,t))}),mergeValues:(e,t)=>!0===e||{...e,...t},resultToName:p}),items:d({mergeNames:(e,t,r)=>e.if((0,i._)`${r} !== true && ${t} !== undefined`,()=>e.assign(r,(0,i._)`${t} === true ? true : ${r} > ${t} ? ${r} : ${t}`)),mergeToName:(e,t,r)=>e.if((0,i._)`${r} !== true`,()=>e.assign(r,!0===t||(0,i._)`${r} > ${t} ? ${r} : ${t}`)),mergeValues:(e,t)=>!0===e||Math.max(e,t),resultToName:(e,t)=>e.var("items",t)})},t.evaluatedPropsToName=p,t.setEvaluated=f;let h={};function m(e,t,r=e.opts.strictSchema){if(r){if(t=`strict mode: ${t}`,!0===r)throw Error(t);e.self.logger.warn(t)}}t.useFunc=function(e,t){return e.scopeValue("func",{ref:t,code:h[t.code]||(h[t.code]=new n._Code(t.code))})},(o=s||(t.Type=s={}))[o.Num=0]="Num",o[o.Str=1]="Str",t.getErrorPath=function(e,t,r){if(e instanceof i.Name){let o=t===s.Num;return r?o?(0,i._)`"[" + ${e} + "]"`:(0,i._)`"['" + ${e} + "']"`:o?(0,i._)`"/" + ${e}`:(0,i._)`"/" + ${e}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return r?(0,i.getProperty)(e).toString():"/"+u(e)},t.checkStrictMode=m},4204(e,t){"use strict";function r(e,t){return t.rules.some(t=>s(e,t))}function s(e,t){var r;return void 0!==e[t.keyword]||(null==(r=t.definition.implements)?void 0:r.some(t=>void 0!==e[t]))}Object.defineProperty(t,"__esModule",{value:!0}),t.shouldUseRule=t.shouldUseGroup=t.schemaHasRulesForType=void 0,t.schemaHasRulesForType=function({schema:e,self:t},s){let o=t.RULES.types[s];return o&&!0!==o&&r(e,o)},t.shouldUseGroup=r,t.shouldUseRule=s},2882(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.boolOrEmptySchema=t.topBoolOrEmptySchema=void 0;let s=r(7747),o=r(6556),i=r(4614),n={message:"boolean schema is false"};function a(e,t){let{gen:r,data:o}=e;(0,s.reportError)({gen:r,keyword:"false schema",data:o,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:e},n,void 0,t)}t.topBoolOrEmptySchema=function(e){let{gen:t,schema:r,validateName:s}=e;!1===r?a(e,!1):"object"==typeof r&&!0===r.$async?t.return(i.default.data):(t.assign((0,o._)`${s}.errors`,null),t.return(!0))},t.boolOrEmptySchema=function(e,t){let{gen:r,schema:s}=e;!1===s?(r.var(t,!1),a(e)):r.var(t,!0)}},4029(e,t,r){"use strict";var s,o;Object.defineProperty(t,"__esModule",{value:!0}),t.reportTypeError=t.checkDataTypes=t.checkDataType=t.coerceAndCheckDataType=t.getJSONTypes=t.getSchemaTypes=t.DataType=void 0;let i=r(9881),n=r(4204),a=r(7747),l=r(6556),u=r(8512);function c(e){let t=Array.isArray(e)?e:e?[e]:[];if(t.every(i.isJSONType))return t;throw Error("type must be JSONType or JSONType[]: "+t.join(","))}(o=s||(t.DataType=s={}))[o.Correct=0]="Correct",o[o.Wrong=1]="Wrong",t.getSchemaTypes=function(e){let t=c(e.type);if(t.includes("null")){if(!1===e.nullable)throw Error("type: null contradicts nullable: false")}else{if(!t.length&&void 0!==e.nullable)throw Error('"nullable" cannot be used without "type"');!0===e.nullable&&t.push("null")}return t},t.getJSONTypes=c,t.coerceAndCheckDataType=function(e,t){var r,o;let{gen:i,data:a,opts:u}=e,c=(r=t,(o=u.coerceTypes)?r.filter(e=>d.has(e)||"array"===o&&"array"===e):[]),p=t.length>0&&!(0===c.length&&1===t.length&&(0,n.schemaHasRulesForType)(e,t[0]));if(p){let r=f(t,a,u.strictNumbers,s.Wrong);i.if(r,()=>{c.length?function(e,t,r){let{gen:s,data:o,opts:i}=e,n=s.let("dataType",(0,l._)`typeof ${o}`),a=s.let("coerced",(0,l._)`undefined`);for(let e of("array"===i.coerceTypes&&s.if((0,l._)`${n} == 'object' && Array.isArray(${o}) && ${o}.length == 1`,()=>s.assign(o,(0,l._)`${o}[0]`).assign(n,(0,l._)`typeof ${o}`).if(f(t,o,i.strictNumbers),()=>s.assign(a,o))),s.if((0,l._)`${a} !== undefined`),r))(d.has(e)||"array"===e&&"array"===i.coerceTypes)&&function(e){switch(e){case"string":s.elseIf((0,l._)`${n} == "number" || ${n} == "boolean"`).assign(a,(0,l._)`"" + ${o}`).elseIf((0,l._)`${o} === null`).assign(a,(0,l._)`""`);return;case"number":s.elseIf((0,l._)`${n} == "boolean" || ${o} === null
              || (${n} == "string" && ${o} && ${o} == +${o})`).assign(a,(0,l._)`+${o}`);return;case"integer":s.elseIf((0,l._)`${n} === "boolean" || ${o} === null
              || (${n} === "string" && ${o} && ${o} == +${o} && !(${o} % 1))`).assign(a,(0,l._)`+${o}`);return;case"boolean":s.elseIf((0,l._)`${o} === "false" || ${o} === 0 || ${o} === null`).assign(a,!1).elseIf((0,l._)`${o} === "true" || ${o} === 1`).assign(a,!0);return;case"null":s.elseIf((0,l._)`${o} === "" || ${o} === 0 || ${o} === false`),s.assign(a,null);return;case"array":s.elseIf((0,l._)`${n} === "string" || ${n} === "number"
              || ${n} === "boolean" || ${o} === null`).assign(a,(0,l._)`[${o}]`)}}(e);s.else(),m(e),s.endIf(),s.if((0,l._)`${a} !== undefined`,()=>{s.assign(o,a),function({gen:e,parentData:t,parentDataProperty:r},s){e.if((0,l._)`${t} !== undefined`,()=>e.assign((0,l._)`${t}[${r}]`,s))}(e,a)})}(e,t,c):m(e)})}return p};let d=new Set(["string","number","integer","boolean","null"]);function p(e,t,r,o=s.Correct){let i,n=o===s.Correct?l.operators.EQ:l.operators.NEQ;switch(e){case"null":return(0,l._)`${t} ${n} null`;case"array":i=(0,l._)`Array.isArray(${t})`;break;case"object":i=(0,l._)`${t} && typeof ${t} == "object" && !Array.isArray(${t})`;break;case"integer":i=a((0,l._)`!(${t} % 1) && !isNaN(${t})`);break;case"number":i=a();break;default:return(0,l._)`typeof ${t} ${n} ${e}`}return o===s.Correct?i:(0,l.not)(i);function a(e=l.nil){return(0,l.and)((0,l._)`typeof ${t} == "number"`,e,r?(0,l._)`isFinite(${t})`:l.nil)}}function f(e,t,r,s){let o;if(1===e.length)return p(e[0],t,r,s);let i=(0,u.toHash)(e);if(i.array&&i.object){let e=(0,l._)`typeof ${t} != "object"`;o=i.null?e:(0,l._)`!${t} || ${e}`,delete i.null,delete i.array,delete i.object}else o=l.nil;for(let e in i.number&&delete i.integer,i)o=(0,l.and)(o,p(e,t,r,s));return o}t.checkDataType=p,t.checkDataTypes=f;let h={message:({schema:e})=>`must be ${e}`,params:({schema:e,schemaValue:t})=>"string"==typeof e?(0,l._)`{type: ${e}}`:(0,l._)`{type: ${t}}`};function m(e){let t=function(e){let{gen:t,data:r,schema:s}=e,o=(0,u.schemaRefOrVal)(e,s,"type");return{gen:t,keyword:"type",data:r,schema:s.type,schemaCode:o,schemaValue:o,parentSchema:s,params:{},it:e}}(e);(0,a.reportError)(t,h)}t.reportTypeError=m},6899(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.assignDefaults=void 0;let s=r(6556),o=r(8512);function i(e,t,r){let{gen:i,compositeRule:n,data:a,opts:l}=e;if(void 0===r)return;let u=(0,s._)`${a}${(0,s.getProperty)(t)}`;if(n)return void(0,o.checkStrictMode)(e,`default is ignored for: ${u}`);let c=(0,s._)`${u} === undefined`;"empty"===l.useDefaults&&(c=(0,s._)`${c} || ${u} === null || ${u} === ""`),i.if(c,(0,s._)`${u} = ${(0,s.stringify)(r)}`)}t.assignDefaults=function(e,t){let{properties:r,items:s}=e.schema;if("object"===t&&r)for(let t in r)i(e,t,r[t].default);else"array"===t&&Array.isArray(s)&&s.forEach((t,r)=>i(e,r,t.default))}},6889(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getData=t.KeywordCxt=t.validateFunctionCode=void 0;let s=r(2882),o=r(4029),i=r(4204),n=r(4029),a=r(6899),l=r(1074),u=r(4456),c=r(6556),d=r(4614),p=r(234),f=r(8512),h=r(7747);function m({gen:e,validateName:t,schema:r,schemaEnv:s,opts:o},i){var n;o.code.es5?e.func(t,(0,c._)`${d.default.data}, ${d.default.valCxt}`,s.$async,()=>{var t,s;e.code((0,c._)`"use strict"; ${y(r,o)}`),t=e,s=o,t.if(d.default.valCxt,()=>{t.var(d.default.instancePath,(0,c._)`${d.default.valCxt}.${d.default.instancePath}`),t.var(d.default.parentData,(0,c._)`${d.default.valCxt}.${d.default.parentData}`),t.var(d.default.parentDataProperty,(0,c._)`${d.default.valCxt}.${d.default.parentDataProperty}`),t.var(d.default.rootData,(0,c._)`${d.default.valCxt}.${d.default.rootData}`),s.dynamicRef&&t.var(d.default.dynamicAnchors,(0,c._)`${d.default.valCxt}.${d.default.dynamicAnchors}`)},()=>{t.var(d.default.instancePath,(0,c._)`""`),t.var(d.default.parentData,(0,c._)`undefined`),t.var(d.default.parentDataProperty,(0,c._)`undefined`),t.var(d.default.rootData,d.default.data),s.dynamicRef&&t.var(d.default.dynamicAnchors,(0,c._)`{}`)}),e.code(i)}):e.func(t,(0,c._)`${d.default.data}, ${(n=o,(0,c._)`{${d.default.instancePath}="", ${d.default.parentData}, ${d.default.parentDataProperty}, ${d.default.rootData}=${d.default.data}${n.dynamicRef?(0,c._)`, ${d.default.dynamicAnchors}={}`:c.nil}}={}`)}`,s.$async,()=>e.code(y(r,o)).code(i))}function y(e,t){let r="object"==typeof e&&e[t.schemaId];return r&&(t.code.source||t.code.process)?(0,c._)`/*# sourceURL=${r} */`:c.nil}function v({schema:e,self:t}){if("boolean"==typeof e)return!e;for(let r in e)if(t.RULES.all[r])return!0;return!1}function g(e){return"boolean"!=typeof e.schema}function _(e){(0,f.checkUnknownRules)(e),function(e){let{schema:t,errSchemaPath:r,opts:s,self:o}=e;t.$ref&&s.ignoreKeywordsWithRef&&(0,f.schemaHasRulesButRef)(t,o.RULES)&&o.logger.warn(`$ref: keywords ignored in schema at path "${r}"`)}(e)}function $(e,t){if(e.opts.jtd)return b(e,[],!1,t);let r=(0,o.getSchemaTypes)(e.schema),s=(0,o.coerceAndCheckDataType)(e,r);b(e,r,!s,t)}function w({gen:e,schemaEnv:t,schema:r,errSchemaPath:s,opts:o}){let i=r.$comment;if(!0===o.$comment)e.code((0,c._)`${d.default.self}.logger.log(${i})`);else if("function"==typeof o.$comment){let r=(0,c.str)`${s}/$comment`,o=e.scopeValue("root",{ref:t.root});e.code((0,c._)`${d.default.self}.opts.$comment(${i}, ${r}, ${o}.schema)`)}}function b(e,t,r,s){var o,a,l,u;let{gen:p,schema:h,data:m,allErrors:y,opts:v,self:g}=e,{RULES:_}=g;if(h.$ref&&(v.ignoreKeywordsWithRef||!(0,f.schemaHasRulesButRef)(h,_)))return void p.block(()=>x(e,"$ref",_.all.$ref.definition));function $(o){(0,i.shouldUseGroup)(h,o)&&(o.type?(p.if((0,n.checkDataType)(o.type,m,v.strictNumbers)),E(e,o),1===t.length&&t[0]===o.type&&r&&(p.else(),(0,n.reportTypeError)(e)),p.endIf()):E(e,o),y||p.if((0,c._)`${d.default.errors} === ${s||0}`))}v.jtd||(o=e,a=t,!o.schemaEnv.meta&&o.opts.strictTypes&&(function(e,t){if(t.length){if(!e.dataTypes.length){e.dataTypes=t;return}t.forEach(t=>{k(e.dataTypes,t)||S(e,`type "${t}" not allowed by context "${e.dataTypes.join(",")}"`)}),function(e,t){let r=[];for(let s of e.dataTypes)k(t,s)?r.push(s):t.includes("integer")&&"number"===s&&r.push("integer");e.dataTypes=r}(e,t)}}(o,a),o.opts.allowUnionTypes||(l=o,(u=a).length>1&&!(2===u.length&&u.includes("null"))&&S(l,"use allowUnionTypes to allow union type keyword")),function(e,t){let r=e.self.RULES.all;for(let s in r){let o=r[s];if("object"==typeof o&&(0,i.shouldUseRule)(e.schema,o)){let{type:r}=o.definition;r.length&&!r.some(e=>{var r,s;return r=t,s=e,r.includes(s)||"number"===s&&r.includes("integer")})&&S(e,`missing type "${r.join(",")}" for keyword "${s}"`)}}}(o,o.dataTypes))),p.block(()=>{for(let e of _.rules)$(e);$(_.post)})}function E(e,t){let{gen:r,schema:s,opts:{useDefaults:o}}=e;o&&(0,a.assignDefaults)(e,t.type),r.block(()=>{for(let r of t.rules)(0,i.shouldUseRule)(s,r)&&x(e,r.keyword,r.definition,t.type)})}function k(e,t){return e.includes(t)||"integer"===t&&e.includes("number")}function S(e,t){let r=e.schemaEnv.baseId+e.errSchemaPath;t+=` at "${r}" (strictTypes)`,(0,f.checkStrictMode)(e,t,e.opts.strictTypes)}t.validateFunctionCode=function(e){g(e)&&(_(e),v(e))?function(e){let{schema:t,opts:r,gen:s}=e;m(e,()=>{r.$comment&&t.$comment&&w(e),function(e){let{schema:t,opts:r}=e;void 0!==t.default&&r.useDefaults&&r.strictSchema&&(0,f.checkStrictMode)(e,"default is ignored in the schema root")}(e),s.let(d.default.vErrors,null),s.let(d.default.errors,0),r.unevaluated&&function(e){let{gen:t,validateName:r}=e;e.evaluated=t.const("evaluated",(0,c._)`${r}.evaluated`),t.if((0,c._)`${e.evaluated}.dynamicProps`,()=>t.assign((0,c._)`${e.evaluated}.props`,(0,c._)`undefined`)),t.if((0,c._)`${e.evaluated}.dynamicItems`,()=>t.assign((0,c._)`${e.evaluated}.items`,(0,c._)`undefined`))}(e),$(e),function(e){let{gen:t,schemaEnv:r,validateName:s,ValidationError:o,opts:i}=e;r.$async?t.if((0,c._)`${d.default.errors} === 0`,()=>t.return(d.default.data),()=>t.throw((0,c._)`new ${o}(${d.default.vErrors})`)):(t.assign((0,c._)`${s}.errors`,d.default.vErrors),i.unevaluated&&function({gen:e,evaluated:t,props:r,items:s}){r instanceof c.Name&&e.assign((0,c._)`${t}.props`,r),s instanceof c.Name&&e.assign((0,c._)`${t}.items`,s)}(e),t.return((0,c._)`${d.default.errors} === 0`))}(e)})}(e):m(e,()=>(0,s.topBoolOrEmptySchema)(e))};class T{constructor(e,t,r){if((0,l.validateKeywordUsage)(e,t,r),this.gen=e.gen,this.allErrors=e.allErrors,this.keyword=r,this.data=e.data,this.schema=e.schema[r],this.$data=t.$data&&e.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,f.schemaRefOrVal)(e,this.schema,r,this.$data),this.schemaType=t.schemaType,this.parentSchema=e.schema,this.params={},this.it=e,this.def=t,this.$data)this.schemaCode=e.gen.const("vSchema",O(this.$data,e));else if(this.schemaCode=this.schemaValue,!(0,l.validSchemaType)(this.schema,t.schemaType,t.allowUndefined))throw Error(`${r} value must be ${JSON.stringify(t.schemaType)}`);("code"in t?t.trackErrors:!1!==t.errors)&&(this.errsCount=e.gen.const("_errs",d.default.errors))}result(e,t,r){this.failResult((0,c.not)(e),t,r)}failResult(e,t,r){this.gen.if(e),r?r():this.error(),t?(this.gen.else(),t(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(e,t){this.failResult((0,c.not)(e),void 0,t)}fail(e){if(void 0===e){this.error(),this.allErrors||this.gen.if(!1);return}this.gen.if(e),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(e){if(!this.$data)return this.fail(e);let{schemaCode:t}=this;this.fail((0,c._)`${t} !== undefined && (${(0,c.or)(this.invalid$data(),e)})`)}error(e,t,r){if(t){this.setParams(t),this._error(e,r),this.setParams({});return}this._error(e,r)}_error(e,t){(e?h.reportExtraError:h.reportError)(this,this.def.error,t)}$dataError(){(0,h.reportError)(this,this.def.$dataError||h.keyword$DataError)}reset(){if(void 0===this.errsCount)throw Error('add "trackErrors" to keyword definition');(0,h.resetErrorsCount)(this.gen,this.errsCount)}ok(e){this.allErrors||this.gen.if(e)}setParams(e,t){t?Object.assign(this.params,e):this.params=e}block$data(e,t,r=c.nil){this.gen.block(()=>{this.check$data(e,r),t()})}check$data(e=c.nil,t=c.nil){if(!this.$data)return;let{gen:r,schemaCode:s,schemaType:o,def:i}=this;r.if((0,c.or)((0,c._)`${s} === undefined`,t)),e!==c.nil&&r.assign(e,!0),(o.length||i.validateSchema)&&(r.elseIf(this.invalid$data()),this.$dataError(),e!==c.nil&&r.assign(e,!1)),r.else()}invalid$data(){let{gen:e,schemaCode:t,schemaType:r,def:s,it:o}=this;return(0,c.or)(function(){if(r.length){if(!(t instanceof c.Name))throw Error("ajv implementation error");let e=Array.isArray(r)?r:[r];return(0,c._)`${(0,n.checkDataTypes)(e,t,o.opts.strictNumbers,n.DataType.Wrong)}`}return c.nil}(),function(){if(s.validateSchema){let r=e.scopeValue("validate$data",{ref:s.validateSchema});return(0,c._)`!${r}(${t})`}return c.nil}())}subschema(e,t){let r=(0,u.getSubschema)(this.it,e);(0,u.extendSubschemaData)(r,this.it,e),(0,u.extendSubschemaMode)(r,e);let o={...this.it,...r,items:void 0,props:void 0};return!function(e,t){if(g(e)&&(_(e),v(e)))return function(e,t){var r;let s,{schema:o,gen:i,opts:n}=e;n.$comment&&o.$comment&&w(e),(s=(r=e).schema[r.opts.schemaId])&&(r.baseId=(0,p.resolveUrl)(r.opts.uriResolver,r.baseId,s)),function(e){if(e.schema.$async&&!e.schemaEnv.$async)throw Error("async schema in sync schema")}(e);let a=i.const("_errs",d.default.errors);$(e,a),i.var(t,(0,c._)`${a} === ${d.default.errors}`)}(e,t);(0,s.boolOrEmptySchema)(e,t)}(o,t),o}mergeEvaluated(e,t){let{it:r,gen:s}=this;r.opts.unevaluated&&(!0!==r.props&&void 0!==e.props&&(r.props=f.mergeEvaluated.props(s,e.props,r.props,t)),!0!==r.items&&void 0!==e.items&&(r.items=f.mergeEvaluated.items(s,e.items,r.items,t)))}mergeValidEvaluated(e,t){let{it:r,gen:s}=this;if(r.opts.unevaluated&&(!0!==r.props||!0!==r.items))return s.if(t,()=>this.mergeEvaluated(e,c.Name)),!0}}function x(e,t,r,s){let o=new T(e,r,t);"code"in r?r.code(o,s):o.$data&&r.validate?(0,l.funcKeywordCode)(o,r):"macro"in r?(0,l.macroKeywordCode)(o,r):(r.compile||r.validate)&&(0,l.funcKeywordCode)(o,r)}t.KeywordCxt=T;let P=/^\/(?:[^~]|~0|~1)*$/,I=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function O(e,{dataLevel:t,dataNames:r,dataPathArr:s}){let o,i;if(""===e)return d.default.rootData;if("/"===e[0]){if(!P.test(e))throw Error(`Invalid JSON-pointer: ${e}`);o=e,i=d.default.rootData}else{let n=I.exec(e);if(!n)throw Error(`Invalid JSON-pointer: ${e}`);let l=+n[1];if("#"===(o=n[2])){if(l>=t)throw Error(a("property/index",l));return s[t-l]}if(l>t)throw Error(a("data",l));if(i=r[t-l],!o)return i}let n=i;for(let e of o.split("/"))e&&(i=(0,c._)`${i}${(0,c.getProperty)((0,f.unescapeJsonPointer)(e))}`,n=(0,c._)`${n} && ${i}`);return n;function a(e,r){return`Cannot access ${e} ${r} levels up, current level is ${t}`}}t.getData=O},1074(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validateKeywordUsage=t.validSchemaType=t.funcKeywordCode=t.macroKeywordCode=void 0;let s=r(6556),o=r(4614),i=r(3716),n=r(7747);function a(e){let{gen:t,data:r,it:o}=e;t.if(o.parentData,()=>t.assign(r,(0,s._)`${o.parentData}[${o.parentDataProperty}]`))}function l(e,t,r){if(void 0===r)throw Error(`keyword "${t}" failed to compile`);return e.scopeValue("keyword","function"==typeof r?{ref:r}:{ref:r,code:(0,s.stringify)(r)})}t.macroKeywordCode=function(e,t){let{gen:r,keyword:o,schema:i,parentSchema:n,it:a}=e,u=t.macro.call(a.self,i,n,a),c=l(r,o,u);!1!==a.opts.validateSchema&&a.self.validateSchema(u,!0);let d=r.name("valid");e.subschema({schema:u,schemaPath:s.nil,errSchemaPath:`${a.errSchemaPath}/${o}`,topSchemaRef:c,compositeRule:!0},d),e.pass(d,()=>e.error(!0))},t.funcKeywordCode=function(e,t){var r;let{gen:u,keyword:c,schema:d,parentSchema:p,$data:f,it:h}=e;!function({schemaEnv:e},t){if(t.async&&!e.$async)throw Error("async keyword in sync schema")}(h,t);let m=l(u,c,!f&&t.compile?t.compile.call(h.self,d,p,h):t.validate),y=u.let("valid");function v(r=t.async?(0,s._)`await `:s.nil){let n=h.opts.passContext?o.default.this:o.default.self,a=!("compile"in t&&!f||!1===t.schema);u.assign(y,(0,s._)`${r}${(0,i.callValidateCode)(e,m,n,a)}`,t.modifying)}function g(e){var r;u.if((0,s.not)(null!=(r=t.valid)?r:y),e)}e.block$data(y,function(){if(!1===t.errors)v(),t.modifying&&a(e),g(()=>e.error());else{let r,i,l=t.async?(r=u.let("ruleErrs",null),u.try(()=>v((0,s._)`await `),e=>u.assign(y,!1).if((0,s._)`${e} instanceof ${h.ValidationError}`,()=>u.assign(r,(0,s._)`${e}.errors`),()=>u.throw(e))),r):(i=(0,s._)`${m}.errors`,u.assign(i,null),v(s.nil),i);t.modifying&&a(e),g(()=>(function(e,t){let{gen:r}=e;r.if((0,s._)`Array.isArray(${t})`,()=>{r.assign(o.default.vErrors,(0,s._)`${o.default.vErrors} === null ? ${t} : ${o.default.vErrors}.concat(${t})`).assign(o.default.errors,(0,s._)`${o.default.vErrors}.length`),(0,n.extendErrors)(e)},()=>e.error())})(e,l))}}),e.ok(null!=(r=t.valid)?r:y)},t.validSchemaType=function(e,t,r=!1){return!t.length||t.some(t=>"array"===t?Array.isArray(e):"object"===t?e&&"object"==typeof e&&!Array.isArray(e):typeof e==t||r&&void 0===e)},t.validateKeywordUsage=function({schema:e,opts:t,self:r,errSchemaPath:s},o,i){if(Array.isArray(o.keyword)?!o.keyword.includes(i):o.keyword!==i)throw Error("ajv implementation error");let n=o.dependencies;if(null==n?void 0:n.some(t=>!Object.prototype.hasOwnProperty.call(e,t)))throw Error(`parent schema must have dependencies of ${i}: ${n.join(",")}`);if(o.validateSchema&&!o.validateSchema(e[i])){let e=`keyword "${i}" value is invalid at path "${s}": `+r.errorsText(o.validateSchema.errors);if("log"===t.validateSchema)r.logger.error(e);else throw Error(e)}}},4456(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.extendSubschemaMode=t.extendSubschemaData=t.getSubschema=void 0;let s=r(6556),o=r(8512);t.getSubschema=function(e,{keyword:t,schemaProp:r,schema:i,schemaPath:n,errSchemaPath:a,topSchemaRef:l}){if(void 0!==t&&void 0!==i)throw Error('both "keyword" and "schema" passed, only one allowed');if(void 0!==t){let i=e.schema[t];return void 0===r?{schema:i,schemaPath:(0,s._)`${e.schemaPath}${(0,s.getProperty)(t)}`,errSchemaPath:`${e.errSchemaPath}/${t}`}:{schema:i[r],schemaPath:(0,s._)`${e.schemaPath}${(0,s.getProperty)(t)}${(0,s.getProperty)(r)}`,errSchemaPath:`${e.errSchemaPath}/${t}/${(0,o.escapeFragment)(r)}`}}if(void 0!==i){if(void 0===n||void 0===a||void 0===l)throw Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:i,schemaPath:n,topSchemaRef:l,errSchemaPath:a}}throw Error('either "keyword" or "schema" must be passed')},t.extendSubschemaData=function(e,t,{dataProp:r,dataPropType:i,data:n,dataTypes:a,propertyName:l}){if(void 0!==n&&void 0!==r)throw Error('both "data" and "dataProp" passed, only one allowed');let{gen:u}=t;if(void 0!==r){let{errorPath:n,dataPathArr:a,opts:l}=t;c(u.let("data",(0,s._)`${t.data}${(0,s.getProperty)(r)}`,!0)),e.errorPath=(0,s.str)`${n}${(0,o.getErrorPath)(r,i,l.jsPropertySyntax)}`,e.parentDataProperty=(0,s._)`${r}`,e.dataPathArr=[...a,e.parentDataProperty]}function c(r){e.data=r,e.dataLevel=t.dataLevel+1,e.dataTypes=[],t.definedProperties=new Set,e.parentData=t.data,e.dataNames=[...t.dataNames,r]}void 0!==n&&(c(n instanceof s.Name?n:u.let("data",n,!0)),void 0!==l&&(e.propertyName=l)),a&&(e.dataTypes=a)},t.extendSubschemaMode=function(e,{jtdDiscriminator:t,jtdMetadata:r,compositeRule:s,createErrors:o,allErrors:i}){void 0!==s&&(e.compositeRule=s),void 0!==o&&(e.createErrors=o),void 0!==i&&(e.allErrors=i),e.jtdDiscriminator=t,e.jtdMetadata=r}},7285(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CodeGen=t.Name=t.nil=t.stringify=t.str=t._=t.KeywordCxt=void 0;var s=r(6889);Object.defineProperty(t,"KeywordCxt",{enumerable:!0,get:function(){return s.KeywordCxt}});var o=r(6556);Object.defineProperty(t,"_",{enumerable:!0,get:function(){return o._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return o.str}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return o.stringify}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return o.nil}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return o.Name}}),Object.defineProperty(t,"CodeGen",{enumerable:!0,get:function(){return o.CodeGen}});let i=r(9645),n=r(218),a=r(9881),l=r(9198),u=r(6556),c=r(234),d=r(4029),p=r(8512),f=r(2200),h=r(8669),m=(e,t)=>new RegExp(e,t);m.code="new RegExp";let y=["removeAdditional","useDefaults","coerceTypes"],v=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),g={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},_={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'};class ${constructor(e={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,e=this.opts={...e,...function(e){var t,r,s,o,i,n,a,l,u,c,d,p,f,y,v,g,_,$,w,b,E,k,S,T,x;let P=e.strict,I=null==(t=e.code)?void 0:t.optimize,O=!0===I||void 0===I?1:I||0,R=null!=(s=null==(r=e.code)?void 0:r.regExp)?s:m,j=null!=(o=e.uriResolver)?o:h.default;return{strictSchema:null==(n=null!=(i=e.strictSchema)?i:P)||n,strictNumbers:null==(l=null!=(a=e.strictNumbers)?a:P)||l,strictTypes:null!=(c=null!=(u=e.strictTypes)?u:P)?c:"log",strictTuples:null!=(p=null!=(d=e.strictTuples)?d:P)?p:"log",strictRequired:null!=(y=null!=(f=e.strictRequired)?f:P)&&y,code:e.code?{...e.code,optimize:O,regExp:R}:{optimize:O,regExp:R},loopRequired:null!=(v=e.loopRequired)?v:200,loopEnum:null!=(g=e.loopEnum)?g:200,meta:null==(_=e.meta)||_,messages:null==($=e.messages)||$,inlineRefs:null==(w=e.inlineRefs)||w,schemaId:null!=(b=e.schemaId)?b:"$id",addUsedSchema:null==(E=e.addUsedSchema)||E,validateSchema:null==(k=e.validateSchema)||k,validateFormats:null==(S=e.validateFormats)||S,unicodeRegExp:null==(T=e.unicodeRegExp)||T,int32range:null==(x=e.int32range)||x,uriResolver:j}}(e)};const{es5:t,lines:r}=this.opts.code;this.scope=new u.ValueScope({scope:{},prefixes:v,es5:t,lines:r}),this.logger=function(e){if(!1===e)return x;if(void 0===e)return console;if(e.log&&e.warn&&e.error)return e;throw Error("logger must implement log, warn and error methods")}(e.logger);const s=e.validateFormats;e.validateFormats=!1,this.RULES=(0,a.getRules)(),w.call(this,g,e,"NOT SUPPORTED"),w.call(this,_,e,"DEPRECATED","warn"),this._metaOpts=T.call(this),e.formats&&k.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),e.keywords&&S.call(this,e.keywords),"object"==typeof e.meta&&this.addMetaSchema(e.meta),E.call(this),e.validateFormats=s}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){let{$data:e,meta:t,schemaId:r}=this.opts,s=f;"id"===r&&((s={...f}).id=s.$id,delete s.$id),t&&e&&this.addMetaSchema(s,s[r],!1)}defaultMeta(){let{meta:e,schemaId:t}=this.opts;return this.opts.defaultMeta="object"==typeof e?e[t]||e:void 0}validate(e,t){let r;if("string"==typeof e){if(!(r=this.getSchema(e)))throw Error(`no schema with key or ref "${e}"`)}else r=this.compile(e);let s=r(t);return"$async"in r||(this.errors=r.errors),s}compile(e,t){let r=this._addSchema(e,t);return r.validate||this._compileSchemaEnv(r)}compileAsync(e,t){if("function"!=typeof this.opts.loadSchema)throw Error("options.loadSchema should be a function");let{loadSchema:r}=this.opts;return s.call(this,e,t);async function s(e,t){await o.call(this,e.$schema);let r=this._addSchema(e,t);return r.validate||i.call(this,r)}async function o(e){e&&!this.getSchema(e)&&await s.call(this,{$ref:e},!0)}async function i(e){try{return this._compileSchemaEnv(e)}catch(t){if(!(t instanceof n.default))throw t;return a.call(this,t),await l.call(this,t.missingSchema),i.call(this,e)}}function a({missingSchema:e,missingRef:t}){if(this.refs[e])throw Error(`AnySchema ${e} is loaded but ${t} cannot be resolved`)}async function l(e){let r=await u.call(this,e);this.refs[e]||await o.call(this,r.$schema),this.refs[e]||this.addSchema(r,e,t)}async function u(e){let t=this._loading[e];if(t)return t;try{return await (this._loading[e]=r(e))}finally{delete this._loading[e]}}}addSchema(e,t,r,s=this.opts.validateSchema){let o;if(Array.isArray(e)){for(let t of e)this.addSchema(t,void 0,r,s);return this}if("object"==typeof e){let{schemaId:t}=this.opts;if(void 0!==(o=e[t])&&"string"!=typeof o)throw Error(`schema ${t} must be string`)}return t=(0,c.normalizeId)(t||o),this._checkUnique(t),this.schemas[t]=this._addSchema(e,r,t,s,!0),this}addMetaSchema(e,t,r=this.opts.validateSchema){return this.addSchema(e,t,!0,r),this}validateSchema(e,t){let r;if("boolean"==typeof e)return!0;if(void 0!==(r=e.$schema)&&"string"!=typeof r)throw Error("$schema must be a string");if(!(r=r||this.opts.defaultMeta||this.defaultMeta()))return this.logger.warn("meta-schema not available"),this.errors=null,!0;let s=this.validate(r,e);if(!s&&t){let e="schema is invalid: "+this.errorsText();if("log"===this.opts.validateSchema)this.logger.error(e);else throw Error(e)}return s}getSchema(e){let t;for(;"string"==typeof(t=b.call(this,e));)e=t;if(void 0===t){let{schemaId:r}=this.opts,s=new l.SchemaEnv({schema:{},schemaId:r});if(!(t=l.resolveSchema.call(this,s,e)))return;this.refs[e]=t}return t.validate||this._compileSchemaEnv(t)}removeSchema(e){if(e instanceof RegExp)return this._removeAllSchemas(this.schemas,e),this._removeAllSchemas(this.refs,e),this;switch(typeof e){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{let t=b.call(this,e);return"object"==typeof t&&this._cache.delete(t.schema),delete this.schemas[e],delete this.refs[e],this}case"object":{this._cache.delete(e);let t=e[this.opts.schemaId];return t&&(t=(0,c.normalizeId)(t),delete this.schemas[t],delete this.refs[t]),this}default:throw Error("ajv.removeSchema: invalid parameter")}}addVocabulary(e){for(let t of e)this.addKeyword(t);return this}addKeyword(e,t){let r;if("string"==typeof e)r=e,"object"==typeof t&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),t.keyword=r);else if("object"==typeof e&&void 0===t){if(Array.isArray(r=(t=e).keyword)&&!r.length)throw Error("addKeywords: keyword must be string or non-empty array")}else throw Error("invalid addKeywords parameters");if(I.call(this,r,t),!t)return(0,p.eachItem)(r,e=>O.call(this,e)),this;j.call(this,t);let s={...t,type:(0,d.getJSONTypes)(t.type),schemaType:(0,d.getJSONTypes)(t.schemaType)};return(0,p.eachItem)(r,0===s.type.length?e=>O.call(this,e,s):e=>s.type.forEach(t=>O.call(this,e,s,t))),this}getKeyword(e){let t=this.RULES.all[e];return"object"==typeof t?t.definition:!!t}removeKeyword(e){let{RULES:t}=this;for(let r of(delete t.keywords[e],delete t.all[e],t.rules)){let t=r.rules.findIndex(t=>t.keyword===e);t>=0&&r.rules.splice(t,1)}return this}addFormat(e,t){return"string"==typeof t&&(t=new RegExp(t)),this.formats[e]=t,this}errorsText(e=this.errors,{separator:t=", ",dataVar:r="data"}={}){return e&&0!==e.length?e.map(e=>`${r}${e.instancePath} ${e.message}`).reduce((e,r)=>e+t+r):"No errors"}$dataMetaSchema(e,t){let r=this.RULES.all;for(let s of(e=JSON.parse(JSON.stringify(e)),t)){let t=s.split("/").slice(1),o=e;for(let e of t)o=o[e];for(let e in r){let t=r[e];if("object"!=typeof t)continue;let{$data:s}=t.definition,i=o[e];s&&i&&(o[e]=A(i))}}return e}_removeAllSchemas(e,t){for(let r in e){let s=e[r];(!t||t.test(r))&&("string"==typeof s?delete e[r]:s&&!s.meta&&(this._cache.delete(s.schema),delete e[r]))}}_addSchema(e,t,r,s=this.opts.validateSchema,o=this.opts.addUsedSchema){let i,{schemaId:n}=this.opts;if("object"==typeof e)i=e[n];else if(this.opts.jtd)throw Error("schema must be object");else if("boolean"!=typeof e)throw Error("schema must be object or boolean");let a=this._cache.get(e);if(void 0!==a)return a;r=(0,c.normalizeId)(i||r);let u=c.getSchemaRefs.call(this,e,r);return a=new l.SchemaEnv({schema:e,schemaId:n,meta:t,baseId:r,localRefs:u}),this._cache.set(a.schema,a),o&&!r.startsWith("#")&&(r&&this._checkUnique(r),this.refs[r]=a),s&&this.validateSchema(e,!0),a}_checkUnique(e){if(this.schemas[e]||this.refs[e])throw Error(`schema with key or id "${e}" already exists`)}_compileSchemaEnv(e){if(e.meta?this._compileMetaSchema(e):l.compileSchema.call(this,e),!e.validate)throw Error("ajv implementation error");return e.validate}_compileMetaSchema(e){let t=this.opts;this.opts=this._metaOpts;try{l.compileSchema.call(this,e)}finally{this.opts=t}}}function w(e,t,r,s="error"){for(let o in e)o in t&&this.logger[s](`${r}: option ${o}. ${e[o]}`)}function b(e){return e=(0,c.normalizeId)(e),this.schemas[e]||this.refs[e]}function E(){let e=this.opts.schemas;if(e)if(Array.isArray(e))this.addSchema(e);else for(let t in e)this.addSchema(e[t],t)}function k(){for(let e in this.opts.formats){let t=this.opts.formats[e];t&&this.addFormat(e,t)}}function S(e){if(Array.isArray(e))return void this.addVocabulary(e);for(let t in this.logger.warn("keywords option as map is deprecated, pass array"),e){let r=e[t];r.keyword||(r.keyword=t),this.addKeyword(r)}}function T(){let e={...this.opts};for(let t of y)delete e[t];return e}$.ValidationError=i.default,$.MissingRefError=n.default,t.default=$;let x={log(){},warn(){},error(){}},P=/^[a-z_$][a-z0-9_$:-]*$/i;function I(e,t){let{RULES:r}=this;if((0,p.eachItem)(e,e=>{if(r.keywords[e])throw Error(`Keyword ${e} is already defined`);if(!P.test(e))throw Error(`Keyword ${e} has invalid name`)}),t&&t.$data&&!("code"in t||"validate"in t))throw Error('$data keyword must have "code" or "validate" function')}function O(e,t,r){var s;let o=null==t?void 0:t.post;if(r&&o)throw Error('keyword with "post" flag cannot have "type"');let{RULES:i}=this,n=o?i.post:i.rules.find(({type:e})=>e===r);if(n||(n={type:r,rules:[]},i.rules.push(n)),i.keywords[e]=!0,!t)return;let a={keyword:e,definition:{...t,type:(0,d.getJSONTypes)(t.type),schemaType:(0,d.getJSONTypes)(t.schemaType)}};t.before?R.call(this,n,a,t.before):n.rules.push(a),i.all[e]=a,null==(s=t.implements)||s.forEach(e=>this.addKeyword(e))}function R(e,t,r){let s=e.rules.findIndex(e=>e.keyword===r);s>=0?e.rules.splice(s,0,t):(e.rules.push(t),this.logger.warn(`rule ${r} is not defined`))}function j(e){let{metaSchema:t}=e;void 0!==t&&(e.$data&&this.opts.$data&&(t=A(t)),e.validateSchema=this.compile(t,!0))}let N={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function A(e){return{anyOf:[e,N]}}},6935(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let s=r(7371);s.code='require("ajv/dist/runtime/equal").default',t.default=s},5014(e,t){"use strict";function r(e){let t,r=e.length,s=0,o=0;for(;o<r;)s++,(t=e.charCodeAt(o++))>=55296&&t<=56319&&o<r&&(64512&(t=e.charCodeAt(o)))==56320&&o++;return s}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r,r.code='require("ajv/dist/runtime/ucs2length").default'},8669(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let s=r(5019);s.code='require("ajv/dist/runtime/uri").default',t.default=s},9645(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=class extends Error{constructor(e){super("validation failed"),this.errors=e,this.ajv=this.validation=!0}}},8440(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validateAdditionalItems=void 0;let s=r(6556),o=r(8512);function i(e,t){let{gen:r,schema:i,data:n,keyword:a,it:l}=e;l.items=!0;let u=r.const("len",(0,s._)`${n}.length`);if(!1===i)e.setParams({len:t.length}),e.pass((0,s._)`${u} <= ${t.length}`);else if("object"==typeof i&&!(0,o.alwaysValidSchema)(l,i)){let i=r.var("valid",(0,s._)`${u} <= ${t.length}`);r.if((0,s.not)(i),()=>{var n;return n=i,void r.forRange("i",t.length,u,t=>{e.subschema({keyword:a,dataProp:t,dataPropType:o.Type.Num},n),l.allErrors||r.if((0,s.not)(n),()=>r.break())})}),e.ok(i)}}t.validateAdditionalItems=i,t.default={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:{message:({params:{len:e}})=>(0,s.str)`must NOT have more than ${e} items`,params:({params:{len:e}})=>(0,s._)`{limit: ${e}}`},code(e){let{parentSchema:t,it:r}=e,{items:s}=t;Array.isArray(s)?i(e,s):(0,o.checkStrictMode)(r,'"additionalItems" is ignored when "items" is not an array of schemas')}}},3439(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let s=r(3716),o=r(6556),i=r(4614),n=r(8512);t.default={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:{message:"must NOT have additional properties",params:({params:e})=>(0,o._)`{additionalProperty: ${e.additionalProperty}}`},code(e){let{gen:t,schema:r,parentSchema:a,data:l,errsCount:u,it:c}=e;if(!u)throw Error("ajv implementation error");let{allErrors:d,opts:p}=c;if(c.props=!0,"all"!==p.removeAdditional&&(0,n.alwaysValidSchema)(c,r))return;let f=(0,s.allSchemaProperties)(a.properties),h=(0,s.allSchemaProperties)(a.patternProperties);function m(e){t.code((0,o._)`delete ${l}[${e}]`)}function y(s){if("all"===p.removeAdditional||p.removeAdditional&&!1===r)return void m(s);if(!1===r){e.setParams({additionalProperty:s}),e.error(),d||t.break();return}if("object"==typeof r&&!(0,n.alwaysValidSchema)(c,r)){let r=t.name("valid");"failing"===p.removeAdditional?(v(s,r,!1),t.if((0,o.not)(r),()=>{e.reset(),m(s)})):(v(s,r),d||t.if((0,o.not)(r),()=>t.break()))}}function v(t,r,s){let o={keyword:"additionalProperties",dataProp:t,dataPropType:n.Type.Str};!1===s&&Object.assign(o,{compositeRule:!0,createErrors:!1,allErrors:!1}),e.subschema(o,r)}t.forIn("key",l,r=>{f.length||h.length?t.if(function(r){let i;if(f.length>8){let e=(0,n.schemaRefOrVal)(c,a.properties,"properties");i=(0,s.isOwnProperty)(t,e,r)}else i=f.length?(0,o.or)(...f.map(e=>(0,o._)`${r} === ${e}`)):o.nil;return h.length&&(i=(0,o.or)(i,...h.map(t=>(0,o._)`${(0,s.usePattern)(e,t)}.test(${r})`))),(0,o.not)(i)}(r),()=>y(r)):y(r)}),e.ok((0,o._)`${u} === ${i.default.errors}`)}}},4741(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let s=r(8512);t.default={keyword:"allOf",schemaType:"array",code(e){let{gen:t,schema:r,it:o}=e;if(!Array.isArray(r))throw Error("ajv implementation error");let i=t.name("valid");r.forEach((t,r)=>{if((0,s.alwaysValidSchema)(o,t))return;let n=e.subschema({keyword:"allOf",schemaProp:r},i);e.ok(i),e.mergeEvaluated(n)})}}},5988(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:r(3716).validateUnion,error:{message:"must match a schema in anyOf"}}},5078(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let s=r(6556),o=r(8512);t.default={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:{message:({params:{min:e,max:t}})=>void 0===t?(0,s.str)`must contain at least ${e} valid item(s)`:(0,s.str)`must contain at least ${e} and no more than ${t} valid item(s)`,params:({params:{min:e,max:t}})=>void 0===t?(0,s._)`{minContains: ${e}}`:(0,s._)`{minContains: ${e}, maxContains: ${t}}`},code(e){let t,r,{gen:i,schema:n,parentSchema:a,data:l,it:u}=e,{minContains:c,maxContains:d}=a;u.opts.next?(t=void 0===c?1:c,r=d):t=1;let p=i.const("len",(0,s._)`${l}.length`);if(e.setParams({min:t,max:r}),void 0===r&&0===t)return void(0,o.checkStrictMode)(u,'"minContains" == 0 without "maxContains": "contains" keyword ignored');if(void 0!==r&&t>r){(0,o.checkStrictMode)(u,'"minContains" > "maxContains" is always invalid'),e.fail();return}if((0,o.alwaysValidSchema)(u,n)){let o=(0,s._)`${p} >= ${t}`;void 0!==r&&(o=(0,s._)`${o} && ${p} <= ${r}`),e.pass(o);return}u.items=!0;let f=i.name("valid");function h(){let e=i.name("_valid"),o=i.let("count",0);m(e,()=>i.if(e,()=>{var e;return e=o,void(i.code((0,s._)`${e}++`),void 0===r?i.if((0,s._)`${e} >= ${t}`,()=>i.assign(f,!0).break()):(i.if((0,s._)`${e} > ${r}`,()=>i.assign(f,!1).break()),1===t?i.assign(f,!0):i.if((0,s._)`${e} >= ${t}`,()=>i.assign(f,!0))))}))}function m(t,r){i.forRange("i",0,p,s=>{e.subschema({keyword:"contains",dataProp:s,dataPropType:o.Type.Num,compositeRule:!0},t),r()})}void 0===r&&1===t?m(f,()=>i.if(f,()=>i.break())):0===t?(i.let(f,!0),void 0!==r&&i.if((0,s._)`${l}.length > 0`,h)):(i.let(f,!1),h()),e.result(f,()=>e.reset())}}},7394(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validateSchemaDeps=t.validatePropertyDeps=t.error=void 0;let s=r(6556),o=r(8512),i=r(3716);t.error={message:({params:{property:e,depsCount:t,deps:r}})=>(0,s.str)`must have ${1===t?"property":"properties"} ${r} when property ${e} is present`,params:({params:{property:e,depsCount:t,deps:r,missingProperty:o}})=>(0,s._)`{property: ${e},
    missingProperty: ${o},
    depsCount: ${t},
    deps: ${r}}`};let n={keyword:"dependencies",type:"object",schemaType:"object",error:t.error,code(e){let[t,r]=function({schema:e}){let t={},r={};for(let s in e)"__proto__"!==s&&((Array.isArray(e[s])?t:r)[s]=e[s]);return[t,r]}(e);a(e,t),l(e,r)}};function a(e,t=e.schema){let{gen:r,data:o,it:n}=e;if(0===Object.keys(t).length)return;let l=r.let("missing");for(let a in t){let u=t[a];if(0===u.length)continue;let c=(0,i.propertyInData)(r,o,a,n.opts.ownProperties);e.setParams({property:a,depsCount:u.length,deps:u.join(", ")}),n.allErrors?r.if(c,()=>{for(let t of u)(0,i.checkReportMissingProp)(e,t)}):(r.if((0,s._)`${c} && (${(0,i.checkMissingProp)(e,u,l)})`),(0,i.reportMissingProp)(e,l),r.else())}}function l(e,t=e.schema){let{gen:r,data:s,keyword:n,it:a}=e,u=r.name("valid");for(let l in t)(0,o.alwaysValidSchema)(a,t[l])||(r.if((0,i.propertyInData)(r,s,l,a.opts.ownProperties),()=>{let t=e.subschema({keyword:n,schemaProp:l},u);e.mergeValidEvaluated(t,u)},()=>r.var(u,!0)),e.ok(u))}t.validatePropertyDeps=a,t.validateSchemaDeps=l,t.default=n},9352(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let s=r(6556),o=r(8512);function i(e,t){let r=e.schema[t];return void 0!==r&&!(0,o.alwaysValidSchema)(e,r)}t.default={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:{message:({params:e})=>(0,s.str)`must match "${e.ifClause}" schema`,params:({params:e})=>(0,s._)`{failingKeyword: ${e.ifClause}}`},code(e){let t,{gen:r,parentSchema:n,it:a}=e;void 0===n.then&&void 0===n.else&&(0,o.checkStrictMode)(a,'"if" without "then" and "else" is ignored');let l=i(a,"then"),u=i(a,"else");if(!l&&!u)return;let c=r.let("valid",!0),d=r.name("_valid");if(t=e.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},d),e.mergeEvaluated(t),e.reset(),l&&u){let t=r.let("ifClause");e.setParams({ifClause:t}),r.if(d,p("then",t),p("else",t))}else l?r.if(d,p("then")):r.if((0,s.not)(d),p("else"));function p(t,o){return()=>{let i=e.subschema({keyword:t},d);r.assign(c,d),e.mergeValidEvaluated(i,c),o?r.assign(o,(0,s._)`${t}`):e.setParams({ifClause:t})}}e.pass(c,()=>e.error(!0))}}},3591(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let s=r(8440),o=r(9315),i=r(9135),n=r(6447),a=r(5078),l=r(7394),u=r(508),c=r(3439),d=r(3210),p=r(9880),f=r(3278),h=r(5988),m=r(4218),y=r(4741),v=r(9352),g=r(925);t.default=function(e=!1){let t=[f.default,h.default,m.default,y.default,v.default,g.default,u.default,c.default,l.default,d.default,p.default];return e?t.push(o.default,n.default):t.push(s.default,i.default),t.push(a.default),t}},9135(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validateTuple=void 0;let s=r(6556),o=r(8512),i=r(3716);function n(e,t,r=e.schema){let{gen:i,parentSchema:a,data:l,keyword:u,it:c}=e;(function(e){let{opts:s,errSchemaPath:i}=c,n=r.length,a=n===e.minItems&&(n===e.maxItems||!1===e[t]);if(s.strictTuples&&!a){let e=`"${u}" is ${n}-tuple, but minItems or maxItems/${t} are not specified or different at path "${i}"`;(0,o.checkStrictMode)(c,e,s.strictTuples)}})(a),c.opts.unevaluated&&r.length&&!0!==c.items&&(c.items=o.mergeEvaluated.items(i,r.length,c.items));let d=i.name("valid"),p=i.const("len",(0,s._)`${l}.length`);r.forEach((t,r)=>{(0,o.alwaysValidSchema)(c,t)||(i.if((0,s._)`${p} > ${r}`,()=>e.subschema({keyword:u,schemaProp:r,dataProp:r},d)),e.ok(d))})}t.validateTuple=n,t.default={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(e){let{schema:t,it:r}=e;if(Array.isArray(t))return n(e,"additionalItems",t);r.items=!0,(0,o.alwaysValidSchema)(r,t)||e.ok((0,i.validateArray)(e))}}},6447(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let s=r(6556),o=r(8512),i=r(3716),n=r(8440);t.default={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:{message:({params:{len:e}})=>(0,s.str)`must NOT have more than ${e} items`,params:({params:{len:e}})=>(0,s._)`{limit: ${e}}`},code(e){let{schema:t,parentSchema:r,it:s}=e,{prefixItems:a}=r;s.items=!0,(0,o.alwaysValidSchema)(s,t)||(a?(0,n.validateAdditionalItems)(e,a):e.ok((0,i.validateArray)(e)))}}},3278(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let s=r(8512);t.default={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(e){let{gen:t,schema:r,it:o}=e;if((0,s.alwaysValidSchema)(o,r))return void e.fail();let i=t.name("valid");e.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},i),e.failResult(i,()=>e.reset(),()=>e.error())},error:{message:"must NOT be valid"}}},4218(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let s=r(6556),o=r(8512);t.default={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:{message:"must match exactly one schema in oneOf",params:({params:e})=>(0,s._)`{passingSchemas: ${e.passing}}`},code(e){let{gen:t,schema:r,parentSchema:i,it:n}=e;if(!Array.isArray(r))throw Error("ajv implementation error");if(n.opts.discriminator&&i.discriminator)return;let a=t.let("valid",!1),l=t.let("passing",null),u=t.name("_valid");e.setParams({passing:l}),t.block(function(){r.forEach((r,i)=>{let c;(0,o.alwaysValidSchema)(n,r)?t.var(u,!0):c=e.subschema({keyword:"oneOf",schemaProp:i,compositeRule:!0},u),i>0&&t.if((0,s._)`${u} && ${a}`).assign(a,!1).assign(l,(0,s._)`[${l}, ${i}]`).else(),t.if(u,()=>{t.assign(a,!0),t.assign(l,i),c&&e.mergeEvaluated(c,s.Name)})})}),e.result(a,()=>e.reset(),()=>e.error(!0))}}},9880(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let s=r(3716),o=r(6556),i=r(8512),n=r(8512);t.default={keyword:"patternProperties",type:"object",schemaType:"object",code(e){let{gen:t,schema:r,data:a,parentSchema:l,it:u}=e,{opts:c}=u,d=(0,s.allSchemaProperties)(r),p=d.filter(e=>(0,i.alwaysValidSchema)(u,r[e]));if(0===d.length||p.length===d.length&&(!u.opts.unevaluated||!0===u.props))return;let f=c.strictSchema&&!c.allowMatchingProperties&&l.properties,h=t.name("valid");!0===u.props||u.props instanceof o.Name||(u.props=(0,n.evaluatedPropsToName)(t,u.props));let{props:m}=u;for(let e of d)f&&function(e){for(let t in f)new RegExp(e).test(t)&&(0,i.checkStrictMode)(u,`property ${t} matches pattern ${e} (use allowMatchingProperties)`)}(e),u.allErrors?y(e):(t.var(h,!0),y(e),t.if(h));function y(r){t.forIn("key",a,i=>{t.if((0,o._)`${(0,s.usePattern)(e,r)}.test(${i})`,()=>{let s=p.includes(r);s||e.subschema({keyword:"patternProperties",schemaProp:r,dataProp:i,dataPropType:n.Type.Str},h),u.opts.unevaluated&&!0!==m?t.assign((0,o._)`${m}[${i}]`,!0):s||u.allErrors||t.if((0,o.not)(h),()=>t.break())})})}}}},9315(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let s=r(9135);t.default={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:e=>(0,s.validateTuple)(e,"items")}},3210(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let s=r(6889),o=r(3716),i=r(8512),n=r(3439);t.default={keyword:"properties",type:"object",schemaType:"object",code(e){let{gen:t,schema:r,parentSchema:a,data:l,it:u}=e;"all"===u.opts.removeAdditional&&void 0===a.additionalProperties&&n.default.code(new s.KeywordCxt(u,n.default,"additionalProperties"));let c=(0,o.allSchemaProperties)(r);for(let e of c)u.definedProperties.add(e);u.opts.unevaluated&&c.length&&!0!==u.props&&(u.props=i.mergeEvaluated.props(t,(0,i.toHash)(c),u.props));let d=c.filter(e=>!(0,i.alwaysValidSchema)(u,r[e]));if(0===d.length)return;let p=t.name("valid");for(let s of d){var f;(f=s,u.opts.useDefaults&&!u.compositeRule&&void 0!==r[f].default)?h(s):(t.if((0,o.propertyInData)(t,l,s,u.opts.ownProperties)),h(s),u.allErrors||t.else().var(p,!0),t.endIf()),e.it.definedProperties.add(s),e.ok(p)}function h(t){e.subschema({keyword:"properties",schemaProp:t,dataProp:t},p)}}}},508(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let s=r(6556),o=r(8512);t.default={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:{message:"property name must be valid",params:({params:e})=>(0,s._)`{propertyName: ${e.propertyName}}`},code(e){let{gen:t,schema:r,data:i,it:n}=e;if((0,o.alwaysValidSchema)(n,r))return;let a=t.name("valid");t.forIn("key",i,r=>{e.setParams({propertyName:r}),e.subschema({keyword:"propertyNames",data:r,dataTypes:["string"],propertyName:r,compositeRule:!0},a),t.if((0,s.not)(a),()=>{e.error(!0),n.allErrors||t.break()})}),e.ok(a)}}},925(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let s=r(8512);t.default={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:e,parentSchema:t,it:r}){void 0===t.if&&(0,s.checkStrictMode)(r,`"${e}" without "if" is ignored`)}}},3716(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validateUnion=t.validateArray=t.usePattern=t.callValidateCode=t.schemaProperties=t.allSchemaProperties=t.noPropertyInData=t.propertyInData=t.isOwnProperty=t.hasPropFunc=t.reportMissingProp=t.checkMissingProp=t.checkReportMissingProp=void 0;let s=r(6556),o=r(8512),i=r(4614),n=r(8512);function a(e){return e.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,s._)`Object.prototype.hasOwnProperty`})}function l(e,t,r){return(0,s._)`${a(e)}.call(${t}, ${r})`}function u(e,t,r,o){let i=(0,s._)`${t}${(0,s.getProperty)(r)} === undefined`;return o?(0,s.or)(i,(0,s.not)(l(e,t,r))):i}function c(e){return e?Object.keys(e).filter(e=>"__proto__"!==e):[]}t.checkReportMissingProp=function(e,t){let{gen:r,data:o,it:i}=e;r.if(u(r,o,t,i.opts.ownProperties),()=>{e.setParams({missingProperty:(0,s._)`${t}`},!0),e.error()})},t.checkMissingProp=function({gen:e,data:t,it:{opts:r}},o,i){return(0,s.or)(...o.map(o=>(0,s.and)(u(e,t,o,r.ownProperties),(0,s._)`${i} = ${o}`)))},t.reportMissingProp=function(e,t){e.setParams({missingProperty:t},!0),e.error()},t.hasPropFunc=a,t.isOwnProperty=l,t.propertyInData=function(e,t,r,o){let i=(0,s._)`${t}${(0,s.getProperty)(r)} !== undefined`;return o?(0,s._)`${i} && ${l(e,t,r)}`:i},t.noPropertyInData=u,t.allSchemaProperties=c,t.schemaProperties=function(e,t){return c(t).filter(r=>!(0,o.alwaysValidSchema)(e,t[r]))},t.callValidateCode=function({schemaCode:e,data:t,it:{gen:r,topSchemaRef:o,schemaPath:n,errorPath:a},it:l},u,c,d){let p=d?(0,s._)`${e}, ${t}, ${o}${n}`:t,f=[[i.default.instancePath,(0,s.strConcat)(i.default.instancePath,a)],[i.default.parentData,l.parentData],[i.default.parentDataProperty,l.parentDataProperty],[i.default.rootData,i.default.rootData]];l.opts.dynamicRef&&f.push([i.default.dynamicAnchors,i.default.dynamicAnchors]);let h=(0,s._)`${p}, ${r.object(...f)}`;return c!==s.nil?(0,s._)`${u}.call(${c}, ${h})`:(0,s._)`${u}(${h})`};let d=(0,s._)`new RegExp`;t.usePattern=function({gen:e,it:{opts:t}},r){let o=t.unicodeRegExp?"u":"",{regExp:i}=t.code,a=i(r,o);return e.scopeValue("pattern",{key:a.toString(),ref:a,code:(0,s._)`${"new RegExp"===i.code?d:(0,n.useFunc)(e,i)}(${r}, ${o})`})},t.validateArray=function(e){let{gen:t,data:r,keyword:i,it:n}=e,a=t.name("valid");if(n.allErrors){let e=t.let("valid",!0);return l(()=>t.assign(e,!1)),e}return t.var(a,!0),l(()=>t.break()),a;function l(n){let l=t.const("len",(0,s._)`${r}.length`);t.forRange("i",0,l,r=>{e.subschema({keyword:i,dataProp:r,dataPropType:o.Type.Num},a),t.if((0,s.not)(a),n)})}},t.validateUnion=function(e){let{gen:t,schema:r,keyword:i,it:n}=e;if(!Array.isArray(r))throw Error("ajv implementation error");if(r.some(e=>(0,o.alwaysValidSchema)(n,e))&&!n.opts.unevaluated)return;let a=t.let("valid",!1),l=t.name("_valid");t.block(()=>r.forEach((r,o)=>{let n=e.subschema({keyword:i,schemaProp:o,compositeRule:!0},l);t.assign(a,(0,s._)`${a} || ${l}`),e.mergeValidEvaluated(n,l)||t.if((0,s.not)(a))})),e.result(a,()=>e.reset(),()=>e.error(!0))}},6464(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={keyword:"id",code(){throw Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}}},5861(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let s=r(6464),o=r(5140);t.default=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",s.default,o.default]},5140(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.callRef=t.getValidate=void 0;let s=r(218),o=r(3716),i=r(6556),n=r(4614),a=r(9198),l=r(8512);function u(e,t){let{gen:r}=e;return t.validate?r.scopeValue("validate",{ref:t.validate}):(0,i._)`${r.scopeValue("wrapper",{ref:t})}.validate`}function c(e,t,r,s){let{gen:a,it:u}=e,{allErrors:c,schemaEnv:d,opts:p}=u,f=p.passContext?n.default.this:i.nil;function h(e){let t=(0,i._)`${e}.errors`;a.assign(n.default.vErrors,(0,i._)`${n.default.vErrors} === null ? ${t} : ${n.default.vErrors}.concat(${t})`),a.assign(n.default.errors,(0,i._)`${n.default.vErrors}.length`)}function m(e){var t;if(!u.opts.unevaluated)return;let s=null==(t=null==r?void 0:r.validate)?void 0:t.evaluated;if(!0!==u.props)if(s&&!s.dynamicProps)void 0!==s.props&&(u.props=l.mergeEvaluated.props(a,s.props,u.props));else{let t=a.var("props",(0,i._)`${e}.evaluated.props`);u.props=l.mergeEvaluated.props(a,t,u.props,i.Name)}if(!0!==u.items)if(s&&!s.dynamicItems)void 0!==s.items&&(u.items=l.mergeEvaluated.items(a,s.items,u.items));else{let t=a.var("items",(0,i._)`${e}.evaluated.items`);u.items=l.mergeEvaluated.items(a,t,u.items,i.Name)}}s?function(){if(!d.$async)throw Error("async schema referenced by sync schema");let r=a.let("valid");a.try(()=>{a.code((0,i._)`await ${(0,o.callValidateCode)(e,t,f)}`),m(t),c||a.assign(r,!0)},e=>{a.if((0,i._)`!(${e} instanceof ${u.ValidationError})`,()=>a.throw(e)),h(e),c||a.assign(r,!1)}),e.ok(r)}():e.result((0,o.callValidateCode)(e,t,f),()=>m(t),()=>h(t))}t.getValidate=u,t.callRef=c,t.default={keyword:"$ref",schemaType:"string",code(e){var t,r;let o,n,l,d,{gen:p,schema:f,it:h}=e,{baseId:m,schemaEnv:y,validateName:v,opts:g,self:_}=h,{root:$}=y;if(("#"===f||"#/"===f)&&m===$.baseId){if(y===$)return c(e,v,y,y.$async);let t=p.scopeValue("root",{ref:$});return c(e,(0,i._)`${t}.validate`,$,$.$async)}let w=a.resolveRef.call(_,$,m,f);if(void 0===w)throw new s.default(h.opts.uriResolver,m,f);return w instanceof a.SchemaEnv?(o=u(e,t=w),void c(e,o,t,t.$async)):(r=w,n=p.scopeValue("schema",!0===g.code.source?{ref:r,code:(0,i.stringify)(r)}:{ref:r}),l=p.name("valid"),d=e.subschema({schema:r,dataTypes:[],schemaPath:i.nil,topSchemaRef:n,errSchemaPath:f},l),void(e.mergeEvaluated(d),e.ok(l)))}}},2278(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let s=r(6556),o=r(1403),i=r(9198),n=r(218),a=r(8512);t.default={keyword:"discriminator",type:"object",schemaType:"object",error:{message:({params:{discrError:e,tagName:t}})=>e===o.DiscrError.Tag?`tag "${t}" must be string`:`value of tag "${t}" must be in oneOf`,params:({params:{discrError:e,tag:t,tagName:r}})=>(0,s._)`{error: ${e}, tag: ${r}, tagValue: ${t}}`},code(e){let{gen:t,data:r,schema:l,parentSchema:u,it:c}=e,{oneOf:d}=u;if(!c.opts.discriminator)throw Error("discriminator: requires discriminator option");let p=l.propertyName;if("string"!=typeof p)throw Error("discriminator: requires propertyName");if(l.mapping)throw Error("discriminator: mapping is not supported");if(!d)throw Error("discriminator: requires oneOf keyword");let f=t.let("valid",!1),h=t.const("tag",(0,s._)`${r}${(0,s.getProperty)(p)}`);t.if((0,s._)`typeof ${h} == "string"`,()=>(function(){let r=function(){var e;let t={},r=o(u),s=!0;for(let t=0;t<d.length;t++){let u=d[t];if((null==u?void 0:u.$ref)&&!(0,a.schemaHasRulesButRef)(u,c.self.RULES)){let e=u.$ref;if((u=i.resolveRef.call(c.self,c.schemaEnv.root,c.baseId,e))instanceof i.SchemaEnv&&(u=u.schema),void 0===u)throw new n.default(c.opts.uriResolver,c.baseId,e)}let f=null==(e=null==u?void 0:u.properties)?void 0:e[p];if("object"!=typeof f)throw Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${p}"`);s=s&&(r||o(u)),function(e,t){if(e.const)l(e.const,t);else if(e.enum)for(let r of e.enum)l(r,t);else throw Error(`discriminator: "properties/${p}" must have "const" or "enum"`)}(f,t)}if(!s)throw Error(`discriminator: "${p}" must be required`);return t;function o({required:e}){return Array.isArray(e)&&e.includes(p)}function l(e,r){if("string"!=typeof e||e in t)throw Error(`discriminator: "${p}" values must be unique strings`);t[e]=r}}();for(let o in t.if(!1),r)t.elseIf((0,s._)`${h} === ${o}`),t.assign(f,function(r){let o=t.name("valid"),i=e.subschema({keyword:"oneOf",schemaProp:r},o);return e.mergeEvaluated(i,s.Name),o}(r[o]));t.else(),e.error(!1,{discrError:o.DiscrError.Mapping,tag:h,tagName:p}),t.endIf()})(),()=>e.error(!1,{discrError:o.DiscrError.Tag,tag:h,tagName:p})),e.ok(f)}}},1403(e,t){"use strict";var r,s;Object.defineProperty(t,"__esModule",{value:!0}),t.DiscrError=void 0,(s=r||(t.DiscrError=r={})).Tag="tag",s.Mapping="mapping"},8181(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let s=r(5861),o=r(4057),i=r(3591),n=r(9961),a=r(6780);t.default=[s.default,o.default,(0,i.default)(),n.default,a.metadataVocabulary,a.contentVocabulary]},2898(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let s=r(6556);t.default={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:{message:({schemaCode:e})=>(0,s.str)`must match format "${e}"`,params:({schemaCode:e})=>(0,s._)`{format: ${e}}`},code(e,t){let r,o,i,n,a,l,{gen:u,data:c,$data:d,schema:p,schemaCode:f,it:h}=e,{opts:m,errSchemaPath:y,schemaEnv:v,self:g}=h;m.validateFormats&&(d?(r=u.scopeValue("formats",{ref:g.formats,code:m.code.formats}),o=u.const("fDef",(0,s._)`${r}[${f}]`),i=u.let("fType"),n=u.let("format"),u.if((0,s._)`typeof ${o} == "object" && !(${o} instanceof RegExp)`,()=>u.assign(i,(0,s._)`${o}.type || "string"`).assign(n,(0,s._)`${o}.validate`),()=>u.assign(i,(0,s._)`"string"`).assign(n,o)),e.fail$data((0,s.or)(!1===m.strictSchema?s.nil:(0,s._)`${f} && !${n}`,(a=v.$async?(0,s._)`(${o}.async ? await ${n}(${c}) : ${n}(${c}))`:(0,s._)`${n}(${c})`,l=(0,s._)`(typeof ${n} == "function" ? ${a} : ${n}.test(${c}))`,(0,s._)`${n} && ${n} !== true && ${i} === ${t} && !${l}`)))):function(){var r;let o,i,n=g.formats[p];if(!n){if(!1===m.strictSchema)return g.logger.warn(a());throw Error(a());function a(){return`unknown format "${p}" ignored in schema at path "${y}"`}}if(!0===n)return;let[l,d,f]=(o=(r=n)instanceof RegExp?(0,s.regexpCode)(r):m.code.formats?(0,s._)`${m.code.formats}${(0,s.getProperty)(p)}`:void 0,i=u.scopeValue("formats",{key:p,ref:r,code:o}),"object"!=typeof r||r instanceof RegExp?["string",r,i]:[r.type||"string",r.validate,(0,s._)`${i}.validate`]);l===t&&e.pass(function(){if("object"==typeof n&&!(n instanceof RegExp)&&n.async){if(!v.$async)throw Error("async format in sync schema");return(0,s._)`await ${f}(${c})`}return"function"==typeof d?(0,s._)`${f}(${c})`:(0,s._)`${f}.test(${c})`}())}())}}},9961(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=[r(2898).default]},6780(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.contentVocabulary=t.metadataVocabulary=void 0,t.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"],t.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"]},8762(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let s=r(6556),o=r(8512),i=r(6935);t.default={keyword:"const",$data:!0,error:{message:"must be equal to constant",params:({schemaCode:e})=>(0,s._)`{allowedValue: ${e}}`},code(e){let{gen:t,data:r,$data:n,schemaCode:a,schema:l}=e;n||l&&"object"==typeof l?e.fail$data((0,s._)`!${(0,o.useFunc)(t,i.default)}(${r}, ${a})`):e.fail((0,s._)`${l} !== ${r}`)}}},5344(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let s=r(6556),o=r(8512),i=r(6935);t.default={keyword:"enum",schemaType:"array",$data:!0,error:{message:"must be equal to one of the allowed values",params:({schemaCode:e})=>(0,s._)`{allowedValues: ${e}}`},code(e){let t,r,{gen:n,data:a,$data:l,schema:u,schemaCode:c,it:d}=e;if(!l&&0===u.length)throw Error("enum must have non-empty array");let p=u.length>=d.opts.loopEnum,f=()=>null!=t?t:t=(0,o.useFunc)(n,i.default);if(p||l)r=n.let("valid"),e.block$data(r,function(){n.assign(r,!1),n.forOf("v",c,e=>n.if((0,s._)`${f()}(${a}, ${e})`,()=>n.assign(r,!0).break()))});else{if(!Array.isArray(u))throw Error("ajv implementation error");let e=n.const("vSchema",c);r=(0,s.or)(...u.map((t,r)=>{var o,i;let n;return o=e,"object"==typeof(n=u[i=r])&&null!==n?(0,s._)`${f()}(${a}, ${o}[${i}])`:(0,s._)`${a} === ${n}`}))}e.pass(r)}}},4057(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let s=r(5579),o=r(9812),i=r(1378),n=r(647),a=r(8079),l=r(9240),u=r(1128),c=r(1628),d=r(8762),p=r(5344);t.default=[s.default,o.default,i.default,n.default,a.default,l.default,u.default,c.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},d.default,p.default]},1128(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let s=r(6556);t.default={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:{message:({keyword:e,schemaCode:t})=>(0,s.str)`must NOT have ${"maxItems"===e?"more":"fewer"} than ${t} items`,params:({schemaCode:e})=>(0,s._)`{limit: ${e}}`},code(e){let{keyword:t,data:r,schemaCode:o}=e,i="maxItems"===t?s.operators.GT:s.operators.LT;e.fail$data((0,s._)`${r}.length ${i} ${o}`)}}},1378(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let s=r(6556),o=r(8512),i=r(5014);t.default={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:{message:({keyword:e,schemaCode:t})=>(0,s.str)`must NOT have ${"maxLength"===e?"more":"fewer"} than ${t} characters`,params:({schemaCode:e})=>(0,s._)`{limit: ${e}}`},code(e){let{keyword:t,data:r,schemaCode:n,it:a}=e,l="maxLength"===t?s.operators.GT:s.operators.LT,u=!1===a.opts.unicode?(0,s._)`${r}.length`:(0,s._)`${(0,o.useFunc)(e.gen,i.default)}(${r})`;e.fail$data((0,s._)`${u} ${l} ${n}`)}}},5579(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let s=r(6556),o=s.operators,i={maximum:{okStr:"<=",ok:o.LTE,fail:o.GT},minimum:{okStr:">=",ok:o.GTE,fail:o.LT},exclusiveMaximum:{okStr:"<",ok:o.LT,fail:o.GTE},exclusiveMinimum:{okStr:">",ok:o.GT,fail:o.LTE}};t.default={keyword:Object.keys(i),type:"number",schemaType:"number",$data:!0,error:{message:({keyword:e,schemaCode:t})=>(0,s.str)`must be ${i[e].okStr} ${t}`,params:({keyword:e,schemaCode:t})=>(0,s._)`{comparison: ${i[e].okStr}, limit: ${t}}`},code(e){let{keyword:t,data:r,schemaCode:o}=e;e.fail$data((0,s._)`${r} ${i[t].fail} ${o} || isNaN(${r})`)}}},8079(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let s=r(6556);t.default={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:{message:({keyword:e,schemaCode:t})=>(0,s.str)`must NOT have ${"maxProperties"===e?"more":"fewer"} than ${t} properties`,params:({schemaCode:e})=>(0,s._)`{limit: ${e}}`},code(e){let{keyword:t,data:r,schemaCode:o}=e,i="maxProperties"===t?s.operators.GT:s.operators.LT;e.fail$data((0,s._)`Object.keys(${r}).length ${i} ${o}`)}}},9812(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let s=r(6556);t.default={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:{message:({schemaCode:e})=>(0,s.str)`must be multiple of ${e}`,params:({schemaCode:e})=>(0,s._)`{multipleOf: ${e}}`},code(e){let{gen:t,data:r,schemaCode:o,it:i}=e,n=i.opts.multipleOfPrecision,a=t.let("res"),l=n?(0,s._)`Math.abs(Math.round(${a}) - ${a}) > 1e-${n}`:(0,s._)`${a} !== parseInt(${a})`;e.fail$data((0,s._)`(${o} === 0 || (${a} = ${r}/${o}, ${l}))`)}}},647(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let s=r(3716),o=r(6556);t.default={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:{message:({schemaCode:e})=>(0,o.str)`must match pattern "${e}"`,params:({schemaCode:e})=>(0,o._)`{pattern: ${e}}`},code(e){let{data:t,$data:r,schema:i,schemaCode:n,it:a}=e,l=a.opts.unicodeRegExp?"u":"",u=r?(0,o._)`(new RegExp(${n}, ${l}))`:(0,s.usePattern)(e,i);e.fail$data((0,o._)`!${u}.test(${t})`)}}},9240(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let s=r(3716),o=r(6556),i=r(8512);t.default={keyword:"required",type:"object",schemaType:"array",$data:!0,error:{message:({params:{missingProperty:e}})=>(0,o.str)`must have required property '${e}'`,params:({params:{missingProperty:e}})=>(0,o._)`{missingProperty: ${e}}`},code(e){let{gen:t,schema:r,schemaCode:n,data:a,$data:l,it:u}=e,{opts:c}=u;if(!l&&0===r.length)return;let d=r.length>=c.loopRequired;if(u.allErrors?function(){if(d||l)e.block$data(o.nil,p);else for(let t of r)(0,s.checkReportMissingProp)(e,t)}():function(){let i=t.let("missing");if(d||l){let r=t.let("valid",!0);e.block$data(r,()=>{var l,u;return l=i,u=r,void(e.setParams({missingProperty:l}),t.forOf(l,n,()=>{t.assign(u,(0,s.propertyInData)(t,a,l,c.ownProperties)),t.if((0,o.not)(u),()=>{e.error(),t.break()})},o.nil))}),e.ok(r)}else t.if((0,s.checkMissingProp)(e,r,i)),(0,s.reportMissingProp)(e,i),t.else()}(),c.strictRequired){let t=e.parentSchema.properties,{definedProperties:s}=e.it;for(let e of r)if((null==t?void 0:t[e])===void 0&&!s.has(e)){let t=u.schemaEnv.baseId+u.errSchemaPath,r=`required property "${e}" is not defined at "${t}" (strictRequired)`;(0,i.checkStrictMode)(u,r,u.opts.strictRequired)}}function p(){t.forOf("prop",n,r=>{e.setParams({missingProperty:r}),t.if((0,s.noPropertyInData)(t,a,r,c.ownProperties),()=>e.error())})}}}},1628(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let s=r(4029),o=r(6556),i=r(8512),n=r(6935);t.default={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:{message:({params:{i:e,j:t}})=>(0,o.str)`must NOT have duplicate items (items ## ${t} and ${e} are identical)`,params:({params:{i:e,j:t}})=>(0,o._)`{i: ${e}, j: ${t}}`},code(e){let{gen:t,data:r,$data:a,schema:l,parentSchema:u,schemaCode:c,it:d}=e;if(!a&&!l)return;let p=t.let("valid"),f=u.items?(0,s.getSchemaTypes)(u.items):[];e.block$data(p,function(){let a=t.let("i",(0,o._)`${r}.length`),l=t.let("j");e.setParams({i:a,j:l}),t.assign(p,!0),t.if((0,o._)`${a} > 1`,()=>(f.length>0&&!f.some(e=>"object"===e||"array"===e)?function(i,n){let a=t.name("item"),l=(0,s.checkDataTypes)(f,a,d.opts.strictNumbers,s.DataType.Wrong),u=t.const("indices",(0,o._)`{}`);t.for((0,o._)`;${i}--;`,()=>{t.let(a,(0,o._)`${r}[${i}]`),t.if(l,(0,o._)`continue`),f.length>1&&t.if((0,o._)`typeof ${a} == "string"`,(0,o._)`${a} += "_"`),t.if((0,o._)`typeof ${u}[${a}] == "number"`,()=>{t.assign(n,(0,o._)`${u}[${a}]`),e.error(),t.assign(p,!1).break()}).code((0,o._)`${u}[${a}] = ${i}`)})}:function(s,a){let l=(0,i.useFunc)(t,n.default),u=t.name("outer");t.label(u).for((0,o._)`;${s}--;`,()=>t.for((0,o._)`${a} = ${s}; ${a}--;`,()=>t.if((0,o._)`${l}(${r}[${s}], ${r}[${a}])`,()=>{e.error(),t.assign(p,!1).break(u)})))})(a,l))},(0,o._)`${c} === false`),e.ok(p)}}},9454(e,t,r){"use strict";var s=r(181).Buffer,o=r(181).SlowBuffer;function i(e,t){if(!s.isBuffer(e)||!s.isBuffer(t)||e.length!==t.length)return!1;for(var r=0,o=0;o<e.length;o++)r|=e[o]^t[o];return 0===r}e.exports=i,i.install=function(){s.prototype.equal=o.prototype.equal=function(e){return i(this,e)}};var n=s.prototype.equal,a=o.prototype.equal;i.restore=function(){s.prototype.equal=n,o.prototype.equal=a}},6507(e,t,r){"use strict";let s=r(5317),o=r(8388),i=r(442);function n(e,t,r){let n=o(e,t,r),a=s.spawn(n.command,n.args,n.options);return i.hookChildProcess(a,n),a}e.exports=n,e.exports.spawn=n,e.exports.sync=function(e,t,r){let n=o(e,t,r),a=s.spawnSync(n.command,n.args,n.options);return a.error=a.error||i.verifyENOENTSync(a.status,n),a},e.exports._parse=o,e.exports._enoent=i},442(e){"use strict";let t="win32"===process.platform;function r(e,t){return Object.assign(Error(`${t} ${e.command} ENOENT`),{code:"ENOENT",errno:"ENOENT",syscall:`${t} ${e.command}`,path:e.command,spawnargs:e.args})}function s(e,s){return t&&1===e&&!s.file?r(s.original,"spawn"):null}e.exports={hookChildProcess:function(e,r){if(!t)return;let o=e.emit;e.emit=function(t,i){if("exit"===t){let t=s(i,r);if(t)return o.call(e,"error",t)}return o.apply(e,arguments)}},verifyENOENT:s,verifyENOENTSync:function(e,s){return t&&1===e&&!s.file?r(s.original,"spawnSync"):null},notFoundError:r}},8388(e,t,r){"use strict";let s=r(6928),o=r(3803),i=r(2077),n=r(1880),a="win32"===process.platform,l=/\.(?:com|exe)$/i,u=/node_modules[\\/].bin[\\/][^\\/]+\.cmd$/i;e.exports=function(e,t,r){t&&!Array.isArray(t)&&(r=t,t=null);let c={command:e,args:t=t?t.slice(0):[],options:r=Object.assign({},r),file:void 0,original:{command:e,args:t}};return r.shell?c:function(e){let t;if(!a)return e;let r=(e.file=o(e),(t=e.file&&n(e.file))?(e.args.unshift(e.file),e.command=t,o(e)):e.file),c=!l.test(r);if(e.options.forceShell||c){let t=u.test(r);e.command=s.normalize(e.command),e.command=i.command(e.command),e.args=e.args.map(e=>i.argument(e,t));let o=[e.command].concat(e.args).join(" ");e.args=["/d","/s","/c",`"${o}"`],e.command=process.env.comspec||"cmd.exe",e.options.windowsVerbatimArguments=!0}return e}(c)}},2077(e){"use strict";let t=/([()\][%!^"`<>&|;, *?])/g;e.exports.command=function(e){return e.replace(t,"^$1")},e.exports.argument=function(e,r){return e=(e=(e=`${e}`).replace(/(?=(\\+?)?)\1"/g,'$1$1\\"')).replace(/(?=(\\+?)?)\1$/,"$1$1"),e=(e=`"${e}"`).replace(t,"^$1"),r&&(e=e.replace(t,"^$1")),e}},1880(e,t,r){"use strict";let s=r(9896),o=r(600);e.exports=function(e){let t,r=Buffer.alloc(150);try{t=s.openSync(e,"r"),s.readSync(t,r,0,150,0),s.closeSync(t)}catch(e){}return o(r.toString())}},3803(e,t,r){"use strict";let s=r(6928),o=r(1905),i=r(9695);function n(e,t){let r,n=e.options.env||process.env,a=process.cwd(),l=null!=e.options.cwd,u=l&&void 0!==process.chdir&&!process.chdir.disabled;if(u)try{process.chdir(e.options.cwd)}catch(e){}try{r=o.sync(e.command,{path:n[i({env:n})],pathExt:t?s.delimiter:void 0})}catch(e){}finally{u&&process.chdir(a)}return r&&(r=s.resolve(l?e.options.cwd:"",r)),r}e.exports=function(e){return n(e)||n(e,!0)}},8583(e,t,r){let s=r(9896),o=r(6928),i=r(857),n=r(6982),a=r(4519).version,l=/(?:^|^)\s*(?:export\s+)?([\w.-]+)(?:\s*=\s*?|:\s+?)(\s*'(?:\\'|[^'])*'|\s*"(?:\\"|[^"])*"|\s*`(?:\\`|[^`])*`|[^#\r\n]+)?\s*(?:#.*)?(?:$|$)/mg;function u(e){console.log(`[dotenv@${a}][DEBUG] ${e}`)}function c(e){console.log(`[dotenv@${a}] ${e}`)}function d(e){return e&&e.DOTENV_KEY&&e.DOTENV_KEY.length>0?e.DOTENV_KEY:process.env.DOTENV_KEY&&process.env.DOTENV_KEY.length>0?process.env.DOTENV_KEY:""}function p(e){let t=null;if(e&&e.path&&e.path.length>0)if(Array.isArray(e.path))for(let r of e.path)s.existsSync(r)&&(t=r.endsWith(".vault")?r:`${r}.vault`);else t=e.path.endsWith(".vault")?e.path:`${e.path}.vault`;else t=o.resolve(process.cwd(),".env.vault");return s.existsSync(t)?t:null}function f(e){return"~"===e[0]?o.join(i.homedir(),e.slice(1)):e}let h={configDotenv:function(e){let t,r=o.resolve(process.cwd(),".env"),i="utf8",n=!!(e&&e.debug),a=!e||!("quiet"in e)||e.quiet;e&&e.encoding?i=e.encoding:n&&u("No encoding is specified. UTF-8 is used by default");let l=[r];if(e&&e.path)if(Array.isArray(e.path))for(let t of(l=[],e.path))l.push(f(t));else l=[f(e.path)];let d={};for(let r of l)try{let t=h.parse(s.readFileSync(r,{encoding:i}));h.populate(d,t,e)}catch(e){n&&u(`Failed to load ${r} ${e.message}`),t=e}let p=process.env;if(e&&null!=e.processEnv&&(p=e.processEnv),h.populate(p,d,e),n||!a){let e=Object.keys(d).length,r=[];for(let e of l)try{let t=o.relative(process.cwd(),e);r.push(t)}catch(r){n&&u(`Failed to load ${e} ${r.message}`),t=r}c(`injecting env (${e}) from ${r.join(",")}`)}return t?{parsed:d,error:t}:{parsed:d}},_configVault:function(e){let t=!!(e&&e.debug),r=!e||!("quiet"in e)||e.quiet;(t||!r)&&c("Loading env from encrypted .env.vault");let s=h._parseVault(e),o=process.env;return e&&null!=e.processEnv&&(o=e.processEnv),h.populate(o,s,e),{parsed:s}},_parseVault:function(e){let t,r=p(e=e||{});e.path=r;let s=h.configDotenv(e);if(!s.parsed){let e=Error(`MISSING_DATA: Cannot parse ${r} for an unknown reason`);throw e.code="MISSING_DATA",e}let o=d(e).split(","),i=o.length;for(let e=0;e<i;e++)try{let r=o[e].trim(),i=function(e,t){let r;try{r=new URL(t)}catch(e){if("ERR_INVALID_URL"===e.code){let e=Error("INVALID_DOTENV_KEY: Wrong format. Must be in valid uri format like dotenv://:key_1234@dotenvx.com/vault/.env.vault?environment=development");throw e.code="INVALID_DOTENV_KEY",e}throw e}let s=r.password;if(!s){let e=Error("INVALID_DOTENV_KEY: Missing key part");throw e.code="INVALID_DOTENV_KEY",e}let o=r.searchParams.get("environment");if(!o){let e=Error("INVALID_DOTENV_KEY: Missing environment part");throw e.code="INVALID_DOTENV_KEY",e}let i=`DOTENV_VAULT_${o.toUpperCase()}`,n=e.parsed[i];if(!n){let e=Error(`NOT_FOUND_DOTENV_ENVIRONMENT: Cannot locate environment ${i} in your .env.vault file.`);throw e.code="NOT_FOUND_DOTENV_ENVIRONMENT",e}return{ciphertext:n,key:s}}(s,r);t=h.decrypt(i.ciphertext,i.key);break}catch(t){if(e+1>=i)throw t}return h.parse(t)},config:function(e){if(0===d(e).length)return h.configDotenv(e);let t=p(e);if(!t){var r;return r=`You set DOTENV_KEY but you are missing a .env.vault file at ${t}. Did you forget to build it?`,console.log(`[dotenv@${a}][WARN] ${r}`),h.configDotenv(e)}return h._configVault(e)},decrypt:function(e,t){let r=Buffer.from(t.slice(-64),"hex"),s=Buffer.from(e,"base64"),o=s.subarray(0,12),i=s.subarray(-16);s=s.subarray(12,-16);try{let e=n.createDecipheriv("aes-256-gcm",r,o);return e.setAuthTag(i),`${e.update(s)}${e.final()}`}catch(s){let e=s instanceof RangeError,t="Invalid key length"===s.message,r="Unsupported state or unable to authenticate data"===s.message;if(e||t){let e=Error("INVALID_DOTENV_KEY: It must be 64 characters long (or more)");throw e.code="INVALID_DOTENV_KEY",e}if(r){let e=Error("DECRYPTION_FAILED: Please check your DOTENV_KEY");throw e.code="DECRYPTION_FAILED",e}throw s}},parse:function(e){let t,r={},s=e.toString();for(s=s.replace(/\r\n?/mg,"\n");null!=(t=l.exec(s));){let e=t[1],s=t[2]||"",o=(s=s.trim())[0];s=s.replace(/^(['"`])([\s\S]*)\1$/mg,"$2"),'"'===o&&(s=(s=s.replace(/\\n/g,"\n")).replace(/\\r/g,"\r")),r[e]=s}return r},populate:function(e,t,r={}){let s=!!(r&&r.debug),o=!!(r&&r.override);if("object"!=typeof t){let e=Error("OBJECT_REQUIRED: Please check the processEnv argument being passed to populate");throw e.code="OBJECT_REQUIRED",e}for(let r of Object.keys(t))Object.prototype.hasOwnProperty.call(e,r)?(!0===o&&(e[r]=t[r]),s&&(!0===o?u(`"${r}" is already defined and WAS overwritten`):u(`"${r}" is already defined and was NOT overwritten`))):e[r]=t[r]}};e.exports.configDotenv=h.configDotenv,e.exports._configVault=h._configVault,e.exports._parseVault=h._parseVault,e.exports.config=h.config,e.exports.decrypt=h.decrypt,e.exports.parse=h.parse,e.exports.populate=h.populate,e.exports=h},9053(e,t,r){"use strict";var s=r(6608).Buffer,o=r(2188);function i(e){if(s.isBuffer(e))return e;if("string"==typeof e)return s.from(e,"base64");throw TypeError("ECDSA signature must be a Base64 string or a Buffer")}function n(e,t,r){for(var s=0;t+s<r&&0===e[t+s];)++s;return e[t+s]>=128&&--s,s}e.exports={derToJose:function(e,t){e=i(e);var r=o(t),n=r+1,a=e.length,l=0;if(48!==e[l++])throw Error('Could not find expected "seq"');var u=e[l++];if(129===u&&(u=e[l++]),a-l<u)throw Error('"seq" specified length of "'+u+'", only "'+(a-l)+'" remaining');if(2!==e[l++])throw Error('Could not find expected "int" for "r"');var c=e[l++];if(a-l-2<c)throw Error('"r" specified length of "'+c+'", only "'+(a-l-2)+'" available');if(n<c)throw Error('"r" specified length of "'+c+'", max of "'+n+'" is acceptable');var d=l;if(l+=c,2!==e[l++])throw Error('Could not find expected "int" for "s"');var p=e[l++];if(a-l!==p)throw Error('"s" specified length of "'+p+'", expected "'+(a-l)+'"');if(n<p)throw Error('"s" specified length of "'+p+'", max of "'+n+'" is acceptable');var f=l;if((l+=p)!==a)throw Error('Expected to consume entire buffer, but "'+(a-l)+'" bytes remain');var h=r-c,m=r-p,y=s.allocUnsafe(h+c+m+p);for(l=0;l<h;++l)y[l]=0;e.copy(y,l,d+Math.max(-h,0),d+c),l=r;for(var v=l;l<v+m;++l)y[l]=0;return e.copy(y,l,f+Math.max(-m,0),f+p),y=(y=y.toString("base64")).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")},joseToDer:function(e,t){e=i(e);var r=o(t),a=e.length;if(a!==2*r)throw TypeError('"'+t+'" signatures must be "'+2*r+'" bytes, saw "'+a+'"');var l=n(e,0,r),u=n(e,r,e.length),c=r-l,d=r-u,p=2+c+1+1+d,f=p<128,h=s.allocUnsafe((f?2:3)+p),m=0;return h[m++]=48,f?h[m++]=p:(h[m++]=129,h[m++]=255&p),h[m++]=2,h[m++]=c,l<0?(h[m++]=0,m+=e.copy(h,m,0,r)):m+=e.copy(h,m,l,r),h[m++]=2,h[m++]=d,u<0?(h[m++]=0,e.copy(h,m,r)):e.copy(h,m,r+u),h}}},2188(e){"use strict";function t(e){return(e/8|0)+ +(e%8!=0)}var r={ES256:t(256),ES384:t(384),ES512:t(521)};e.exports=function(e){var t=r[e];if(t)return t;throw Error('Unknown algorithm "'+e+'"')}},7371(e){"use strict";e.exports=function e(t,r){if(t===r)return!0;if(t&&r&&"object"==typeof t&&"object"==typeof r){if(t.constructor!==r.constructor)return!1;if(Array.isArray(t)){if((s=t.length)!=r.length)return!1;for(o=s;0!=o--;)if(!e(t[o],r[o]))return!1;return!0}if(t.constructor===RegExp)return t.source===r.source&&t.flags===r.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===r.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===r.toString();if((s=(i=Object.keys(t)).length)!==Object.keys(r).length)return!1;for(o=s;0!=o--;)if(!Object.prototype.hasOwnProperty.call(r,i[o]))return!1;for(o=s;0!=o--;){var s,o,i,n=i[o];if(!e(t[n],r[n]))return!1}return!0}return t!=t&&r!=r}},9344(e,t,r){var s;function o(e,t,r){if("function"==typeof t&&(r=t,t={}),!r){if("function"!=typeof Promise)throw TypeError("callback not provided");return new Promise(function(r,s){o(e,t||{},function(e,t){e?s(e):r(t)})})}s(e,t||{},function(e,s){e&&("EACCES"===e.code||t&&t.ignoreErrors)&&(e=null,s=!1),r(e,s)})}r(9896),s="win32"===process.platform||global.TESTING_WINDOWS?r(8541):r(709),e.exports=o,o.sync=function(e,t){try{return s.sync(e,t||{})}catch(e){if(t&&t.ignoreErrors||"EACCES"===e.code)return!1;throw e}}},709(e,t,r){e.exports=o,o.sync=function(e,t){return i(s.statSync(e),t)};var s=r(9896);function o(e,t,r){s.stat(e,function(e,s){r(e,!e&&i(s,t))})}function i(e,t){var r,s,o,i,n,a,l,u,c;return e.isFile()&&(r=e,s=t,o=r.mode,i=r.uid,n=r.gid,a=void 0!==s.uid?s.uid:process.getuid&&process.getuid(),l=void 0!==s.gid?s.gid:process.getgid&&process.getgid(),u=parseInt("100",8),c=parseInt("010",8),o&parseInt("001",8)||o&c&&n===l||o&u&&i===a||o&(u|c)&&0===a)}},8541(e,t,r){e.exports=i,i.sync=function(e,t){return o(s.statSync(e),e,t)};var s=r(9896);function o(e,t,r){if(!e.isSymbolicLink()&&!e.isFile())return!1;var s=void 0!==r.pathExt?r.pathExt:process.env.PATHEXT;if(!s||-1!==(s=s.split(";")).indexOf(""))return!0;for(var o=0;o<s.length;o++){var i=s[o].toLowerCase();if(i&&t.substr(-i.length).toLowerCase()===i)return!0}return!1}function i(e,t,r){s.stat(e,function(s,i){r(s,!s&&o(i,e,t))})}},205(e){"use strict";var t=e.exports=function(e,r,s){"function"==typeof r&&(s=r,r={});var o="function"==typeof(s=r.cb||s)?s:s.pre||function(){};!function e(r,s,o,i,n,a,l,u,c,d){if(i&&"object"==typeof i&&!Array.isArray(i)){for(var p in s(i,n,a,l,u,c,d),i){var f=i[p];if(Array.isArray(f)){if(p in t.arrayKeywords)for(var h=0;h<f.length;h++)e(r,s,o,f[h],n+"/"+p+"/"+h,a,n,p,i,h)}else if(p in t.propsKeywords){if(f&&"object"==typeof f)for(var m in f)e(r,s,o,f[m],n+"/"+p+"/"+m.replace(/~/g,"~0").replace(/\//g,"~1"),a,n,p,i,m)}else(p in t.keywords||r.allKeys&&!(p in t.skipKeywords))&&e(r,s,o,f,n+"/"+p,a,n,p,i)}o(i,n,a,l,u,c,d)}}(r,o,s.post||function(){},e,"",e)};t.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0},t.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0},t.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0},t.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0}},2548(e,t,r){var s=r(3263);e.exports=function(e,t){t=t||{};var r=s.decode(e,t);if(!r)return null;var o=r.payload;if("string"==typeof o)try{var i=JSON.parse(o);null!==i&&"object"==typeof i&&(o=i)}catch(e){}return!0===t.complete?{header:r.header,payload:o,signature:r.signature}:o}},8400(e,t,r){e.exports={decode:r(2548),verify:r(6467),sign:r(9147),JsonWebTokenError:r(1957),NotBeforeError:r(4470),TokenExpiredError:r(7788)}},1957(e){var t=function(e,t){Error.call(this,e),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor),this.name="JsonWebTokenError",this.message=e,t&&(this.inner=t)};t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,e.exports=t},4470(e,t,r){var s=r(1957),o=function(e,t){s.call(this,e),this.name="NotBeforeError",this.date=t};o.prototype=Object.create(s.prototype),o.prototype.constructor=o,e.exports=o},7788(e,t,r){var s=r(1957),o=function(e,t){s.call(this,e),this.name="TokenExpiredError",this.expiredAt=t};o.prototype=Object.create(s.prototype),o.prototype.constructor=o,e.exports=o},5841(e,t,r){e.exports=r(3895).satisfies(process.version,">=15.7.0")},953(e,t,r){e.exports=r(3895).satisfies(process.version,"^6.12.0 || >=8.0.0")},455(e,t,r){e.exports=r(3895).satisfies(process.version,">=16.9.0")},4559(e,t,r){var s=r(3866);e.exports=function(e,t){var r=t||Math.floor(Date.now()/1e3);if("string"==typeof e){var o=s(e);if(void 0===o)return;return Math.floor(r+o/1e3)}if("number"==typeof e)return r+e}},723(e,t,r){let s=r(5841),o=r(455),i={ec:["ES256","ES384","ES512"],rsa:["RS256","PS256","RS384","PS384","RS512","PS512"],"rsa-pss":["PS256","PS384","PS512"]},n={ES256:"prime256v1",ES384:"secp384r1",ES512:"secp521r1"};e.exports=function(e,t){if(!e||!t)return;let r=t.asymmetricKeyType;if(!r)return;let a=i[r];if(!a)throw Error(`Unknown key type "${r}".`);if(!a.includes(e))throw Error(`"alg" parameter for "${r}" key type must be one of: ${a.join(", ")}.`);if(s)switch(r){case"ec":let l=t.asymmetricKeyDetails.namedCurve,u=n[e];if(l!==u)throw Error(`"alg" parameter "${e}" requires curve "${u}".`);break;case"rsa-pss":if(o){let r=parseInt(e.slice(-3),10),{hashAlgorithm:s,mgf1HashAlgorithm:o,saltLength:i}=t.asymmetricKeyDetails;if(s!==`sha${r}`||o!==s)throw Error(`Invalid key for this operation, its RSA-PSS parameters do not meet the requirements of "alg" ${e}.`);if(void 0!==i&&i>r>>3)throw Error(`Invalid key for this operation, its RSA-PSS parameter saltLength does not meet the requirements of "alg" ${e}.`)}}}},9147(e,t,r){let s=r(4559),o=r(953),i=r(723),n=r(3263),a=r(5357),l=r(6782),u=r(5250),c=r(8094),d=r(6052),p=r(1251),f=r(8430),{KeyObject:h,createSecretKey:m,createPrivateKey:y}=r(6982),v=["RS256","RS384","RS512","ES256","ES384","ES512","HS256","HS384","HS512","none"];o&&v.splice(3,0,"PS256","PS384","PS512");let g={expiresIn:{isValid:function(e){return u(e)||p(e)&&e},message:'"expiresIn" should be a number of seconds or string representing a timespan'},notBefore:{isValid:function(e){return u(e)||p(e)&&e},message:'"notBefore" should be a number of seconds or string representing a timespan'},audience:{isValid:function(e){return p(e)||Array.isArray(e)},message:'"audience" must be a string or array'},algorithm:{isValid:a.bind(null,v),message:'"algorithm" must be a valid string enum value'},header:{isValid:d,message:'"header" must be an object'},encoding:{isValid:p,message:'"encoding" must be a string'},issuer:{isValid:p,message:'"issuer" must be a string'},subject:{isValid:p,message:'"subject" must be a string'},jwtid:{isValid:p,message:'"jwtid" must be a string'},noTimestamp:{isValid:l,message:'"noTimestamp" must be a boolean'},keyid:{isValid:p,message:'"keyid" must be a string'},mutatePayload:{isValid:l,message:'"mutatePayload" must be a boolean'},allowInsecureKeySizes:{isValid:l,message:'"allowInsecureKeySizes" must be a boolean'},allowInvalidAsymmetricKeyTypes:{isValid:l,message:'"allowInvalidAsymmetricKeyTypes" must be a boolean'}},_={iat:{isValid:c,message:'"iat" should be a number of seconds'},exp:{isValid:c,message:'"exp" should be a number of seconds'},nbf:{isValid:c,message:'"nbf" should be a number of seconds'}};function $(e,t,r,s){if(!d(r))throw Error('Expected "'+s+'" to be a plain object.');Object.keys(r).forEach(function(o){let i=e[o];if(!i){if(!t)throw Error('"'+o+'" is not allowed in "'+s+'"');return}if(!i.isValid(r[o]))throw Error(i.message)})}let w={audience:"aud",issuer:"iss",subject:"sub",jwtid:"jti"},b=["expiresIn","notBefore","noTimestamp","audience","issuer","subject","jwtid"];e.exports=function(e,t,r,o){var a,l;"function"==typeof r?(o=r,r={}):r=r||{};let u="object"==typeof e&&!Buffer.isBuffer(e),c=Object.assign({alg:r.algorithm||"HS256",typ:u?"JWT":void 0,kid:r.keyid},r.header);function d(e){if(o)return o(e);throw e}if(!t&&"none"!==r.algorithm)return d(Error("secretOrPrivateKey must have a value"));if(null!=t&&!(t instanceof h))try{t=y(t)}catch(e){try{t=m("string"==typeof t?Buffer.from(t):t)}catch(e){return d(Error("secretOrPrivateKey is not valid key material"))}}if(c.alg.startsWith("HS")&&"secret"!==t.type)return d(Error(`secretOrPrivateKey must be a symmetric key when using ${c.alg}`));if(/^(?:RS|PS|ES)/.test(c.alg)){if("private"!==t.type)return d(Error(`secretOrPrivateKey must be an asymmetric key when using ${c.alg}`));if(!r.allowInsecureKeySizes&&!c.alg.startsWith("ES")&&void 0!==t.asymmetricKeyDetails&&t.asymmetricKeyDetails.modulusLength<2048)return d(Error(`secretOrPrivateKey has a minimum key size of 2048 bits for ${c.alg}`))}if(void 0===e)return d(Error("payload is required"));if(u){try{a=e,$(_,!0,a,"payload")}catch(e){return d(e)}r.mutatePayload||(e=Object.assign({},e))}else{let t=b.filter(function(e){return void 0!==r[e]});if(t.length>0)return d(Error("invalid "+t.join(",")+" option for "+typeof e+" payload"))}if(void 0!==e.exp&&void 0!==r.expiresIn)return d(Error('Bad "options.expiresIn" option the payload already has an "exp" property.'));if(void 0!==e.nbf&&void 0!==r.notBefore)return d(Error('Bad "options.notBefore" option the payload already has an "nbf" property.'));try{l=r,$(g,!1,l,"options")}catch(e){return d(e)}if(!r.allowInvalidAsymmetricKeyTypes)try{i(c.alg,t)}catch(e){return d(e)}let p=e.iat||Math.floor(Date.now()/1e3);if(r.noTimestamp?delete e.iat:u&&(e.iat=p),void 0!==r.notBefore){try{e.nbf=s(r.notBefore,p)}catch(e){return d(e)}if(void 0===e.nbf)return d(Error('"notBefore" should be a number of seconds or string representing a timespan eg: "1d", "20h", 60'))}if(void 0!==r.expiresIn&&"object"==typeof e){try{e.exp=s(r.expiresIn,p)}catch(e){return d(e)}if(void 0===e.exp)return d(Error('"expiresIn" should be a number of seconds or string representing a timespan eg: "1d", "20h", 60'))}Object.keys(w).forEach(function(t){let s=w[t];if(void 0!==r[t]){if(void 0!==e[s])return d(Error('Bad "options.'+t+'" option. The payload already has an "'+s+'" property.'));e[s]=r[t]}});let v=r.encoding||"utf8";if("function"==typeof o)o=o&&f(o),n.createSign({header:c,privateKey:t,payload:e,encoding:v}).once("error",o).once("done",function(e){if(!r.allowInsecureKeySizes&&/^(?:RS|PS)/.test(c.alg)&&e.length<256)return o(Error(`secretOrPrivateKey has a minimum key size of 2048 bits for ${c.alg}`));o(null,e)});else{let s=n.sign({header:c,payload:e,secret:t,encoding:v});if(!r.allowInsecureKeySizes&&/^(?:RS|PS)/.test(c.alg)&&s.length<256)throw Error(`secretOrPrivateKey has a minimum key size of 2048 bits for ${c.alg}`);return s}}},6467(e,t,r){let s=r(1957),o=r(4470),i=r(7788),n=r(2548),a=r(4559),l=r(723),u=r(953),c=r(3263),{KeyObject:d,createSecretKey:p,createPublicKey:f}=r(6982),h=["RS256","RS384","RS512"],m=["ES256","ES384","ES512"],y=["RS256","RS384","RS512"],v=["HS256","HS384","HS512"];u&&(h.splice(h.length,0,"PS256","PS384","PS512"),y.splice(y.length,0,"PS256","PS384","PS512")),e.exports=function(e,t,r,u){let g,_,$;if("function"!=typeof r||u||(u=r,r={}),r||(r={}),r=Object.assign({},r),g=u||function(e,t){if(e)throw e;return t},r.clockTimestamp&&"number"!=typeof r.clockTimestamp)return g(new s("clockTimestamp must be a number"));if(void 0!==r.nonce&&("string"!=typeof r.nonce||""===r.nonce.trim()))return g(new s("nonce must be a non-empty string"));if(void 0!==r.allowInvalidAsymmetricKeyTypes&&"boolean"!=typeof r.allowInvalidAsymmetricKeyTypes)return g(new s("allowInvalidAsymmetricKeyTypes must be a boolean"));let w=r.clockTimestamp||Math.floor(Date.now()/1e3);if(!e)return g(new s("jwt must be provided"));if("string"!=typeof e)return g(new s("jwt must be a string"));let b=e.split(".");if(3!==b.length)return g(new s("jwt malformed"));try{_=n(e,{complete:!0})}catch(e){return g(e)}if(!_)return g(new s("invalid token"));let E=_.header;if("function"==typeof t){if(!u)return g(new s("verify must be called asynchronous if secret or public key is provided as a callback"));$=t}else $=function(e,r){return r(null,t)};return $(E,function(t,n){let u;if(t)return g(new s("error in secret or public key callback: "+t.message));let $=""!==b[2].trim();if(!$&&n)return g(new s("jwt signature is required"));if($&&!n)return g(new s("secret or public key must be provided"));if(!$&&!r.algorithms)return g(new s('please specify "none" in "algorithms" to verify unsigned tokens'));if(null!=n&&!(n instanceof d))try{n=f(n)}catch(e){try{n=p("string"==typeof n?Buffer.from(n):n)}catch(e){return g(new s("secretOrPublicKey is not valid key material"))}}if(r.algorithms||("secret"===n.type?r.algorithms=v:["rsa","rsa-pss"].includes(n.asymmetricKeyType)?r.algorithms=y:"ec"===n.asymmetricKeyType?r.algorithms=m:r.algorithms=h),-1===r.algorithms.indexOf(_.header.alg))return g(new s("invalid algorithm"));if(E.alg.startsWith("HS")&&"secret"!==n.type)return g(new s(`secretOrPublicKey must be a symmetric key when using ${E.alg}`));if(/^(?:RS|PS|ES)/.test(E.alg)&&"public"!==n.type)return g(new s(`secretOrPublicKey must be an asymmetric key when using ${E.alg}`));if(!r.allowInvalidAsymmetricKeyTypes)try{l(E.alg,n)}catch(e){return g(e)}try{u=c.verify(e,_.header.alg,n)}catch(e){return g(e)}if(!u)return g(new s("invalid signature"));let k=_.payload;if(void 0!==k.nbf&&!r.ignoreNotBefore){if("number"!=typeof k.nbf)return g(new s("invalid nbf value"));if(k.nbf>w+(r.clockTolerance||0))return g(new o("jwt not active",new Date(1e3*k.nbf)))}if(void 0!==k.exp&&!r.ignoreExpiration){if("number"!=typeof k.exp)return g(new s("invalid exp value"));if(w>=k.exp+(r.clockTolerance||0))return g(new i("jwt expired",new Date(1e3*k.exp)))}if(r.audience){let e=Array.isArray(r.audience)?r.audience:[r.audience];if(!(Array.isArray(k.aud)?k.aud:[k.aud]).some(function(t){return e.some(function(e){return e instanceof RegExp?e.test(t):e===t})}))return g(new s("jwt audience invalid. expected: "+e.join(" or ")))}if(r.issuer&&("string"==typeof r.issuer&&k.iss!==r.issuer||Array.isArray(r.issuer)&&-1===r.issuer.indexOf(k.iss)))return g(new s("jwt issuer invalid. expected: "+r.issuer));if(r.subject&&k.sub!==r.subject)return g(new s("jwt subject invalid. expected: "+r.subject));if(r.jwtid&&k.jti!==r.jwtid)return g(new s("jwt jwtid invalid. expected: "+r.jwtid));if(r.nonce&&k.nonce!==r.nonce)return g(new s("jwt nonce invalid. expected: "+r.nonce));if(r.maxAge){if("number"!=typeof k.iat)return g(new s("iat required when maxAge is specified"));let e=a(r.maxAge,k.iat);if(void 0===e)return g(new s('"maxAge" should be a number of seconds or string representing a timespan eg: "1d", "20h", 60'));if(w>=e+(r.clockTolerance||0))return g(new i("maxAge exceeded",new Date(1e3*e)))}return!0===r.complete?g(null,{header:E,payload:k,signature:_.signature}):g(null,k)})}},2357(e,t,r){var s,o=r(6608).Buffer,i=r(6982),n=r(9053),a=r(9023),l="secret must be a string or buffer",u="key must be a string or a buffer",c="function"==typeof i.createPublicKey;function d(e){if(!o.isBuffer(e)&&"string"!=typeof e&&(!c||"object"!=typeof e||"string"!=typeof e.type||"string"!=typeof e.asymmetricKeyType||"function"!=typeof e.export))throw m(u)}function p(e){if(!o.isBuffer(e)&&"string"!=typeof e&&"object"!=typeof e)throw m("key must be a string, a buffer or an object")}function f(e){return e.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function h(e){var t=4-(e=e.toString()).length%4;if(4!==t)for(var r=0;r<t;++r)e+="=";return e.replace(/\-/g,"+").replace(/_/g,"/")}function m(e){var t=[].slice.call(arguments,1);return TypeError(a.format.bind(a,e).apply(null,t))}function y(e){var t;return t=e,o.isBuffer(t)||"string"==typeof t||(e=JSON.stringify(e)),e}function v(e){return function(t,r){!function(e){if(!o.isBuffer(e)){if("string"!=typeof e){if(!c||"object"!=typeof e||"secret"!==e.type||"function"!=typeof e.export)throw m(l)}}}(r),t=y(t);var s=i.createHmac("sha"+e,r);return f((s.update(t),s.digest("base64")))}}c&&(u+=" or a KeyObject",l+="or a KeyObject");var g="timingSafeEqual"in i?function(e,t){return e.byteLength===t.byteLength&&i.timingSafeEqual(e,t)}:function(e,t){return s||(s=r(9454)),s(e,t)};function _(e){return function(t,r,s){var i=v(e)(t,s);return g(o.from(r),o.from(i))}}function $(e){return function(t,r){p(r),t=y(t);var s=i.createSign("RSA-SHA"+e);return f((s.update(t),s.sign(r,"base64")))}}function w(e){return function(t,r,s){d(s),t=y(t),r=h(r);var o=i.createVerify("RSA-SHA"+e);return o.update(t),o.verify(s,r,"base64")}}function b(e){return function(t,r){p(r),t=y(t);var s=i.createSign("RSA-SHA"+e);return f((s.update(t),s.sign({key:r,padding:i.constants.RSA_PKCS1_PSS_PADDING,saltLength:i.constants.RSA_PSS_SALTLEN_DIGEST},"base64")))}}function E(e){return function(t,r,s){d(s),t=y(t),r=h(r);var o=i.createVerify("RSA-SHA"+e);return o.update(t),o.verify({key:s,padding:i.constants.RSA_PKCS1_PSS_PADDING,saltLength:i.constants.RSA_PSS_SALTLEN_DIGEST},r,"base64")}}function k(e){var t=$(e);return function(){var r=t.apply(null,arguments);return n.derToJose(r,"ES"+e)}}function S(e){var t=w(e);return function(r,s,o){return t(r,s=n.joseToDer(s,"ES"+e).toString("base64"),o)}}function T(){return function(){return""}}function x(){return function(e,t){return""===t}}e.exports=function(e){var t=e.match(/^(RS|PS|ES|HS)(256|384|512)$|^(none)$/);if(!t)throw m('"%s" is not a valid algorithm.\n  Supported algorithms are:\n  "HS256", "HS384", "HS512", "RS256", "RS384", "RS512", "PS256", "PS384", "PS512", "ES256", "ES384", "ES512" and "none".',e);var r=(t[1]||t[3]).toLowerCase(),s=t[2];return{sign:({hs:v,rs:$,ps:b,es:k,none:T})[r](s),verify:({hs:_,rs:w,ps:E,es:S,none:x})[r](s)}}},3263(e,t,r){var s=r(9615),o=r(6747);t.ALGORITHMS=["HS256","HS384","HS512","RS256","RS384","RS512","PS256","PS384","PS512","ES256","ES384","ES512"],t.sign=s.sign,t.verify=o.verify,t.decode=o.decode,t.isValid=o.isValid,t.createSign=function(e){return new s(e)},t.createVerify=function(e){return new o(e)}},6360(e,t,r){var s=r(6608).Buffer,o=r(2203);function i(e){if(this.buffer=null,this.writable=!0,this.readable=!0,!e)return this.buffer=s.alloc(0),this;if("function"==typeof e.pipe)return this.buffer=s.alloc(0),e.pipe(this),this;if(e.length||"object"==typeof e)return this.buffer=e,this.writable=!1,process.nextTick((function(){this.emit("end",e),this.readable=!1,this.emit("close")}).bind(this)),this;throw TypeError("Unexpected data type ("+typeof e+")")}r(9023).inherits(i,o),i.prototype.write=function(e){this.buffer=s.concat([this.buffer,s.from(e)]),this.emit("data",e)},i.prototype.end=function(e){e&&this.write(e),this.emit("end",e),this.emit("close"),this.writable=!1,this.readable=!1},e.exports=i},9615(e,t,r){var s=r(6608).Buffer,o=r(6360),i=r(2357),n=r(2203),a=r(5911),l=r(9023);function u(e,t){return s.from(e,t).toString("base64").replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function c(e){var t,r,s,o=e.header,n=e.payload,c=e.secret||e.privateKey,d=e.encoding,p=i(o.alg),f=(t=(t=d)||"utf8",r=u(a(o),"binary"),s=u(a(n),t),l.format("%s.%s",r,s)),h=p.sign(f,c);return l.format("%s.%s",f,h)}function d(e){var t=e.secret;if(t=null==(t=null==t?e.privateKey:t)?e.key:t,!0===/^hs/i.test(e.header.alg)&&null==t)throw TypeError("secret must be a string or buffer or a KeyObject");var r=new o(t);this.readable=!0,this.header=e.header,this.encoding=e.encoding,this.secret=this.privateKey=this.key=r,this.payload=new o(e.payload),this.secret.once("close",(function(){!this.payload.writable&&this.readable&&this.sign()}).bind(this)),this.payload.once("close",(function(){!this.secret.writable&&this.readable&&this.sign()}).bind(this))}l.inherits(d,n),d.prototype.sign=function(){try{var e=c({header:this.header,payload:this.payload.buffer,secret:this.secret.buffer,encoding:this.encoding});return this.emit("done",e),this.emit("data",e),this.emit("end"),this.readable=!1,e}catch(e){this.readable=!1,this.emit("error",e),this.emit("close")}},d.sign=c,e.exports=d},5911(e,t,r){var s=r(181).Buffer;e.exports=function(e){return"string"==typeof e?e:"number"==typeof e||s.isBuffer(e)?e.toString():JSON.stringify(e)}},6747(e,t,r){var s=r(6608).Buffer,o=r(6360),i=r(2357),n=r(2203),a=r(5911),l=r(9023),u=/^[a-zA-Z0-9\-_]+?\.[a-zA-Z0-9\-_]+?\.([a-zA-Z0-9\-_]+)?$/;function c(e){var t=e.split(".",1)[0],r=s.from(t,"base64").toString("binary");if("[object Object]"===Object.prototype.toString.call(r))return r;try{return JSON.parse(r)}catch(e){return}}function d(e){return e.split(".")[2]}function p(e){return u.test(e)&&!!c(e)}function f(e,t,r){if(!t){var s=Error("Missing algorithm parameter for jws.verify");throw s.code="MISSING_ALGORITHM",s}var o=d(e=a(e)),n=e.split(".",2).join(".");return i(t).verify(n,o,r)}function h(e,t){if(t=t||{},!p(e=a(e)))return null;var r,o,i=c(e);if(!i)return null;var n=(r=r||"utf8",o=e.split(".")[1],s.from(o,"base64").toString(r));return("JWT"===i.typ||t.json)&&(n=JSON.parse(n,t.encoding)),{header:i,payload:n,signature:d(e)}}function m(e){var t=(e=e||{}).secret;if(t=null==(t=null==t?e.publicKey:t)?e.key:t,!0===/^hs/i.test(e.algorithm)&&null==t)throw TypeError("secret must be a string or buffer or a KeyObject");var r=new o(t);this.readable=!0,this.algorithm=e.algorithm,this.encoding=e.encoding,this.secret=this.publicKey=this.key=r,this.signature=new o(e.signature),this.secret.once("close",(function(){!this.signature.writable&&this.readable&&this.verify()}).bind(this)),this.signature.once("close",(function(){!this.secret.writable&&this.readable&&this.verify()}).bind(this))}l.inherits(m,n),m.prototype.verify=function(){try{var e=f(this.signature.buffer,this.algorithm,this.key.buffer),t=h(this.signature.buffer,this.encoding);return this.emit("done",e,t),this.emit("data",e),this.emit("end"),this.readable=!1,e}catch(e){this.readable=!1,this.emit("error",e),this.emit("close")}},m.decode=h,m.isValid=p,m.verify=f,e.exports=m},5357(e){var t,r,s=1/0,o=0/0,i=/^\s+|\s+$/g,n=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,l=/^0o[0-7]+$/i,u=/^(?:0|[1-9]\d*)$/,c=parseInt;function d(e){return e!=e}var p=Object.prototype,f=p.hasOwnProperty,h=p.toString,m=p.propertyIsEnumerable,y=(t=Object.keys,r=Object,function(e){return t(r(e))}),v=Math.max,g=Array.isArray;function _(e){var t,r,s;return null!=e&&"number"==typeof(t=e.length)&&t>-1&&t%1==0&&t<=0x1fffffffffffff&&"[object Function]"!=(s=$(r=e)?h.call(r):"")&&"[object GeneratorFunction]"!=s}function $(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function w(e){return!!e&&"object"==typeof e}e.exports=function(e,t,r,b){e=_(e)?e:function(e){return e?function(e,t){for(var r=-1,s=e?e.length:0,o=Array(s);++r<s;)o[r]=t(e[r],r,e);return o}(_(e)?function(e,t){var r,s,o,i,n=g(e)||w(s=r=e)&&_(s)&&f.call(r,"callee")&&(!m.call(r,"callee")||"[object Arguments]"==h.call(r))?function(e,t){for(var r=-1,s=Array(e);++r<e;)s[r]=t(r);return s}(e.length,String):[],a=n.length,l=!!a;for(var c in e){f.call(e,c)&&!(l&&("length"==c||(o=c,(i=null==(i=a)?0x1fffffffffffff:i)&&("number"==typeof o||u.test(o))&&o>-1&&o%1==0&&o<i)))&&n.push(c)}return n}(e):function(e){if(r=(t=e)&&t.constructor,t!==("function"==typeof r&&r.prototype||p))return y(e);var t,r,s=[];for(var o in Object(e))f.call(e,o)&&"constructor"!=o&&s.push(o);return s}(e),function(t){return e[t]}):[]}(e),r=r&&!b?(S=(k=(E=r)?(E=function(e){if("number"==typeof e)return e;if("symbol"==typeof(t=e)||w(t)&&"[object Symbol]"==h.call(t))return o;if($(e)){var t,r="function"==typeof e.valueOf?e.valueOf():e;e=$(r)?r+"":r}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(i,"");var s=a.test(e);return s||l.test(e)?c(e.slice(2),s?2:8):n.test(e)?o:+e}(E))===s||E===-s?(E<0?-1:1)*17976931348623157e292:E==E?E:0:0===E?E:0)%1,k==k?S?k-S:k:0):0;var E,k,S,T,x=e.length;return r<0&&(r=v(x+r,0)),"string"==typeof(T=e)||!g(T)&&w(T)&&"[object String]"==h.call(T)?r<=x&&e.indexOf(t,r)>-1:!!x&&function(e,t,r){if(t!=t){for(var s=e.length,o=r+-1;++o<s;)if(d(e[o],o,e))return o;return -1}for(var i=r-1,n=e.length;++i<n;)if(e[i]===t)return i;return -1}(e,t,r)>-1}},6782(e){var t=Object.prototype.toString;e.exports=function(e){var r;return!0===e||!1===e||!!(r=e)&&"object"==typeof r&&"[object Boolean]"==t.call(e)}},5250(e){var t=1/0,r=0/0,s=/^\s+|\s+$/g,o=/^[-+]0x[0-9a-f]+$/i,i=/^0b[01]+$/i,n=/^0o[0-7]+$/i,a=parseInt,l=Object.prototype.toString;function u(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}e.exports=function(e){var c,d,p;return"number"==typeof e&&e==(p=(d=(c=e)?(c=function(e){if("number"==typeof e)return e;if("symbol"==typeof(t=e)||t&&"object"==typeof t&&"[object Symbol]"==l.call(t))return r;if(u(e)){var t,c="function"==typeof e.valueOf?e.valueOf():e;e=u(c)?c+"":c}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(s,"");var d=i.test(e);return d||n.test(e)?a(e.slice(2),d?2:8):o.test(e)?r:+e}(c))===t||c===-t?(c<0?-1:1)*17976931348623157e292:c==c?c:0:0===c?c:0)%1,d==d?p?d-p:d:0)}},8094(e){var t=Object.prototype.toString;e.exports=function(e){return"number"==typeof e||!!e&&"object"==typeof e&&"[object Number]"==t.call(e)}},6052(e){var t,r,s=Object.prototype,o=Function.prototype.toString,i=s.hasOwnProperty,n=o.call(Object),a=s.toString,l=(t=Object.getPrototypeOf,r=Object,function(e){return t(r(e))});e.exports=function(e){if(!(e&&"object"==typeof e)||"[object Object]"!=a.call(e)||function(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}(e))return!1;var t=l(e);if(null===t)return!0;var r=i.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&o.call(r)==n}},1251(e){var t=Object.prototype.toString,r=Array.isArray;e.exports=function(e){var s;return"string"==typeof e||!r(e)&&!!(s=e)&&"object"==typeof s&&"[object String]"==t.call(e)}},8430(e){var t=1/0,r=0/0,s=/^\s+|\s+$/g,o=/^[-+]0x[0-9a-f]+$/i,i=/^0b[01]+$/i,n=/^0o[0-7]+$/i,a=parseInt,l=Object.prototype.toString;function u(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}e.exports=function(e){var c,d,p,f,h=2,m=e;if("function"!=typeof m)throw TypeError("Expected a function");return p=(d=(c=h)?(c=function(e){if("number"==typeof e)return e;if("symbol"==typeof(t=e)||t&&"object"==typeof t&&"[object Symbol]"==l.call(t))return r;if(u(e)){var t,c="function"==typeof e.valueOf?e.valueOf():e;e=u(c)?c+"":c}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(s,"");var d=i.test(e);return d||n.test(e)?a(e.slice(2),d?2:8):o.test(e)?r:+e}(c))===t||c===-t?(c<0?-1:1)*17976931348623157e292:c==c?c:0:0===c?c:0)%1,h=d==d?p?d-p:d:0,function(){return--h>0&&(f=m.apply(this,arguments)),h<=1&&(m=void 0),f}}},3866(e){function t(e,t,r,s){return Math.round(e/r)+" "+s+(t>=1.5*r?"s":"")}e.exports=function(e,r){r=r||{};var s,o,i,n,a=typeof e;if("string"===a&&e.length>0){var l=e;if(!((l=String(l)).length>100)){var u=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(l);if(u){var c=parseFloat(u[1]);switch((u[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*c;case"weeks":case"week":case"w":return 6048e5*c;case"days":case"day":case"d":return 864e5*c;case"hours":case"hour":case"hrs":case"hr":case"h":return 36e5*c;case"minutes":case"minute":case"mins":case"min":case"m":return 6e4*c;case"seconds":case"second":case"secs":case"sec":case"s":return 1e3*c;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return c;default:break}}}return}if("number"===a&&isFinite(e)){return r.long?(o=Math.abs(s=e))>=864e5?t(s,o,864e5,"day"):o>=36e5?t(s,o,36e5,"hour"):o>=6e4?t(s,o,6e4,"minute"):o>=1e3?t(s,o,1e3,"second"):s+" ms":(n=Math.abs(i=e))>=864e5?Math.round(i/864e5)+"d":n>=36e5?Math.round(i/36e5)+"h":n>=6e4?Math.round(i/6e4)+"m":n>=1e3?Math.round(i/1e3)+"s":i+"ms"}throw Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},9695(e){"use strict";let t=(e={})=>{let t=e.env||process.env;return"win32"!==(e.platform||process.platform)?"PATH":Object.keys(t).reverse().find(e=>"PATH"===e.toUpperCase())||"Path"};e.exports=t,e.exports.default=t},6608(e,t,r){var s=r(181),o=s.Buffer;function i(e,t){for(var r in e)t[r]=e[r]}function n(e,t,r){return o(e,t,r)}o.from&&o.alloc&&o.allocUnsafe&&o.allocUnsafeSlow?e.exports=s:(i(s,t),t.Buffer=n),n.prototype=Object.create(o.prototype),i(o,n),n.from=function(e,t,r){if("number"==typeof e)throw TypeError("Argument must not be a number");return o(e,t,r)},n.alloc=function(e,t,r){if("number"!=typeof e)throw TypeError("Argument must be a number");var s=o(e);return void 0!==t?"string"==typeof r?s.fill(t,r):s.fill(t):s.fill(0),s},n.allocUnsafe=function(e){if("number"!=typeof e)throw TypeError("Argument must be a number");return o(e)},n.allocUnsafeSlow=function(e){if("number"!=typeof e)throw TypeError("Argument must be a number");return s.SlowBuffer(e)}},8610(e,t,r){"use strict";let s=Symbol("SemVer ANY");class o{static get ANY(){return s}constructor(e,t){if(t=i(t),e instanceof o)if(!!t.loose===e.loose)return e;else e=e.value;u("comparator",e=e.trim().split(/\s+/).join(" "),t),this.options=t,this.loose=!!t.loose,this.parse(e),this.semver===s?this.value="":this.value=this.operator+this.semver.version,u("comp",this)}parse(e){let t=this.options.loose?n[a.COMPARATORLOOSE]:n[a.COMPARATOR],r=e.match(t);if(!r)throw TypeError(`Invalid comparator: ${e}`);this.operator=void 0!==r[1]?r[1]:"","="===this.operator&&(this.operator=""),r[2]?this.semver=new c(r[2],this.options.loose):this.semver=s}toString(){return this.value}test(e){if(u("Comparator.test",e,this.options.loose),this.semver===s||e===s)return!0;if("string"==typeof e)try{e=new c(e,this.options)}catch(e){return!1}return l(e,this.operator,this.semver,this.options)}intersects(e,t){if(!(e instanceof o))throw TypeError("a Comparator is required");return""===this.operator?""===this.value||new d(e.value,t).test(this.value):""===e.operator?""===e.value||new d(this.value,t).test(e.semver):!((t=i(t)).includePrerelease&&("<0.0.0-0"===this.value||"<0.0.0-0"===e.value)||!t.includePrerelease&&(this.value.startsWith("<0.0.0")||e.value.startsWith("<0.0.0")))&&!!(this.operator.startsWith(">")&&e.operator.startsWith(">")||this.operator.startsWith("<")&&e.operator.startsWith("<")||this.semver.version===e.semver.version&&this.operator.includes("=")&&e.operator.includes("=")||l(this.semver,"<",e.semver,t)&&this.operator.startsWith(">")&&e.operator.startsWith("<")||l(this.semver,">",e.semver,t)&&this.operator.startsWith("<")&&e.operator.startsWith(">"))}}e.exports=o;let i=r(4621),{safeRe:n,t:a}=r(152),l=r(5461),u=r(674),c=r(2398),d=r(2069)},2069(e,t,r){"use strict";let s=/\s+/g;class o{constructor(e,t){if(t=n(t),e instanceof o)if(!!t.loose===e.loose&&!!t.includePrerelease===e.includePrerelease)return e;else return new o(e.raw,t);if(e instanceof a)return this.raw=e.value,this.set=[[e]],this.formatted=void 0,this;if(this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease,this.raw=e.trim().replace(s," "),this.set=this.raw.split("||").map(e=>this.parseRange(e.trim())).filter(e=>e.length),!this.set.length)throw TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const e=this.set[0];if(this.set=this.set.filter(e=>!v(e[0])),0===this.set.length)this.set=[e];else if(this.set.length>1){for(const e of this.set)if(1===e.length&&g(e[0])){this.set=[e];break}}}this.formatted=void 0}get range(){if(void 0===this.formatted){this.formatted="";for(let e=0;e<this.set.length;e++){e>0&&(this.formatted+="||");let t=this.set[e];for(let e=0;e<t.length;e++)e>0&&(this.formatted+=" "),this.formatted+=t[e].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(e){let t=((this.options.includePrerelease&&m)|(this.options.loose&&y))+":"+e,r=i.get(t);if(r)return r;let s=this.options.loose,o=s?c[d.HYPHENRANGELOOSE]:c[d.HYPHENRANGE];l("hyphen replace",e=e.replace(o,O(this.options.includePrerelease))),l("comparator trim",e=e.replace(c[d.COMPARATORTRIM],p)),l("tilde trim",e=e.replace(c[d.TILDETRIM],f)),l("caret trim",e=e.replace(c[d.CARETTRIM],h));let n=e.split(" ").map(e=>$(e,this.options)).join(" ").split(/\s+/).map(e=>I(e,this.options));s&&(n=n.filter(e=>(l("loose invalid filter",e,this.options),!!e.match(c[d.COMPARATORLOOSE])))),l("range list",n);let u=new Map;for(let e of n.map(e=>new a(e,this.options))){if(v(e))return[e];u.set(e.value,e)}u.size>1&&u.has("")&&u.delete("");let g=[...u.values()];return i.set(t,g),g}intersects(e,t){if(!(e instanceof o))throw TypeError("a Range is required");return this.set.some(r=>_(r,t)&&e.set.some(e=>_(e,t)&&r.every(r=>e.every(e=>r.intersects(e,t)))))}test(e){if(!e)return!1;if("string"==typeof e)try{e=new u(e,this.options)}catch(e){return!1}for(let t=0;t<this.set.length;t++)if(R(this.set[t],e,this.options))return!0;return!1}}e.exports=o;let i=new(r(2044)),n=r(4621),a=r(8610),l=r(674),u=r(2398),{safeRe:c,t:d,comparatorTrimReplace:p,tildeTrimReplace:f,caretTrimReplace:h}=r(152),{FLAG_INCLUDE_PRERELEASE:m,FLAG_LOOSE:y}=r(5076),v=e=>"<0.0.0-0"===e.value,g=e=>""===e.value,_=(e,t)=>{let r=!0,s=e.slice(),o=s.pop();for(;r&&s.length;)r=s.every(e=>o.intersects(e,t)),o=s.pop();return r},$=(e,t)=>(l("comp",e=e.replace(c[d.BUILD],""),t),l("caret",e=k(e,t)),l("tildes",e=b(e,t)),l("xrange",e=T(e,t)),l("stars",e=P(e,t)),e),w=e=>!e||"x"===e.toLowerCase()||"*"===e,b=(e,t)=>e.trim().split(/\s+/).map(e=>E(e,t)).join(" "),E=(e,t)=>{let r=t.loose?c[d.TILDELOOSE]:c[d.TILDE];return e.replace(r,(t,r,s,o,i)=>{let n;return l("tilde",e,t,r,s,o,i),w(r)?n="":w(s)?n=`>=${r}.0.0 <${+r+1}.0.0-0`:w(o)?n=`>=${r}.${s}.0 <${r}.${+s+1}.0-0`:i?(l("replaceTilde pr",i),n=`>=${r}.${s}.${o}-${i} <${r}.${+s+1}.0-0`):n=`>=${r}.${s}.${o} <${r}.${+s+1}.0-0`,l("tilde return",n),n})},k=(e,t)=>e.trim().split(/\s+/).map(e=>S(e,t)).join(" "),S=(e,t)=>{l("caret",e,t);let r=t.loose?c[d.CARETLOOSE]:c[d.CARET],s=t.includePrerelease?"-0":"";return e.replace(r,(t,r,o,i,n)=>{let a;return l("caret",e,t,r,o,i,n),w(r)?a="":w(o)?a=`>=${r}.0.0${s} <${+r+1}.0.0-0`:w(i)?a="0"===r?`>=${r}.${o}.0${s} <${r}.${+o+1}.0-0`:`>=${r}.${o}.0${s} <${+r+1}.0.0-0`:n?(l("replaceCaret pr",n),a="0"===r?"0"===o?`>=${r}.${o}.${i}-${n} <${r}.${o}.${+i+1}-0`:`>=${r}.${o}.${i}-${n} <${r}.${+o+1}.0-0`:`>=${r}.${o}.${i}-${n} <${+r+1}.0.0-0`):(l("no pr"),a="0"===r?"0"===o?`>=${r}.${o}.${i}${s} <${r}.${o}.${+i+1}-0`:`>=${r}.${o}.${i}${s} <${r}.${+o+1}.0-0`:`>=${r}.${o}.${i} <${+r+1}.0.0-0`),l("caret return",a),a})},T=(e,t)=>(l("replaceXRanges",e,t),e.split(/\s+/).map(e=>x(e,t)).join(" ")),x=(e,t)=>{e=e.trim();let r=t.loose?c[d.XRANGELOOSE]:c[d.XRANGE];return e.replace(r,(r,s,o,i,n,a)=>{l("xRange",e,r,s,o,i,n,a);let u=w(o),c=u||w(i),d=c||w(n);return"="===s&&d&&(s=""),a=t.includePrerelease?"-0":"",u?r=">"===s||"<"===s?"<0.0.0-0":"*":s&&d?(c&&(i=0),n=0,">"===s?(s=">=",c?(o=+o+1,i=0):i=+i+1,n=0):"<="===s&&(s="<",c?o=+o+1:i=+i+1),"<"===s&&(a="-0"),r=`${s+o}.${i}.${n}${a}`):c?r=`>=${o}.0.0${a} <${+o+1}.0.0-0`:d&&(r=`>=${o}.${i}.0${a} <${o}.${+i+1}.0-0`),l("xRange return",r),r})},P=(e,t)=>(l("replaceStars",e,t),e.trim().replace(c[d.STAR],"")),I=(e,t)=>(l("replaceGTE0",e,t),e.trim().replace(c[t.includePrerelease?d.GTE0PRE:d.GTE0],"")),O=e=>(t,r,s,o,i,n,a,l,u,c,d,p)=>(r=w(s)?"":w(o)?`>=${s}.0.0${e?"-0":""}`:w(i)?`>=${s}.${o}.0${e?"-0":""}`:n?`>=${r}`:`>=${r}${e?"-0":""}`,l=w(u)?"":w(c)?`<${+u+1}.0.0-0`:w(d)?`<${u}.${+c+1}.0-0`:p?`<=${u}.${c}.${d}-${p}`:e?`<${u}.${c}.${+d+1}-0`:`<=${l}`,`${r} ${l}`.trim()),R=(e,t,r)=>{for(let r=0;r<e.length;r++)if(!e[r].test(t))return!1;if(t.prerelease.length&&!r.includePrerelease){for(let r=0;r<e.length;r++)if(l(e[r].semver),e[r].semver!==a.ANY&&e[r].semver.prerelease.length>0){let s=e[r].semver;if(s.major===t.major&&s.minor===t.minor&&s.patch===t.patch)return!0}return!1}return!0}},2398(e,t,r){"use strict";let s=r(674),{MAX_LENGTH:o,MAX_SAFE_INTEGER:i}=r(5076),{safeRe:n,t:a}=r(152),l=r(4621),{compareIdentifiers:u}=r(9101);class c{constructor(e,t){if(t=l(t),e instanceof c)if(!!t.loose===e.loose&&!!t.includePrerelease===e.includePrerelease)return e;else e=e.version;else if("string"!=typeof e)throw TypeError(`Invalid version. Must be a string. Got type "${typeof e}".`);if(e.length>o)throw TypeError(`version is longer than ${o} characters`);s("SemVer",e,t),this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease;const r=e.trim().match(t.loose?n[a.LOOSE]:n[a.FULL]);if(!r)throw TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>i||this.major<0)throw TypeError("Invalid major version");if(this.minor>i||this.minor<0)throw TypeError("Invalid minor version");if(this.patch>i||this.patch<0)throw TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map(e=>{if(/^[0-9]+$/.test(e)){let t=+e;if(t>=0&&t<i)return t}return e}):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(s("SemVer.compare",this.version,this.options,e),!(e instanceof c)){if("string"==typeof e&&e===this.version)return 0;e=new c(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return(e instanceof c||(e=new c(e,this.options)),this.major<e.major)?-1:this.major>e.major?1:this.minor<e.minor?-1:this.minor>e.minor?1:this.patch<e.patch?-1:+(this.patch>e.patch)}comparePre(e){if(e instanceof c||(e=new c(e,this.options)),this.prerelease.length&&!e.prerelease.length)return -1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let t=0;do{let r=this.prerelease[t],o=e.prerelease[t];if(s("prerelease compare",t,r,o),void 0===r&&void 0===o)return 0;if(void 0===o)return 1;if(void 0===r)return -1;else if(r===o)continue;else return u(r,o)}while(++t)}compareBuild(e){e instanceof c||(e=new c(e,this.options));let t=0;do{let r=this.build[t],o=e.build[t];if(s("build compare",t,r,o),void 0===r&&void 0===o)return 0;if(void 0===o)return 1;if(void 0===r)return -1;else if(r===o)continue;else return u(r,o)}while(++t)}inc(e,t,r){if(e.startsWith("pre")){if(!t&&!1===r)throw Error("invalid increment argument: identifier is empty");if(t){let e=`-${t}`.match(this.options.loose?n[a.PRERELEASELOOSE]:n[a.PRERELEASE]);if(!e||e[1]!==t)throw Error(`invalid identifier: ${t}`)}}switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t,r);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t,r);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t,r),this.inc("pre",t,r);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",t,r),this.inc("pre",t,r);break;case"release":if(0===this.prerelease.length)throw Error(`version ${this.raw} is not a prerelease`);this.prerelease.length=0;break;case"major":(0!==this.minor||0!==this.patch||0===this.prerelease.length)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(0!==this.patch||0===this.prerelease.length)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":{let e=+!!Number(r);if(0===this.prerelease.length)this.prerelease=[e];else{let s=this.prerelease.length;for(;--s>=0;)"number"==typeof this.prerelease[s]&&(this.prerelease[s]++,s=-2);if(-1===s){if(t===this.prerelease.join(".")&&!1===r)throw Error("invalid increment argument: identifier already exists");this.prerelease.push(e)}}if(t){let s=[t,e];!1===r&&(s=[t]),0===u(this.prerelease[0],t)?isNaN(this.prerelease[1])&&(this.prerelease=s):this.prerelease=s}break}default:throw Error(`invalid increment argument: ${e}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}}e.exports=c},5608(e,t,r){"use strict";let s=r(6802);e.exports=(e,t)=>{let r=s(e.trim().replace(/^[=v]+/,""),t);return r?r.version:null}},5461(e,t,r){"use strict";let s=r(8271),o=r(733),i=r(1686),n=r(6479),a=r(7257),l=r(5850);e.exports=(e,t,r,u)=>{switch(t){case"===":return"object"==typeof e&&(e=e.version),"object"==typeof r&&(r=r.version),e===r;case"!==":return"object"==typeof e&&(e=e.version),"object"==typeof r&&(r=r.version),e!==r;case"":case"=":case"==":return s(e,r,u);case"!=":return o(e,r,u);case">":return i(e,r,u);case">=":return n(e,r,u);case"<":return a(e,r,u);case"<=":return l(e,r,u);default:throw TypeError(`Invalid operator: ${t}`)}}},7771(e,t,r){"use strict";let s=r(2398),o=r(6802),{safeRe:i,t:n}=r(152);e.exports=(e,t)=>{if(e instanceof s)return e;if("number"==typeof e&&(e=String(e)),"string"!=typeof e)return null;let r=null;if((t=t||{}).rtl){let s,o=t.includePrerelease?i[n.COERCERTLFULL]:i[n.COERCERTL];for(;(s=o.exec(e))&&(!r||r.index+r[0].length!==e.length);)r&&s.index+s[0].length===r.index+r[0].length||(r=s),o.lastIndex=s.index+s[1].length+s[2].length;o.lastIndex=-1}else r=e.match(t.includePrerelease?i[n.COERCEFULL]:i[n.COERCE]);if(null===r)return null;let a=r[2],l=r[3]||"0",u=r[4]||"0",c=t.includePrerelease&&r[5]?`-${r[5]}`:"",d=t.includePrerelease&&r[6]?`+${r[6]}`:"";return o(`${a}.${l}.${u}${c}${d}`,t)}},8767(e,t,r){"use strict";let s=r(2398);e.exports=(e,t,r)=>{let o=new s(e,r),i=new s(t,r);return o.compare(i)||o.compareBuild(i)}},6293(e,t,r){"use strict";let s=r(6958);e.exports=(e,t)=>s(e,t,!0)},6958(e,t,r){"use strict";let s=r(2398);e.exports=(e,t,r)=>new s(e,r).compare(new s(t,r))},3086(e,t,r){"use strict";let s=r(6802);e.exports=(e,t)=>{let r=s(e,null,!0),o=s(t,null,!0),i=r.compare(o);if(0===i)return null;let n=i>0,a=n?r:o,l=n?o:r,u=!!a.prerelease.length;if(l.prerelease.length&&!u){if(!l.patch&&!l.minor)return"major";if(0===l.compareMain(a))return l.minor&&!l.patch?"minor":"patch"}let c=u?"pre":"";return r.major!==o.major?c+"major":r.minor!==o.minor?c+"minor":r.patch!==o.patch?c+"patch":"prerelease"}},8271(e,t,r){"use strict";let s=r(6958);e.exports=(e,t,r)=>0===s(e,t,r)},1686(e,t,r){"use strict";let s=r(6958);e.exports=(e,t,r)=>s(e,t,r)>0},6479(e,t,r){"use strict";let s=r(6958);e.exports=(e,t,r)=>s(e,t,r)>=0},3625(e,t,r){"use strict";let s=r(2398);e.exports=(e,t,r,o,i)=>{"string"==typeof r&&(i=o,o=r,r=void 0);try{return new s(e instanceof s?e.version:e,r).inc(t,o,i).version}catch(e){return null}}},7257(e,t,r){"use strict";let s=r(6958);e.exports=(e,t,r)=>0>s(e,t,r)},5850(e,t,r){"use strict";let s=r(6958);e.exports=(e,t,r)=>0>=s(e,t,r)},7744(e,t,r){"use strict";let s=r(2398);e.exports=(e,t)=>new s(e,t).major},4812(e,t,r){"use strict";let s=r(2398);e.exports=(e,t)=>new s(e,t).minor},733(e,t,r){"use strict";let s=r(6958);e.exports=(e,t,r)=>0!==s(e,t,r)},6802(e,t,r){"use strict";let s=r(2398);e.exports=(e,t,r=!1)=>{if(e instanceof s)return e;try{return new s(e,t)}catch(e){if(!r)return null;throw e}}},8643(e,t,r){"use strict";let s=r(2398);e.exports=(e,t)=>new s(e,t).patch},9283(e,t,r){"use strict";let s=r(6802);e.exports=(e,t)=>{let r=s(e,t);return r&&r.prerelease.length?r.prerelease:null}},7032(e,t,r){"use strict";let s=r(6958);e.exports=(e,t,r)=>s(t,e,r)},9839(e,t,r){"use strict";let s=r(8767);e.exports=(e,t)=>e.sort((e,r)=>s(r,e,t))},4056(e,t,r){"use strict";let s=r(2069);e.exports=(e,t,r)=>{try{t=new s(t,r)}catch(e){return!1}return t.test(e)}},7697(e,t,r){"use strict";let s=r(8767);e.exports=(e,t)=>e.sort((e,r)=>s(e,r,t))},6807(e,t,r){"use strict";let s=r(6802);e.exports=(e,t)=>{let r=s(e,t);return r?r.version:null}},3895(e,t,r){"use strict";let s=r(152),o=r(5076),i=r(2398),n=r(9101),a=r(6802),l=r(6807),u=r(5608),c=r(3625),d=r(3086),p=r(7744),f=r(4812),h=r(8643),m=r(9283),y=r(6958),v=r(7032),g=r(6293),_=r(8767),$=r(7697),w=r(9839),b=r(1686),E=r(7257),k=r(8271),S=r(733),T=r(6479),x=r(5850),P=r(5461),I=r(7771),O=r(8610),R=r(2069),j=r(4056),N=r(6613),A=r(7114),z=r(1008),C=r(203),M=r(5372),D=r(4713),L=r(4497),q=r(9272),U=r(3490);e.exports={parse:a,valid:l,clean:u,inc:c,diff:d,major:p,minor:f,patch:h,prerelease:m,compare:y,rcompare:v,compareLoose:g,compareBuild:_,sort:$,rsort:w,gt:b,lt:E,eq:k,neq:S,gte:T,lte:x,cmp:P,coerce:I,Comparator:O,Range:R,satisfies:j,toComparators:N,maxSatisfying:A,minSatisfying:z,minVersion:C,validRange:M,outside:D,gtr:L,ltr:q,intersects:U,simplifyRange:r(4039),subset:r(22),SemVer:i,re:s.re,src:s.src,tokens:s.t,SEMVER_SPEC_VERSION:o.SEMVER_SPEC_VERSION,RELEASE_TYPES:o.RELEASE_TYPES,compareIdentifiers:n.compareIdentifiers,rcompareIdentifiers:n.rcompareIdentifiers}},5076(e){"use strict";e.exports={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:16,MAX_SAFE_BUILD_LENGTH:250,MAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER||0x1fffffffffffff,RELEASE_TYPES:["major","premajor","minor","preminor","patch","prepatch","prerelease"],SEMVER_SPEC_VERSION:"2.0.0",FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2}},674(e){"use strict";e.exports="object"==typeof process&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{}},9101(e){"use strict";let t=/^[0-9]+$/,r=(e,r)=>{if("number"==typeof e&&"number"==typeof r)return e===r?0:e<r?-1:1;let s=t.test(e),o=t.test(r);return s&&o&&(e*=1,r*=1),e===r?0:s&&!o?-1:o&&!s?1:e<r?-1:1};e.exports={compareIdentifiers:r,rcompareIdentifiers:(e,t)=>r(t,e)}},2044(e){"use strict";e.exports=class{constructor(){this.max=1e3,this.map=new Map}get(e){let t=this.map.get(e);if(void 0!==t)return this.map.delete(e),this.map.set(e,t),t}delete(e){return this.map.delete(e)}set(e,t){if(!this.delete(e)&&void 0!==t){if(this.map.size>=this.max){let e=this.map.keys().next().value;this.delete(e)}this.map.set(e,t)}return this}}},4621(e){"use strict";let t=Object.freeze({loose:!0}),r=Object.freeze({});e.exports=e=>e?"object"!=typeof e?t:e:r},152(e,t,r){"use strict";let{MAX_SAFE_COMPONENT_LENGTH:s,MAX_SAFE_BUILD_LENGTH:o,MAX_LENGTH:i}=r(5076),n=r(674),a=(t=e.exports={}).re=[],l=t.safeRe=[],u=t.src=[],c=t.safeSrc=[],d=t.t={},p=0,f="[a-zA-Z0-9-]",h=[["\\s",1],["\\d",i],[f,o]],m=(e,t,r)=>{let s=(e=>{for(let[t,r]of h)e=e.split(`${t}*`).join(`${t}{0,${r}}`).split(`${t}+`).join(`${t}{1,${r}}`);return e})(t),o=p++;n(e,o,t),d[e]=o,u[o]=t,c[o]=s,a[o]=new RegExp(t,r?"g":void 0),l[o]=new RegExp(s,r?"g":void 0)};m("NUMERICIDENTIFIER","0|[1-9]\\d*"),m("NUMERICIDENTIFIERLOOSE","\\d+"),m("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${f}*`),m("MAINVERSION",`(${u[d.NUMERICIDENTIFIER]})\\.(${u[d.NUMERICIDENTIFIER]})\\.(${u[d.NUMERICIDENTIFIER]})`),m("MAINVERSIONLOOSE",`(${u[d.NUMERICIDENTIFIERLOOSE]})\\.(${u[d.NUMERICIDENTIFIERLOOSE]})\\.(${u[d.NUMERICIDENTIFIERLOOSE]})`),m("PRERELEASEIDENTIFIER",`(?:${u[d.NONNUMERICIDENTIFIER]}|${u[d.NUMERICIDENTIFIER]})`),m("PRERELEASEIDENTIFIERLOOSE",`(?:${u[d.NONNUMERICIDENTIFIER]}|${u[d.NUMERICIDENTIFIERLOOSE]})`),m("PRERELEASE",`(?:-(${u[d.PRERELEASEIDENTIFIER]}(?:\\.${u[d.PRERELEASEIDENTIFIER]})*))`),m("PRERELEASELOOSE",`(?:-?(${u[d.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${u[d.PRERELEASEIDENTIFIERLOOSE]})*))`),m("BUILDIDENTIFIER",`${f}+`),m("BUILD",`(?:\\+(${u[d.BUILDIDENTIFIER]}(?:\\.${u[d.BUILDIDENTIFIER]})*))`),m("FULLPLAIN",`v?${u[d.MAINVERSION]}${u[d.PRERELEASE]}?${u[d.BUILD]}?`),m("FULL",`^${u[d.FULLPLAIN]}$`),m("LOOSEPLAIN",`[v=\\s]*${u[d.MAINVERSIONLOOSE]}${u[d.PRERELEASELOOSE]}?${u[d.BUILD]}?`),m("LOOSE",`^${u[d.LOOSEPLAIN]}$`),m("GTLT","((?:<|>)?=?)"),m("XRANGEIDENTIFIERLOOSE",`${u[d.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),m("XRANGEIDENTIFIER",`${u[d.NUMERICIDENTIFIER]}|x|X|\\*`),m("XRANGEPLAIN",`[v=\\s]*(${u[d.XRANGEIDENTIFIER]})(?:\\.(${u[d.XRANGEIDENTIFIER]})(?:\\.(${u[d.XRANGEIDENTIFIER]})(?:${u[d.PRERELEASE]})?${u[d.BUILD]}?)?)?`),m("XRANGEPLAINLOOSE",`[v=\\s]*(${u[d.XRANGEIDENTIFIERLOOSE]})(?:\\.(${u[d.XRANGEIDENTIFIERLOOSE]})(?:\\.(${u[d.XRANGEIDENTIFIERLOOSE]})(?:${u[d.PRERELEASELOOSE]})?${u[d.BUILD]}?)?)?`),m("XRANGE",`^${u[d.GTLT]}\\s*${u[d.XRANGEPLAIN]}$`),m("XRANGELOOSE",`^${u[d.GTLT]}\\s*${u[d.XRANGEPLAINLOOSE]}$`),m("COERCEPLAIN",`(^|[^\\d])(\\d{1,${s}})(?:\\.(\\d{1,${s}}))?(?:\\.(\\d{1,${s}}))?`),m("COERCE",`${u[d.COERCEPLAIN]}(?:$|[^\\d])`),m("COERCEFULL",u[d.COERCEPLAIN]+`(?:${u[d.PRERELEASE]})?`+`(?:${u[d.BUILD]})?`+"(?:$|[^\\d])"),m("COERCERTL",u[d.COERCE],!0),m("COERCERTLFULL",u[d.COERCEFULL],!0),m("LONETILDE","(?:~>?)"),m("TILDETRIM",`(\\s*)${u[d.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",m("TILDE",`^${u[d.LONETILDE]}${u[d.XRANGEPLAIN]}$`),m("TILDELOOSE",`^${u[d.LONETILDE]}${u[d.XRANGEPLAINLOOSE]}$`),m("LONECARET","(?:\\^)"),m("CARETTRIM",`(\\s*)${u[d.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",m("CARET",`^${u[d.LONECARET]}${u[d.XRANGEPLAIN]}$`),m("CARETLOOSE",`^${u[d.LONECARET]}${u[d.XRANGEPLAINLOOSE]}$`),m("COMPARATORLOOSE",`^${u[d.GTLT]}\\s*(${u[d.LOOSEPLAIN]})$|^$`),m("COMPARATOR",`^${u[d.GTLT]}\\s*(${u[d.FULLPLAIN]})$|^$`),m("COMPARATORTRIM",`(\\s*)${u[d.GTLT]}\\s*(${u[d.LOOSEPLAIN]}|${u[d.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",m("HYPHENRANGE",`^\\s*(${u[d.XRANGEPLAIN]})\\s+-\\s+(${u[d.XRANGEPLAIN]})\\s*$`),m("HYPHENRANGELOOSE",`^\\s*(${u[d.XRANGEPLAINLOOSE]})\\s+-\\s+(${u[d.XRANGEPLAINLOOSE]})\\s*$`),m("STAR","(<|>)?=?\\s*\\*"),m("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),m("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")},4497(e,t,r){"use strict";let s=r(4713);e.exports=(e,t,r)=>s(e,t,">",r)},3490(e,t,r){"use strict";let s=r(2069);e.exports=(e,t,r)=>(e=new s(e,r),t=new s(t,r),e.intersects(t,r))},9272(e,t,r){"use strict";let s=r(4713);e.exports=(e,t,r)=>s(e,t,"<",r)},7114(e,t,r){"use strict";let s=r(2398),o=r(2069);e.exports=(e,t,r)=>{let i=null,n=null,a=null;try{a=new o(t,r)}catch(e){return null}return e.forEach(e=>{a.test(e)&&(!i||-1===n.compare(e))&&(n=new s(i=e,r))}),i}},1008(e,t,r){"use strict";let s=r(2398),o=r(2069);e.exports=(e,t,r)=>{let i=null,n=null,a=null;try{a=new o(t,r)}catch(e){return null}return e.forEach(e=>{a.test(e)&&(!i||1===n.compare(e))&&(n=new s(i=e,r))}),i}},203(e,t,r){"use strict";let s=r(2398),o=r(2069),i=r(1686);e.exports=(e,t)=>{e=new o(e,t);let r=new s("0.0.0");if(e.test(r)||(r=new s("0.0.0-0"),e.test(r)))return r;r=null;for(let t=0;t<e.set.length;++t){let o=e.set[t],n=null;o.forEach(e=>{let t=new s(e.semver.version);switch(e.operator){case">":0===t.prerelease.length?t.patch++:t.prerelease.push(0),t.raw=t.format();case"":case">=":(!n||i(t,n))&&(n=t);break;case"<":case"<=":break;default:throw Error(`Unexpected operation: ${e.operator}`)}}),n&&(!r||i(r,n))&&(r=n)}return r&&e.test(r)?r:null}},4713(e,t,r){"use strict";let s=r(2398),o=r(8610),{ANY:i}=o,n=r(2069),a=r(4056),l=r(1686),u=r(7257),c=r(5850),d=r(6479);e.exports=(e,t,r,p)=>{let f,h,m,y,v;switch(e=new s(e,p),t=new n(t,p),r){case">":f=l,h=c,m=u,y=">",v=">=";break;case"<":f=u,h=d,m=l,y="<",v="<=";break;default:throw TypeError('Must provide a hilo val of "<" or ">"')}if(a(e,t,p))return!1;for(let r=0;r<t.set.length;++r){let s=t.set[r],n=null,a=null;if(s.forEach(e=>{e.semver===i&&(e=new o(">=0.0.0")),n=n||e,a=a||e,f(e.semver,n.semver,p)?n=e:m(e.semver,a.semver,p)&&(a=e)}),n.operator===y||n.operator===v||(!a.operator||a.operator===y)&&h(e,a.semver)||a.operator===v&&m(e,a.semver))return!1}return!0}},4039(e,t,r){"use strict";let s=r(4056),o=r(6958);e.exports=(e,t,r)=>{let i=[],n=null,a=null,l=e.sort((e,t)=>o(e,t,r));for(let e of l)s(e,t,r)?(a=e,n||(n=e)):(a&&i.push([n,a]),a=null,n=null);n&&i.push([n,null]);let u=[];for(let[e,t]of i)e===t?u.push(e):t||e!==l[0]?t?e===l[0]?u.push(`<=${t}`):u.push(`${e} - ${t}`):u.push(`>=${e}`):u.push("*");let c=u.join(" || "),d="string"==typeof t.raw?t.raw:String(t);return c.length<d.length?c:t}},22(e,t,r){"use strict";let s=r(2069),o=r(8610),{ANY:i}=o,n=r(4056),a=r(6958),l=[new o(">=0.0.0-0")],u=[new o(">=0.0.0")],c=(e,t,r)=>{let s,o,c,f,h,m,y;if(e===t)return!0;if(1===e.length&&e[0].semver===i)if(1===t.length&&t[0].semver===i)return!0;else e=r.includePrerelease?l:u;if(1===t.length&&t[0].semver===i)if(r.includePrerelease)return!0;else t=u;let v=new Set;for(let t of e)">"===t.operator||">="===t.operator?s=d(s,t,r):"<"===t.operator||"<="===t.operator?o=p(o,t,r):v.add(t.semver);if(v.size>1)return null;if(s&&o&&((c=a(s.semver,o.semver,r))>0||0===c&&(">="!==s.operator||"<="!==o.operator)))return null;for(let e of v){if(s&&!n(e,String(s),r)||o&&!n(e,String(o),r))return null;for(let s of t)if(!n(e,String(s),r))return!1;return!0}let g=!!o&&!r.includePrerelease&&!!o.semver.prerelease.length&&o.semver,_=!!s&&!r.includePrerelease&&!!s.semver.prerelease.length&&s.semver;for(let e of(g&&1===g.prerelease.length&&"<"===o.operator&&0===g.prerelease[0]&&(g=!1),t)){if(y=y||">"===e.operator||">="===e.operator,m=m||"<"===e.operator||"<="===e.operator,s){if(_&&e.semver.prerelease&&e.semver.prerelease.length&&e.semver.major===_.major&&e.semver.minor===_.minor&&e.semver.patch===_.patch&&(_=!1),">"===e.operator||">="===e.operator){if((f=d(s,e,r))===e&&f!==s)return!1}else if(">="===s.operator&&!n(s.semver,String(e),r))return!1}if(o){if(g&&e.semver.prerelease&&e.semver.prerelease.length&&e.semver.major===g.major&&e.semver.minor===g.minor&&e.semver.patch===g.patch&&(g=!1),"<"===e.operator||"<="===e.operator){if((h=p(o,e,r))===e&&h!==o)return!1}else if("<="===o.operator&&!n(o.semver,String(e),r))return!1}if(!e.operator&&(o||s)&&0!==c)return!1}return(!s||!m||!!o||0===c)&&(!o||!y||!!s||0===c)&&!_&&!g&&!0},d=(e,t,r)=>{if(!e)return t;let s=a(e.semver,t.semver,r);return s>0?e:s<0||">"===t.operator&&">="===e.operator?t:e},p=(e,t,r)=>{if(!e)return t;let s=a(e.semver,t.semver,r);return s<0?e:s>0||"<"===t.operator&&"<="===e.operator?t:e};e.exports=(e,t,r={})=>{if(e===t)return!0;e=new s(e,r),t=new s(t,r);let o=!1;e:for(let s of e.set){for(let e of t.set){let t=c(s,e,r);if(o=o||null!==t,t)continue e}if(o)return!1}return!0}},6613(e,t,r){"use strict";let s=r(2069);e.exports=(e,t)=>new s(e,t).set.map(e=>e.map(e=>e.value).join(" ").trim().split(" "))},5372(e,t,r){"use strict";let s=r(2069);e.exports=(e,t)=>{try{return new s(e,t).range||"*"}catch(e){return null}}},600(e,t,r){"use strict";let s=r(9638);e.exports=(e="")=>{let t=e.match(s);if(!t)return null;let[r,o]=t[0].replace(/#! ?/,"").split(" "),i=r.split("/").pop();return"env"===i?o:o?`${i} ${o}`:i}},9638(e){"use strict";e.exports=/^#!(.*)/},1905(e,t,r){let s="win32"===process.platform||"cygwin"===process.env.OSTYPE||"msys"===process.env.OSTYPE,o=r(6928),i=s?";":":",n=r(9344),a=e=>Object.assign(Error(`not found: ${e}`),{code:"ENOENT"}),l=(e,t)=>{let r=t.colon||i,o=e.match(/\//)||s&&e.match(/\\/)?[""]:[...s?[process.cwd()]:[],...(t.path||process.env.PATH||"").split(r)],n=s?t.pathExt||process.env.PATHEXT||".EXE;.CMD;.BAT;.COM":"",a=s?n.split(r):[""];return s&&-1!==e.indexOf(".")&&""!==a[0]&&a.unshift(""),{pathEnv:o,pathExt:a,pathExtExe:n}},u=(e,t,r)=>{"function"==typeof t&&(r=t,t={}),t||(t={});let{pathEnv:s,pathExt:i,pathExtExe:u}=l(e,t),c=[],d=r=>new Promise((i,n)=>{if(r===s.length)return t.all&&c.length?i(c):n(a(e));let l=s[r],u=/^".*"$/.test(l)?l.slice(1,-1):l,d=o.join(u,e);i(p(!u&&/^\.[\\\/]/.test(e)?e.slice(0,2)+d:d,r,0))}),p=(e,r,s)=>new Promise((o,a)=>{if(s===i.length)return o(d(r+1));let l=i[s];n(e+l,{pathExt:u},(i,n)=>{if(!i&&n)if(!t.all)return o(e+l);else c.push(e+l);return o(p(e,r,s+1))})});return r?d(0).then(e=>r(null,e),r):d(0)};e.exports=u,u.sync=(e,t)=>{let{pathEnv:r,pathExt:s,pathExtExe:i}=l(e,t=t||{}),u=[];for(let a=0;a<r.length;a++){let l=r[a],c=/^".*"$/.test(l)?l.slice(1,-1):l,d=o.join(c,e),p=!c&&/^\.[\\\/]/.test(e)?e.slice(0,2)+d:d;for(let e=0;e<s.length;e++){let r=p+s[e];try{if(n.sync(r,{pathExt:i}))if(!t.all)return r;else u.push(r)}catch(e){}}}if(t.all&&u.length)return u;if(t.nothrow)return null;throw a(e)}},181(e){"use strict";e.exports=require("buffer")},5317(e){"use strict";e.exports=require("child_process")},6982(e){"use strict";e.exports=require("crypto")},9896(e){"use strict";e.exports=require("fs")},7598(e){"use strict";e.exports=require("node:crypto")},857(e){"use strict";e.exports=require("os")},6928(e){"use strict";e.exports=require("path")},2203(e){"use strict";e.exports=require("stream")},9023(e){"use strict";e.exports=require("util")},2741(t){"use strict";t.exports=e},5019(e,t,r){"use strict";let{normalizeIPv6:s,removeDotSegments:o,recomposeAuthority:i,normalizeComponentEncoding:n,isIPv4:a,nonSimpleDomain:l}=r(6214),{SCHEMES:u,getSchemeHandler:c}=r(1528);function d(e,t,r,s){let i={};return s||(e=h(p(e,r),r),t=h(p(t,r),r)),!(r=r||{}).tolerant&&t.scheme?(i.scheme=t.scheme,i.userinfo=t.userinfo,i.host=t.host,i.port=t.port,i.path=o(t.path||""),i.query=t.query):(void 0!==t.userinfo||void 0!==t.host||void 0!==t.port?(i.userinfo=t.userinfo,i.host=t.host,i.port=t.port,i.path=o(t.path||""),i.query=t.query):(t.path?("/"===t.path[0]?i.path=o(t.path):(void 0===e.userinfo&&void 0===e.host&&void 0===e.port||e.path?e.path?i.path=e.path.slice(0,e.path.lastIndexOf("/")+1)+t.path:i.path=t.path:i.path="/"+t.path,i.path=o(i.path)),i.query=t.query):(i.path=e.path,void 0!==t.query?i.query=t.query:i.query=e.query),i.userinfo=e.userinfo,i.host=e.host,i.port=e.port),i.scheme=e.scheme),i.fragment=t.fragment,i}function p(e,t){let r={host:e.host,scheme:e.scheme,userinfo:e.userinfo,port:e.port,path:e.path,query:e.query,nid:e.nid,nss:e.nss,uuid:e.uuid,fragment:e.fragment,reference:e.reference,resourceName:e.resourceName,secure:e.secure,error:""},s=Object.assign({},t),n=[],a=c(s.scheme||r.scheme);a&&a.serialize&&a.serialize(r,s),void 0!==r.path&&(s.skipEscape?r.path=unescape(r.path):(r.path=escape(r.path),void 0!==r.scheme&&(r.path=r.path.split("%3A").join(":")))),"suffix"!==s.reference&&r.scheme&&n.push(r.scheme,":");let l=i(r);if(void 0!==l&&("suffix"!==s.reference&&n.push("//"),n.push(l),r.path&&"/"!==r.path[0]&&n.push("/")),void 0!==r.path){let e=r.path;s.absolutePath||a&&a.absolutePath||(e=o(e)),void 0===l&&"/"===e[0]&&"/"===e[1]&&(e="/%2F"+e.slice(2)),n.push(e)}return void 0!==r.query&&n.push("?",r.query),void 0!==r.fragment&&n.push("#",r.fragment),n.join("")}let f=/^(?:([^#/:?]+):)?(?:\/\/((?:([^#/?@]*)@)?(\[[^#/?\]]+\]|[^#/:?]*)(?::(\d*))?))?([^#?]*)(?:\?([^#]*))?(?:#((?:.|[\n\r])*))?/u;function h(e,t){let r=Object.assign({},t),o={scheme:void 0,userinfo:void 0,host:"",port:void 0,path:"",query:void 0,fragment:void 0},i=!1;"suffix"===r.reference&&(e=r.scheme?r.scheme+":"+e:"//"+e);let n=e.match(f);if(n){if(o.scheme=n[1],o.userinfo=n[3],o.host=n[4],o.port=parseInt(n[5],10),o.path=n[6]||"",o.query=n[7],o.fragment=n[8],isNaN(o.port)&&(o.port=n[5]),o.host)if(!1===a(o.host)){let e=s(o.host);o.host=e.host.toLowerCase(),i=e.isIPV6}else i=!0;void 0!==o.scheme||void 0!==o.userinfo||void 0!==o.host||void 0!==o.port||void 0!==o.query||o.path?void 0===o.scheme?o.reference="relative":void 0===o.fragment?o.reference="absolute":o.reference="uri":o.reference="same-document",r.reference&&"suffix"!==r.reference&&r.reference!==o.reference&&(o.error=o.error||"URI is not a "+r.reference+" reference.");let t=c(r.scheme||o.scheme);if(!r.unicodeSupport&&(!t||!t.unicodeSupport)&&o.host&&(r.domainHost||t&&t.domainHost)&&!1===i&&l(o.host))try{o.host=URL.domainToASCII(o.host.toLowerCase())}catch(e){o.error=o.error||"Host's domain name can not be converted to ASCII: "+e}(!t||t&&!t.skipNormalize)&&(-1!==e.indexOf("%")&&(void 0!==o.scheme&&(o.scheme=unescape(o.scheme)),void 0!==o.host&&(o.host=unescape(o.host))),o.path&&(o.path=escape(unescape(o.path))),o.fragment&&(o.fragment=encodeURI(decodeURIComponent(o.fragment)))),t&&t.parse&&t.parse(o,r)}else o.error=o.error||"URI can not be parsed.";return o}let m={SCHEMES:u,normalize:function(e,t){return"string"==typeof e?e=p(h(e,t),t):"object"==typeof e&&(e=h(p(e,t),t)),e},resolve:function(e,t,r){let s=r?Object.assign({scheme:"null"},r):{scheme:"null"},o=d(h(e,s),h(t,s),s,!0);return s.skipEscape=!0,p(o,s)},resolveComponent:d,equal:function(e,t,r){return"string"==typeof e?e=p(n(h(e=unescape(e),r),!0),{...r,skipEscape:!0}):"object"==typeof e&&(e=p(n(e,!0),{...r,skipEscape:!0})),"string"==typeof t?t=p(n(h(t=unescape(t),r),!0),{...r,skipEscape:!0}):"object"==typeof t&&(t=p(n(t,!0),{...r,skipEscape:!0})),e.toLowerCase()===t.toLowerCase()},serialize:p,parse:h};e.exports=m,e.exports.default=m,e.exports.fastUri=m},1528(e,t,r){"use strict";let{isUUID:s}=r(6214),o=/([\da-z][\d\-a-z]{0,31}):((?:[\w!$'()*+,\-.:;=@]|%[\da-f]{2})+)/iu,i=["http","https","ws","wss","urn","urn:uuid"];function n(e){return!0===e.secure||!1!==e.secure&&!!e.scheme&&3===e.scheme.length&&("w"===e.scheme[0]||"W"===e.scheme[0])&&("s"===e.scheme[1]||"S"===e.scheme[1])&&("s"===e.scheme[2]||"S"===e.scheme[2])}function a(e){return e.host||(e.error=e.error||"HTTP URIs must have a host."),e}function l(e){let t="https"===String(e.scheme).toLowerCase();return(e.port===(t?443:80)||""===e.port)&&(e.port=void 0),e.path||(e.path="/"),e}let u={scheme:"http",domainHost:!0,parse:a,serialize:l},c={scheme:"https",domainHost:u.domainHost,parse:a,serialize:l},d={scheme:"ws",domainHost:!0,parse:function(e){return e.secure=n(e),e.resourceName=(e.path||"/")+(e.query?"?"+e.query:""),e.path=void 0,e.query=void 0,e},serialize:function(e){if((e.port===(n(e)?443:80)||""===e.port)&&(e.port=void 0),"boolean"==typeof e.secure&&(e.scheme=e.secure?"wss":"ws",e.secure=void 0),e.resourceName){let[t,r]=e.resourceName.split("?");e.path=t&&"/"!==t?t:void 0,e.query=r,e.resourceName=void 0}return e.fragment=void 0,e}},p={scheme:"wss",domainHost:d.domainHost,parse:d.parse,serialize:d.serialize},f={http:u,https:c,ws:d,wss:p,urn:{scheme:"urn",parse:function(e,t){if(!e.path)return e.error="URN can not be parsed",e;let r=e.path.match(o);if(r){let s=t.scheme||e.scheme||"urn";e.nid=r[1].toLowerCase(),e.nss=r[2];let o=h(`${s}:${t.nid||e.nid}`);e.path=void 0,o&&(e=o.parse(e,t))}else e.error=e.error||"URN can not be parsed.";return e},serialize:function(e,t){if(void 0===e.nid)throw Error("URN without nid cannot be serialized");let r=t.scheme||e.scheme||"urn",s=e.nid.toLowerCase(),o=h(`${r}:${t.nid||s}`);o&&(e=o.serialize(e,t));let i=e,n=e.nss;return i.path=`${s||t.nid}:${n}`,t.skipEscape=!0,i},skipNormalize:!0},"urn:uuid":{scheme:"urn:uuid",parse:function(e,t){return e.uuid=e.nss,e.nss=void 0,t.tolerant||e.uuid&&s(e.uuid)||(e.error=e.error||"UUID is not valid."),e},serialize:function(e){return e.nss=(e.uuid||"").toLowerCase(),e},skipNormalize:!0}};function h(e){return e&&(f[e]||f[e.toLowerCase()])||void 0}Object.setPrototypeOf(f,null),e.exports={wsIsSecure:n,SCHEMES:f,isValidSchemeName:function(e){return -1!==i.indexOf(e)},getSchemeHandler:h}},6214(e){"use strict";let t=RegExp.prototype.test.bind(/^[\da-f]{8}-[\da-f]{4}-[\da-f]{4}-[\da-f]{4}-[\da-f]{12}$/iu),r=RegExp.prototype.test.bind(/^(?:(?:25[0-5]|2[0-4]\d|1\d{2}|[1-9]\d|\d)\.){3}(?:25[0-5]|2[0-4]\d|1\d{2}|[1-9]\d|\d)$/u);function s(e){let t="",r=0,s=0;for(s=0;s<e.length;s++)if(48!==(r=e[s].charCodeAt(0))){if(!(r>=48&&r<=57||r>=65&&r<=70||r>=97&&r<=102))return"";t+=e[s];break}for(s+=1;s<e.length;s++){if(!((r=e[s].charCodeAt(0))>=48&&r<=57||r>=65&&r<=70||r>=97&&r<=102))return"";t+=e[s]}return t}function o(e){return e.length=0,!0}function i(e,t,r){if(e.length){let o=s(e);if(""===o)return r.error=!0,!1;t.push(o),e.length=0}return!0}function n(e){if(2>function(e,t){let r=0;for(let t=0;t<e.length;t++)":"===e[t]&&r++;return r}(e,":"))return{host:e,isIPV6:!1};let t=function(e){let t=0,r={error:!1,address:"",zone:""},n=[],a=[],l=!1,u=!1,c=i;for(let s=0;s<e.length;s++){let i=e[s];if("["!==i&&"]"!==i)if(":"===i){if(!0===l&&(u=!0),!c(a,n,r))break;if(++t>7){r.error=!0;break}s>0&&":"===e[s-1]&&(l=!0),n.push(":");continue}else if("%"===i){if(!c(a,n,r))break;c=o}else{a.push(i);continue}}return a.length&&(c===o?r.zone=a.join(""):u?n.push(a.join("")):n.push(s(a))),r.address=n.join(""),r}(e);if(t.error)return{host:e,isIPV6:!1};{let e=t.address,r=t.address;return t.zone&&(e+="%"+t.zone,r+="%25"+t.zone),{host:e,isIPV6:!0,escapedHost:r}}}e.exports={nonSimpleDomain:RegExp.prototype.test.bind(/[^!"$&'()*+,\-.;=_`a-z{}~]/u),recomposeAuthority:function(e){let t=[];if(void 0!==e.userinfo&&(t.push(e.userinfo),t.push("@")),void 0!==e.host){let s=unescape(e.host);if(!r(s)){let t=n(s);s=!0===t.isIPV6?`[${t.escapedHost}]`:e.host}t.push(s)}return("number"==typeof e.port||"string"==typeof e.port)&&(t.push(":"),t.push(String(e.port))),t.length?t.join(""):void 0},normalizeComponentEncoding:function(e,t){let r=!0!==t?escape:unescape;return void 0!==e.scheme&&(e.scheme=r(e.scheme)),void 0!==e.userinfo&&(e.userinfo=r(e.userinfo)),void 0!==e.host&&(e.host=r(e.host)),void 0!==e.path&&(e.path=r(e.path)),void 0!==e.query&&(e.query=r(e.query)),void 0!==e.fragment&&(e.fragment=r(e.fragment)),e},removeDotSegments:function(e){let t=e,r=[],s=-1,o=0;for(;o=t.length;){if(1===o)if("."===t)break;else if("/"===t){r.push("/");break}else{r.push(t);break}if(2===o){if("."===t[0]){if("."===t[1])break;else if("/"===t[1]){t=t.slice(2);continue}}else if("/"===t[0]&&("."===t[1]||"/"===t[1])){r.push("/");break}}else if(3===o&&"/.."===t){0!==r.length&&r.pop(),r.push("/");break}if("."===t[0]){if("."===t[1]){if("/"===t[2]){t=t.slice(3);continue}}else if("/"===t[1]){t=t.slice(2);continue}}else if("/"===t[0]&&"."===t[1]){if("/"===t[2]){t=t.slice(2);continue}else if("."===t[2]&&"/"===t[3]){t=t.slice(3),0!==r.length&&r.pop();continue}}if(-1===(s=t.indexOf("/",1))){r.push(t);break}r.push(t.slice(0,s)),t=t.slice(s)}return r.join("")},isIPv4:r,isUUID:t,normalizeIPv6:n,stringArrayToHexStripped:s}},2200(e){"use strict";e.exports=JSON.parse('{"$id":"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#","description":"Meta-schema for $data reference (JSON AnySchema extension proposal)","type":"object","required":["$data"],"properties":{"$data":{"type":"string","anyOf":[{"format":"relative-json-pointer"},{"format":"json-pointer"}]}},"additionalProperties":false}')},7578(e){"use strict";e.exports=JSON.parse('{"$schema":"http://json-schema.org/draft-07/schema#","$id":"http://json-schema.org/draft-07/schema#","title":"Core schema meta-schema","definitions":{"schemaArray":{"type":"array","minItems":1,"items":{"$ref":"#"}},"nonNegativeInteger":{"type":"integer","minimum":0},"nonNegativeIntegerDefault0":{"allOf":[{"$ref":"#/definitions/nonNegativeInteger"},{"default":0}]},"simpleTypes":{"enum":["array","boolean","integer","null","number","object","string"]},"stringArray":{"type":"array","items":{"type":"string"},"uniqueItems":true,"default":[]}},"type":["object","boolean"],"properties":{"$id":{"type":"string","format":"uri-reference"},"$schema":{"type":"string","format":"uri"},"$ref":{"type":"string","format":"uri-reference"},"$comment":{"type":"string"},"title":{"type":"string"},"description":{"type":"string"},"default":true,"readOnly":{"type":"boolean","default":false},"examples":{"type":"array","items":true},"multipleOf":{"type":"number","exclusiveMinimum":0},"maximum":{"type":"number"},"exclusiveMaximum":{"type":"number"},"minimum":{"type":"number"},"exclusiveMinimum":{"type":"number"},"maxLength":{"$ref":"#/definitions/nonNegativeInteger"},"minLength":{"$ref":"#/definitions/nonNegativeIntegerDefault0"},"pattern":{"type":"string","format":"regex"},"additionalItems":{"$ref":"#"},"items":{"anyOf":[{"$ref":"#"},{"$ref":"#/definitions/schemaArray"}],"default":true},"maxItems":{"$ref":"#/definitions/nonNegativeInteger"},"minItems":{"$ref":"#/definitions/nonNegativeIntegerDefault0"},"uniqueItems":{"type":"boolean","default":false},"contains":{"$ref":"#"},"maxProperties":{"$ref":"#/definitions/nonNegativeInteger"},"minProperties":{"$ref":"#/definitions/nonNegativeIntegerDefault0"},"required":{"$ref":"#/definitions/stringArray"},"additionalProperties":{"$ref":"#"},"definitions":{"type":"object","additionalProperties":{"$ref":"#"},"default":{}},"properties":{"type":"object","additionalProperties":{"$ref":"#"},"default":{}},"patternProperties":{"type":"object","additionalProperties":{"$ref":"#"},"propertyNames":{"format":"regex"},"default":{}},"dependencies":{"type":"object","additionalProperties":{"anyOf":[{"$ref":"#"},{"$ref":"#/definitions/stringArray"}]}},"propertyNames":{"$ref":"#"},"const":true,"enum":{"type":"array","items":true,"minItems":1,"uniqueItems":true},"type":{"anyOf":[{"$ref":"#/definitions/simpleTypes"},{"type":"array","items":{"$ref":"#/definitions/simpleTypes"},"minItems":1,"uniqueItems":true}]},"format":{"type":"string"},"contentMediaType":{"type":"string"},"contentEncoding":{"type":"string"},"if":{"$ref":"#"},"then":{"$ref":"#"},"else":{"$ref":"#"},"allOf":{"$ref":"#/definitions/schemaArray"},"anyOf":{"$ref":"#/definitions/schemaArray"},"oneOf":{"$ref":"#/definitions/schemaArray"},"not":{"$ref":"#"}},"default":true}')},4519(e){"use strict";e.exports=JSON.parse('{"name":"dotenv","version":"16.6.1","description":"Loads environment variables from .env file","main":"lib/main.js","types":"lib/main.d.ts","exports":{".":{"types":"./lib/main.d.ts","require":"./lib/main.js","default":"./lib/main.js"},"./config":"./config.js","./config.js":"./config.js","./lib/env-options":"./lib/env-options.js","./lib/env-options.js":"./lib/env-options.js","./lib/cli-options":"./lib/cli-options.js","./lib/cli-options.js":"./lib/cli-options.js","./package.json":"./package.json"},"scripts":{"dts-check":"tsc --project tests/types/tsconfig.json","lint":"standard","pretest":"npm run lint && npm run dts-check","test":"tap run --allow-empty-coverage --disable-coverage --timeout=60000","test:coverage":"tap run --show-full-coverage --timeout=60000 --coverage-report=text --coverage-report=lcov","prerelease":"npm test","release":"standard-version"},"repository":{"type":"git","url":"git://github.com/motdotla/dotenv.git"},"homepage":"https://github.com/motdotla/dotenv#readme","funding":"https://dotenvx.com","keywords":["dotenv","env",".env","environment","variables","config","settings"],"readmeFilename":"README.md","license":"BSD-2-Clause","devDependencies":{"@types/node":"^18.11.3","decache":"^4.6.2","sinon":"^14.0.1","standard":"^17.0.0","standard-version":"^9.5.0","tap":"^19.2.0","typescript":"^4.8.4"},"engines":{"node":">=12"},"browser":{"fs":false}}')},8330(e){"use strict";e.exports=JSON.parse('{"name":"xmcp","description":"The MCP framework","version":"0.0.3","author":{"name":"xmcp","email":"support@xmcp.dev","url":"https://xmcp.dev"},"contributors":[{"name":"Valentina Bearzotti","email":"valebearzotti1@gmail.com","url":"https://github.com/valebearzotti"},{"name":"Jose Rago","email":"jose@basement.studio","url":"https://github.com/ragojose"}],"license":"MIT","keywords":["mcp","modelcontextprotocol","http","stdio"],"repository":{"type":"git","url":"https://github.com/basementstudio/xmcp"},"homepage":"https://xmcp.dev","type":"commonjs","main":"./dist/index.js","types":"./dist/index.d.ts","bin":{"xmcp":"dist/cli.js"},"files":["dist"],"scripts":{"dev":"cross-env NODE_ENV=development tsx --watch --tsconfig ./bundler.tsconfig.json ./bundler/index.ts","build":"cross-env NODE_ENV=production tsx --tsconfig ./bundler.tsconfig.json ./bundler/index.ts","analyze":"cross-env GENERATE_STATS=true pnpm build && pnpm tsx scripts/analyze-rspack-stats.ts","test:config":"node --import tsx --test src/compiler/config/__tests__/*.test.ts"},"dependencies":{"@modelcontextprotocol/sdk":"^1.24.3","@rspack/core":"^1.6.7","postcss-loader":"^8.2.0","ts-checker-rspack-plugin":"^1.2.1","typescript":"^5.9.3"},"devDependencies":{"@types/async-retry":"^1.4.9","@types/content-type":"^1.1.9","@types/express":"^5.0.6","@types/fs-extra":"^11.0.4","@types/jsonwebtoken":"^9.0.10","@types/node":"^22.19.2","@types/react":"^19.2.7","@types/react-dom":"^19.2.3","async-retry":"^1.3.3","chalk":"^5.6.2","chokidar":"^3.6.0","ci-info":"^4.3.1","commander":"^11.1.0","content-type":"^1.0.5","cross-env":"^7.0.3","del":"^7.1.0","dotenv":"^16.6.1","express":"^4.22.1","fs-extra":"^11.3.2","glob":"^11.1.0","is-docker":"^4.0.0","is-wsl":"^3.1.0","json5":"^2.2.3","jsonwebtoken":"^9.0.3","memfs":"^4.51.1","raw-body":"^3.0.2","tsx":"^4.21.0"},"peerDependencies":{"react":">=19.0.0","react-dom":">=19.0.0","zod":"^3.25.76"},"peerDependenciesMeta":{"react":{"optional":true},"react-dom":{"optional":true}}}')}},o={};function i(e){var t=o[e];if(void 0!==t)return t.exports;var r=o[e]={exports:{}};return s[e](r,r.exports,i),r.exports}i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},r=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,i.t=function(e,s){if(1&s&&(e=this(e)),8&s||"object"==typeof e&&e&&(4&s&&e.__esModule||16&s&&"function"==typeof e.then))return e;var o=Object.create(null);i.r(o);var n={};t=t||[null,r({}),r([]),r(r)];for(var a=2&s&&e;("object"==typeof a||"function"==typeof a)&&!~t.indexOf(a);a=r(a))Object.getOwnPropertyNames(a).forEach(t=>{n[t]=()=>e[t]});return n.default=()=>e,i.d(o,n),o},i.d=(e,t)=>{for(var r in t)i.o(t,r)&&!i.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var n={};return(()=>{"use strict";let e,t;i.r(n),i.d(n,{disconnectSTDIOClient:()=>n2,apiKeyAuthMiddleware:()=>v,isEnvHeader:()=>nG,createContext:()=>k,listSTDIOClientTools:()=>n0,createSTDIOClient:()=>nQ,callSTDIOClientTool:()=>n1,headersToRecord:()=>nB,jwtAuthMiddleware:()=>$,createHTTPClient:()=>nY,completable:()=>T});var r,s,o,a,l,u,c,d,p=i(8583),f=i.n(p),h=i(2741);let m=h.z.object({apiKey:h.z.string().optional(),headerName:h.z.string().optional(),validateApiKey:h.z.function().args(h.z.string()).returns(h.z.promise(h.z.boolean())).optional()}).strict().refine(e=>void 0!==e.apiKey||void 0!==e.validateApiKey,{message:"Either 'apiKey' or 'validateApiKey' must be provided"}).refine(e=>void 0===e.apiKey||void 0===e.validateApiKey,{message:"'apiKey' and 'validateApiKey' are mutually exclusive - provide only one"}),y="Unauthorized: Missing or invalid API key";function v(e){let t=m.safeParse(e);if(!t.success){let r="apiKey"in e,s="validateApiKey"in e;if(r&&s)throw Error("'apiKey' and 'validateApiKey' are mutually exclusive - provide only one");if(r||s)throw Error(`Invalid configuration: ${t.error.message}`);throw Error("Either 'apiKey' or 'validateApiKey' must be provided")}let r=e.headerName??"x-api-key",s="apiKey"in e?e.apiKey:void 0,o="validateApiKey"in e?e.validateApiKey:void 0;return async(t,i,n)=>{let a=t.header(r);!a||"apiKey"in e&&a!==s||o&&!await o(a)?i.status(401).json({error:y}):n()}}var g=i(8400),_=i.n(g);function $(e){return(t,r,s)=>{let o=t.header("Authorization");if(!o||!o.startsWith("Bearer "))return void r.status(401).json({error:"Unauthorized: Missing or malformed Authorization header"});let i=o.slice(7).trim();if(!i)return void r.status(401).json({error:"Unauthorized: Missing access token"});try{let{secret:r,...o}=e;t.user=_().verify(i,r,o),s()}catch(e){r.status(401).json({error:"Unauthorized: Invalid or expired token"})}}}let w=require("async_hooks"),b=(e,t)=>{globalThis[e]=t},E=e=>globalThis[e];function k({name:e}){let t=Symbol.for(`xmcp-context-${e}`),r=Symbol.for(`xmcp-context-${e}-fallback-store`);if(E(t))return E(t);let s=new w.AsyncLocalStorage,o=globalThis[r]??{current:null};b(r,o);let i={provider:(e,t)=>(o.current=e,s.run(e,t)),getContext:()=>{let t=s.getStore();if(t)return t;if(o.current)return o.current;throw Error(`getContext() can only be used within the ${e} context.`)},setContext:t=>{let r=s.getStore()??o.current;if(!r)throw Error(`setContext() can only be used within the ${e} context.`);Object.assign(r,t)}};return b(t,i),i}let S=Symbol.for("mcp.completable");function T(e,t){return Object.defineProperty(e,S,{value:{complete:t},enumerable:!1,writable:!1,configurable:!1}),e}(c||(c={})).Completable="McpCompletable";let x=Object.freeze({status:"aborted"});function P(e,t,r){function s(r,s){var o;for(let i in Object.defineProperty(r,"_zod",{value:r._zod??{},enumerable:!1}),(o=r._zod).traits??(o.traits=new Set),r._zod.traits.add(e),t(r,s),n.prototype)i in r||Object.defineProperty(r,i,{value:n.prototype[i].bind(r)});r._zod.constr=n,r._zod.def=s}let o=r?.Parent??Object;class i extends o{}function n(e){var t;let o=r?.Parent?new i:this;for(let r of(s(o,e),(t=o._zod).deferred??(t.deferred=[]),o._zod.deferred))r();return o}return Object.defineProperty(i,"name",{value:e}),Object.defineProperty(n,"init",{value:s}),Object.defineProperty(n,Symbol.hasInstance,{value:t=>!!r?.Parent&&t instanceof r.Parent||t?._zod?.traits?.has(e)}),Object.defineProperty(n,"name",{value:e}),n}Symbol("zod_brand");class I extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}let O={};function R(e){return e&&Object.assign(O,e),O}function j(e,t){return"bigint"==typeof t?t.toString():t}function N(e){return{get value(){{let t=e();return Object.defineProperty(this,"value",{value:t}),t}}}}function A(e){let t=+!!e.startsWith("^"),r=e.endsWith("$")?e.length-1:e.length;return e.slice(t,r)}function z(e,t,r){Object.defineProperty(e,t,{get(){{let s=r();return e[t]=s,s}},set(r){Object.defineProperty(e,t,{value:r})},configurable:!0})}function C(e,t,r){Object.defineProperty(e,t,{value:r,writable:!0,enumerable:!0,configurable:!0})}function M(e){return JSON.stringify(e)}let D=Error.captureStackTrace?Error.captureStackTrace:(...e)=>{};function L(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)}let q=N(()=>{if("undefined"!=typeof navigator&&navigator?.userAgent?.includes("Cloudflare"))return!1;try{return Function(""),!0}catch(e){return!1}});function U(e){if(!1===L(e))return!1;let t=e.constructor;if(void 0===t)return!0;let r=t.prototype;return!1!==L(r)&&!1!==Object.prototype.hasOwnProperty.call(r,"isPrototypeOf")}let V=new Set(["string","number","symbol"]);function F(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function H(e,t,r){let s=new e._zod.constr(t??e._zod.def);return(!t||r?.parent)&&(s._zod.parent=e),s}function K(e){if(!e)return{};if("string"==typeof e)return{error:()=>e};if(e?.message!==void 0){if(e?.error!==void 0)throw Error("Cannot specify both `message` and `error` params");e.error=e.message}return(delete e.message,"string"==typeof e.error)?{...e,error:()=>e.error}:e}let Z={safeint:[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],int32:[-0x80000000,0x7fffffff],uint32:[0,0xffffffff],float32:[-34028234663852886e22,34028234663852886e22],float64:[-Number.MAX_VALUE,Number.MAX_VALUE]};function G(e,t=0){for(let r=t;r<e.issues.length;r++)if(e.issues[r]?.continue!==!0)return!0;return!1}function B(e,t){return t.map(t=>(t.path??(t.path=[]),t.path.unshift(e),t))}function W(e){return"string"==typeof e?e:e?.message}function J(e,t,r){let s={...e,path:e.path??[]};return e.message||(s.message=W(e.inst?._zod.def?.error?.(e))??W(t?.error?.(e))??W(r.customError?.(e))??W(r.localeError?.(e))??"Invalid input"),delete s.inst,delete s.continue,t?.reportInput||delete s.input,s}function X(e){return Array.isArray(e)?"array":"string"==typeof e?"string":"unknown"}function Y(...e){let[t,r,s]=e;return"string"==typeof t?{message:t,code:"custom",input:r,inst:s}:{...t}}let Q=(e,t)=>{e.name="$ZodError",Object.defineProperty(e,"_zod",{value:e._zod,enumerable:!1}),Object.defineProperty(e,"issues",{value:t,enumerable:!1}),Object.defineProperty(e,"message",{get:()=>JSON.stringify(t,j,2),enumerable:!0}),Object.defineProperty(e,"toString",{value:()=>e.message,enumerable:!1})},ee=P("$ZodError",Q),et=P("$ZodError",Q,{Parent:Error}),er=e=>(t,r,s)=>{let o=s?{...s,async:!1}:{async:!1},i=t._zod.run({value:r,issues:[]},o);if(i instanceof Promise)throw new I;return i.issues.length?{success:!1,error:new(e??ee)(i.issues.map(e=>J(e,o,R())))}:{success:!0,data:i.value}},es=er(et),eo=e=>async(t,r,s)=>{let o=s?Object.assign(s,{async:!0}):{async:!0},i=t._zod.run({value:r,issues:[]},o);return i instanceof Promise&&(i=await i),i.issues.length?{success:!1,error:new e(i.issues.map(e=>J(e,o,R())))}:{success:!0,data:i.value}},ei=eo(et);function en(e){return!!e._zod}function ea(e,t){return en(e)?es(e,t):e.safeParse(t)}function el(e){let t;if(e&&(t=en(e)?e._zod?.def?.shape:e.shape)){if("function"==typeof t)try{return t()}catch{return}return t}}let eu=/^[cC][^\s-]{8,}$/,ec=/^[0-9a-z]+$/,ed=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,ep=/^[0-9a-vA-V]{20}$/,ef=/^[A-Za-z0-9]{27}$/,eh=/^[a-zA-Z0-9_-]{21}$/,em=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,ey=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,ev=e=>e?RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${e}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000)$/,eg=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,e_=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,e$=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})$/,ew=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,eb=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,eE=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,ek=/^[A-Za-z0-9_-]*$/,eS=/^([a-zA-Z0-9-]+\.)*[a-zA-Z0-9-]+$/,eT=/^\+(?:[0-9]){6,14}[0-9]$/,ex="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",eP=RegExp(`^${ex}$`);function eI(e){let t="(?:[01]\\d|2[0-3]):[0-5]\\d";return"number"==typeof e.precision?-1===e.precision?`${t}`:0===e.precision?`${t}:[0-5]\\d`:`${t}:[0-5]\\d\\.\\d{${e.precision}}`:`${t}(?::[0-5]\\d(?:\\.\\d+)?)?`}let eO=/^\d+$/,eR=/^-?\d+(?:\.\d+)?/i,ej=/true|false/i,eN=/null/i,eA=/^[^A-Z]*$/,ez=/^[^a-z]*$/,eC=P("$ZodCheck",(e,t)=>{var r;e._zod??(e._zod={}),e._zod.def=t,(r=e._zod).onattach??(r.onattach=[])}),eM={number:"number",bigint:"bigint",object:"date"},eD=P("$ZodCheckLessThan",(e,t)=>{eC.init(e,t);let r=eM[typeof t.value];e._zod.onattach.push(e=>{let r=e._zod.bag,s=(t.inclusive?r.maximum:r.exclusiveMaximum)??1/0;t.value<s&&(t.inclusive?r.maximum=t.value:r.exclusiveMaximum=t.value)}),e._zod.check=s=>{(t.inclusive?s.value<=t.value:s.value<t.value)||s.issues.push({origin:r,code:"too_big",maximum:t.value,input:s.value,inclusive:t.inclusive,inst:e,continue:!t.abort})}}),eL=P("$ZodCheckGreaterThan",(e,t)=>{eC.init(e,t);let r=eM[typeof t.value];e._zod.onattach.push(e=>{let r=e._zod.bag,s=(t.inclusive?r.minimum:r.exclusiveMinimum)??-1/0;t.value>s&&(t.inclusive?r.minimum=t.value:r.exclusiveMinimum=t.value)}),e._zod.check=s=>{(t.inclusive?s.value>=t.value:s.value>t.value)||s.issues.push({origin:r,code:"too_small",minimum:t.value,input:s.value,inclusive:t.inclusive,inst:e,continue:!t.abort})}}),eq=P("$ZodCheckMultipleOf",(e,t)=>{eC.init(e,t),e._zod.onattach.push(e=>{var r;(r=e._zod.bag).multipleOf??(r.multipleOf=t.value)}),e._zod.check=r=>{var s,o;let i,n,a;if(typeof r.value!=typeof t.value)throw Error("Cannot mix number and bigint in multiple_of check.");("bigint"==typeof r.value?r.value%t.value===BigInt(0):0==(s=r.value,o=t.value,i=(s.toString().split(".")[1]||"").length,a=i>(n=(o.toString().split(".")[1]||"").length)?i:n,Number.parseInt(s.toFixed(a).replace(".",""))%Number.parseInt(o.toFixed(a).replace(".",""))/10**a))||r.issues.push({origin:typeof r.value,code:"not_multiple_of",divisor:t.value,input:r.value,inst:e,continue:!t.abort})}}),eU=P("$ZodCheckNumberFormat",(e,t)=>{eC.init(e,t),t.format=t.format||"float64";let r=t.format?.includes("int"),s=r?"int":"number",[o,i]=Z[t.format];e._zod.onattach.push(e=>{let s=e._zod.bag;s.format=t.format,s.minimum=o,s.maximum=i,r&&(s.pattern=eO)}),e._zod.check=n=>{let a=n.value;if(r){if(!Number.isInteger(a))return void n.issues.push({expected:s,format:t.format,code:"invalid_type",input:a,inst:e});if(!Number.isSafeInteger(a))return void(a>0?n.issues.push({input:a,code:"too_big",maximum:Number.MAX_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:s,continue:!t.abort}):n.issues.push({input:a,code:"too_small",minimum:Number.MIN_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:s,continue:!t.abort}))}a<o&&n.issues.push({origin:"number",input:a,code:"too_small",minimum:o,inclusive:!0,inst:e,continue:!t.abort}),a>i&&n.issues.push({origin:"number",input:a,code:"too_big",maximum:i,inst:e})}}),eV=P("$ZodCheckMaxLength",(e,t)=>{var r;eC.init(e,t),(r=e._zod.def).when??(r.when=e=>{let t=e.value;return null!=t&&void 0!==t.length}),e._zod.onattach.push(e=>{let r=e._zod.bag.maximum??1/0;t.maximum<r&&(e._zod.bag.maximum=t.maximum)}),e._zod.check=r=>{let s=r.value;if(s.length<=t.maximum)return;let o=X(s);r.issues.push({origin:o,code:"too_big",maximum:t.maximum,inclusive:!0,input:s,inst:e,continue:!t.abort})}}),eF=P("$ZodCheckMinLength",(e,t)=>{var r;eC.init(e,t),(r=e._zod.def).when??(r.when=e=>{let t=e.value;return null!=t&&void 0!==t.length}),e._zod.onattach.push(e=>{let r=e._zod.bag.minimum??-1/0;t.minimum>r&&(e._zod.bag.minimum=t.minimum)}),e._zod.check=r=>{let s=r.value;if(s.length>=t.minimum)return;let o=X(s);r.issues.push({origin:o,code:"too_small",minimum:t.minimum,inclusive:!0,input:s,inst:e,continue:!t.abort})}}),eH=P("$ZodCheckLengthEquals",(e,t)=>{var r;eC.init(e,t),(r=e._zod.def).when??(r.when=e=>{let t=e.value;return null!=t&&void 0!==t.length}),e._zod.onattach.push(e=>{let r=e._zod.bag;r.minimum=t.length,r.maximum=t.length,r.length=t.length}),e._zod.check=r=>{let s=r.value,o=s.length;if(o===t.length)return;let i=X(s),n=o>t.length;r.issues.push({origin:i,...n?{code:"too_big",maximum:t.length}:{code:"too_small",minimum:t.length},inclusive:!0,exact:!0,input:r.value,inst:e,continue:!t.abort})}}),eK=P("$ZodCheckStringFormat",(e,t)=>{var r,s;eC.init(e,t),e._zod.onattach.push(e=>{let r=e._zod.bag;r.format=t.format,t.pattern&&(r.patterns??(r.patterns=new Set),r.patterns.add(t.pattern))}),t.pattern?(r=e._zod).check??(r.check=r=>{t.pattern.lastIndex=0,t.pattern.test(r.value)||r.issues.push({origin:"string",code:"invalid_format",format:t.format,input:r.value,...t.pattern?{pattern:t.pattern.toString()}:{},inst:e,continue:!t.abort})}):(s=e._zod).check??(s.check=()=>{})}),eZ=P("$ZodCheckRegex",(e,t)=>{eK.init(e,t),e._zod.check=r=>{t.pattern.lastIndex=0,t.pattern.test(r.value)||r.issues.push({origin:"string",code:"invalid_format",format:"regex",input:r.value,pattern:t.pattern.toString(),inst:e,continue:!t.abort})}}),eG=P("$ZodCheckLowerCase",(e,t)=>{t.pattern??(t.pattern=eA),eK.init(e,t)}),eB=P("$ZodCheckUpperCase",(e,t)=>{t.pattern??(t.pattern=ez),eK.init(e,t)}),eW=P("$ZodCheckIncludes",(e,t)=>{eC.init(e,t);let r=F(t.includes),s=new RegExp("number"==typeof t.position?`^.{${t.position}}${r}`:r);t.pattern=s,e._zod.onattach.push(e=>{let t=e._zod.bag;t.patterns??(t.patterns=new Set),t.patterns.add(s)}),e._zod.check=r=>{r.value.includes(t.includes,t.position)||r.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:t.includes,input:r.value,inst:e,continue:!t.abort})}}),eJ=P("$ZodCheckStartsWith",(e,t)=>{eC.init(e,t);let r=RegExp(`^${F(t.prefix)}.*`);t.pattern??(t.pattern=r),e._zod.onattach.push(e=>{let t=e._zod.bag;t.patterns??(t.patterns=new Set),t.patterns.add(r)}),e._zod.check=r=>{r.value.startsWith(t.prefix)||r.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:t.prefix,input:r.value,inst:e,continue:!t.abort})}}),eX=P("$ZodCheckEndsWith",(e,t)=>{eC.init(e,t);let r=RegExp(`.*${F(t.suffix)}$`);t.pattern??(t.pattern=r),e._zod.onattach.push(e=>{let t=e._zod.bag;t.patterns??(t.patterns=new Set),t.patterns.add(r)}),e._zod.check=r=>{r.value.endsWith(t.suffix)||r.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:t.suffix,input:r.value,inst:e,continue:!t.abort})}}),eY=P("$ZodCheckOverwrite",(e,t)=>{eC.init(e,t),e._zod.check=e=>{e.value=t.tx(e.value)}});class eQ{constructor(e=[]){this.content=[],this.indent=0,this&&(this.args=e)}indented(e){this.indent+=1,e(this),this.indent-=1}write(e){if("function"==typeof e){e(this,{execution:"sync"}),e(this,{execution:"async"});return}let t=e.split("\n").filter(e=>e),r=Math.min(...t.map(e=>e.length-e.trimStart().length));for(let e of t.map(e=>e.slice(r)).map(e=>" ".repeat(2*this.indent)+e))this.content.push(e)}compile(){return Function(...this?.args,[...(this?.content??[""]).map(e=>`  ${e}`)].join("\n"))}}let e0={major:4,minor:0,patch:0},e1=P("$ZodType",(e,t)=>{var r;e??(e={}),e._zod.def=t,e._zod.bag=e._zod.bag||{},e._zod.version=e0;let s=[...e._zod.def.checks??[]];for(let t of(e._zod.traits.has("$ZodCheck")&&s.unshift(e),s))for(let r of t._zod.onattach)r(e);if(0===s.length)(r=e._zod).deferred??(r.deferred=[]),e._zod.deferred?.push(()=>{e._zod.run=e._zod.parse});else{let t=(e,t,r)=>{let s,o=G(e);for(let i of t){if(i._zod.def.when){if(!i._zod.def.when(e))continue}else if(o)continue;let t=e.issues.length,n=i._zod.check(e);if(n instanceof Promise&&r?.async===!1)throw new I;if(s||n instanceof Promise)s=(s??Promise.resolve()).then(async()=>{await n,e.issues.length!==t&&(o||(o=G(e,t)))});else{if(e.issues.length===t)continue;o||(o=G(e,t))}}return s?s.then(()=>e):e};e._zod.run=(r,o)=>{let i=e._zod.parse(r,o);if(i instanceof Promise){if(!1===o.async)throw new I;return i.then(e=>t(e,s,o))}return t(i,s,o)}}e["~standard"]={validate:t=>{try{let r=es(e,t);return r.success?{value:r.data}:{issues:r.error?.issues}}catch(r){return ei(e,t).then(e=>e.success?{value:e.data}:{issues:e.error?.issues})}},vendor:"zod",version:1}}),e2=P("$ZodString",(e,t)=>{var r;let s;e1.init(e,t),e._zod.pattern=[...e?._zod.bag?.patterns??[]].pop()??(s=(r=e._zod.bag)?`[\\s\\S]{${r?.minimum??0},${r?.maximum??""}}`:"[\\s\\S]*",RegExp(`^${s}$`)),e._zod.parse=(r,s)=>{if(t.coerce)try{r.value=String(r.value)}catch(e){}return"string"==typeof r.value||r.issues.push({expected:"string",code:"invalid_type",input:r.value,inst:e}),r}}),e5=P("$ZodStringFormat",(e,t)=>{eK.init(e,t),e2.init(e,t)}),e9=P("$ZodGUID",(e,t)=>{t.pattern??(t.pattern=ey),e5.init(e,t)}),e4=P("$ZodUUID",(e,t)=>{if(t.version){let e={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[t.version];if(void 0===e)throw Error(`Invalid UUID version: "${t.version}"`);t.pattern??(t.pattern=ev(e))}else t.pattern??(t.pattern=ev());e5.init(e,t)}),e6=P("$ZodEmail",(e,t)=>{t.pattern??(t.pattern=eg),e5.init(e,t)}),e8=P("$ZodURL",(e,t)=>{e5.init(e,t),e._zod.check=r=>{try{let s=r.value,o=new URL(s),i=o.href;t.hostname&&(t.hostname.lastIndex=0,t.hostname.test(o.hostname)||r.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:eS.source,input:r.value,inst:e,continue:!t.abort})),t.protocol&&(t.protocol.lastIndex=0,t.protocol.test(o.protocol.endsWith(":")?o.protocol.slice(0,-1):o.protocol)||r.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:t.protocol.source,input:r.value,inst:e,continue:!t.abort})),!s.endsWith("/")&&i.endsWith("/")?r.value=i.slice(0,-1):r.value=i;return}catch(s){r.issues.push({code:"invalid_format",format:"url",input:r.value,inst:e,continue:!t.abort})}}}),e3=P("$ZodEmoji",(e,t)=>{t.pattern??(t.pattern=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),e5.init(e,t)}),e7=P("$ZodNanoID",(e,t)=>{t.pattern??(t.pattern=eh),e5.init(e,t)}),te=P("$ZodCUID",(e,t)=>{t.pattern??(t.pattern=eu),e5.init(e,t)}),tt=P("$ZodCUID2",(e,t)=>{t.pattern??(t.pattern=ec),e5.init(e,t)}),tr=P("$ZodULID",(e,t)=>{t.pattern??(t.pattern=ed),e5.init(e,t)}),ts=P("$ZodXID",(e,t)=>{t.pattern??(t.pattern=ep),e5.init(e,t)}),to=P("$ZodKSUID",(e,t)=>{t.pattern??(t.pattern=ef),e5.init(e,t)}),ti=P("$ZodISODateTime",(e,t)=>{let r,s,o;t.pattern??(r=eI({precision:t.precision}),s=["Z"],t.local&&s.push(""),t.offset&&s.push("([+-]\\d{2}:\\d{2})"),o=`${r}(?:${s.join("|")})`,t.pattern=RegExp(`^${ex}T(?:${o})$`)),e5.init(e,t)}),tn=P("$ZodISODate",(e,t)=>{t.pattern??(t.pattern=eP),e5.init(e,t)}),ta=P("$ZodISOTime",(e,t)=>{t.pattern??(t.pattern=RegExp(`^${eI(t)}$`)),e5.init(e,t)}),tl=P("$ZodISODuration",(e,t)=>{t.pattern??(t.pattern=em),e5.init(e,t)}),tu=P("$ZodIPv4",(e,t)=>{t.pattern??(t.pattern=e_),e5.init(e,t),e._zod.onattach.push(e=>{e._zod.bag.format="ipv4"})}),tc=P("$ZodIPv6",(e,t)=>{t.pattern??(t.pattern=e$),e5.init(e,t),e._zod.onattach.push(e=>{e._zod.bag.format="ipv6"}),e._zod.check=r=>{try{new URL(`http://[${r.value}]`)}catch{r.issues.push({code:"invalid_format",format:"ipv6",input:r.value,inst:e,continue:!t.abort})}}}),td=P("$ZodCIDRv4",(e,t)=>{t.pattern??(t.pattern=ew),e5.init(e,t)}),tp=P("$ZodCIDRv6",(e,t)=>{t.pattern??(t.pattern=eb),e5.init(e,t),e._zod.check=r=>{let[s,o]=r.value.split("/");try{if(!o)throw Error();let e=Number(o);if(`${e}`!==o||e<0||e>128)throw Error();new URL(`http://[${s}]`)}catch{r.issues.push({code:"invalid_format",format:"cidrv6",input:r.value,inst:e,continue:!t.abort})}}});function tf(e){if(""===e)return!0;if(e.length%4!=0)return!1;try{return atob(e),!0}catch{return!1}}let th=P("$ZodBase64",(e,t)=>{t.pattern??(t.pattern=eE),e5.init(e,t),e._zod.onattach.push(e=>{e._zod.bag.contentEncoding="base64"}),e._zod.check=r=>{tf(r.value)||r.issues.push({code:"invalid_format",format:"base64",input:r.value,inst:e,continue:!t.abort})}}),tm=P("$ZodBase64URL",(e,t)=>{t.pattern??(t.pattern=ek),e5.init(e,t),e._zod.onattach.push(e=>{e._zod.bag.contentEncoding="base64url"}),e._zod.check=r=>{!function(e){if(!ek.test(e))return!1;let t=e.replace(/[-_]/g,e=>"-"===e?"+":"/");return tf(t.padEnd(4*Math.ceil(t.length/4),"="))}(r.value)&&r.issues.push({code:"invalid_format",format:"base64url",input:r.value,inst:e,continue:!t.abort})}}),ty=P("$ZodE164",(e,t)=>{t.pattern??(t.pattern=eT),e5.init(e,t)}),tv=P("$ZodJWT",(e,t)=>{e5.init(e,t),e._zod.check=r=>{!function(e,t=null){try{let r=e.split(".");if(3!==r.length)return!1;let[s]=r;if(!s)return!1;let o=JSON.parse(atob(s));if("typ"in o&&o?.typ!=="JWT"||!o.alg||t&&(!("alg"in o)||o.alg!==t))return!1;return!0}catch{return!1}}(r.value,t.alg)&&r.issues.push({code:"invalid_format",format:"jwt",input:r.value,inst:e,continue:!t.abort})}}),tg=P("$ZodNumber",(e,t)=>{e1.init(e,t),e._zod.pattern=e._zod.bag.pattern??eR,e._zod.parse=(r,s)=>{if(t.coerce)try{r.value=Number(r.value)}catch(e){}let o=r.value;if("number"==typeof o&&!Number.isNaN(o)&&Number.isFinite(o))return r;let i="number"==typeof o?Number.isNaN(o)?"NaN":Number.isFinite(o)?void 0:"Infinity":void 0;return r.issues.push({expected:"number",code:"invalid_type",input:o,inst:e,...i?{received:i}:{}}),r}}),t_=P("$ZodNumber",(e,t)=>{eU.init(e,t),tg.init(e,t)}),t$=P("$ZodBoolean",(e,t)=>{e1.init(e,t),e._zod.pattern=ej,e._zod.parse=(r,s)=>{if(t.coerce)try{r.value=!!r.value}catch(e){}let o=r.value;return"boolean"==typeof o||r.issues.push({expected:"boolean",code:"invalid_type",input:o,inst:e}),r}}),tw=P("$ZodNull",(e,t)=>{e1.init(e,t),e._zod.pattern=eN,e._zod.values=new Set([null]),e._zod.parse=(t,r)=>{let s=t.value;return null===s||t.issues.push({expected:"null",code:"invalid_type",input:s,inst:e}),t}}),tb=P("$ZodAny",(e,t)=>{e1.init(e,t),e._zod.parse=e=>e}),tE=P("$ZodUnknown",(e,t)=>{e1.init(e,t),e._zod.parse=e=>e}),tk=P("$ZodNever",(e,t)=>{e1.init(e,t),e._zod.parse=(t,r)=>(t.issues.push({expected:"never",code:"invalid_type",input:t.value,inst:e}),t)});function tS(e,t,r){e.issues.length&&t.issues.push(...B(r,e.issues)),t.value[r]=e.value}let tT=P("$ZodArray",(e,t)=>{e1.init(e,t),e._zod.parse=(r,s)=>{let o=r.value;if(!Array.isArray(o))return r.issues.push({expected:"array",code:"invalid_type",input:o,inst:e}),r;r.value=Array(o.length);let i=[];for(let e=0;e<o.length;e++){let n=o[e],a=t.element._zod.run({value:n,issues:[]},s);a instanceof Promise?i.push(a.then(t=>tS(t,r,e))):tS(a,r,e)}return i.length?Promise.all(i).then(()=>r):r}});function tx(e,t,r){e.issues.length&&t.issues.push(...B(r,e.issues)),t.value[r]=e.value}function tP(e,t,r,s){e.issues.length?void 0===s[r]?r in s?t.value[r]=void 0:t.value[r]=e.value:t.issues.push(...B(r,e.issues)):void 0===e.value?r in s&&(t.value[r]=void 0):t.value[r]=e.value}let tI=P("$ZodObject",(e,t)=>{let r,s;e1.init(e,t);let o=N(()=>{var e;let r=Object.keys(t.shape);for(let e of r)if(!(t.shape[e]instanceof e1))throw Error(`Invalid element at key "${e}": expected a Zod schema`);let s=Object.keys(e=t.shape).filter(t=>"optional"===e[t]._zod.optin&&"optional"===e[t]._zod.optout);return{shape:t.shape,keys:r,keySet:new Set(r),numKeys:r.length,optionalKeys:new Set(s)}});z(e._zod,"propValues",()=>{let e=t.shape,r={};for(let t in e){let s=e[t]._zod;if(s.values)for(let e of(r[t]??(r[t]=new Set),s.values))r[t].add(e)}return r});let i=!O.jitless,n=i&&q.value,a=t.catchall;e._zod.parse=(l,u)=>{s??(s=o.value);let c=l.value;if(!L(c))return l.issues.push({expected:"object",code:"invalid_type",input:c,inst:e}),l;let d=[];if(i&&n&&u?.async===!1&&!0!==u.jitless)r||(r=(e=>{let t=new eQ(["shape","payload","ctx"]),r=o.value,s=e=>{let t=M(e);return`shape[${t}]._zod.run({ value: input[${t}], issues: [] }, ctx)`};t.write("const input = payload.value;");let i=Object.create(null),n=0;for(let e of r.keys)i[e]=`key_${n++}`;for(let e of(t.write("const newResult = {}"),r.keys))if(r.optionalKeys.has(e)){let r=i[e];t.write(`const ${r} = ${s(e)};`);let o=M(e);t.write(`
        if (${r}.issues.length) {
          if (input[${o}] === undefined) {
            if (${o} in input) {
              newResult[${o}] = undefined;
            }
          } else {
            payload.issues = payload.issues.concat(
              ${r}.issues.map((iss) => ({
                ...iss,
                path: iss.path ? [${o}, ...iss.path] : [${o}],
              }))
            );
          }
        } else if (${r}.value === undefined) {
          if (${o} in input) newResult[${o}] = undefined;
        } else {
          newResult[${o}] = ${r}.value;
        }
        `)}else{let r=i[e];t.write(`const ${r} = ${s(e)};`),t.write(`
          if (${r}.issues.length) payload.issues = payload.issues.concat(${r}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${M(e)}, ...iss.path] : [${M(e)}]
          })));`),t.write(`newResult[${M(e)}] = ${r}.value`)}t.write("payload.value = newResult;"),t.write("return payload;");let a=t.compile();return(t,r)=>a(e,t,r)})(t.shape)),l=r(l,u);else{l.value={};let e=s.shape;for(let t of s.keys){let r=e[t],s=r._zod.run({value:c[t],issues:[]},u),o="optional"===r._zod.optin&&"optional"===r._zod.optout;s instanceof Promise?d.push(s.then(e=>o?tP(e,l,t,c):tx(e,l,t))):o?tP(s,l,t,c):tx(s,l,t)}}if(!a)return d.length?Promise.all(d).then(()=>l):l;let p=[],f=s.keySet,h=a._zod,m=h.def.type;for(let e of Object.keys(c)){if(f.has(e))continue;if("never"===m){p.push(e);continue}let t=h.run({value:c[e],issues:[]},u);t instanceof Promise?d.push(t.then(t=>tx(t,l,e))):tx(t,l,e)}return(p.length&&l.issues.push({code:"unrecognized_keys",keys:p,input:c,inst:e}),d.length)?Promise.all(d).then(()=>l):l}});function tO(e,t,r,s){for(let r of e)if(0===r.issues.length)return t.value=r.value,t;return t.issues.push({code:"invalid_union",input:t.value,inst:r,errors:e.map(e=>e.issues.map(e=>J(e,s,R())))}),t}let tR=P("$ZodUnion",(e,t)=>{e1.init(e,t),z(e._zod,"optin",()=>t.options.some(e=>"optional"===e._zod.optin)?"optional":void 0),z(e._zod,"optout",()=>t.options.some(e=>"optional"===e._zod.optout)?"optional":void 0),z(e._zod,"values",()=>{if(t.options.every(e=>e._zod.values))return new Set(t.options.flatMap(e=>Array.from(e._zod.values)))}),z(e._zod,"pattern",()=>{if(t.options.every(e=>e._zod.pattern)){let e=t.options.map(e=>e._zod.pattern);return RegExp(`^(${e.map(e=>A(e.source)).join("|")})$`)}}),e._zod.parse=(r,s)=>{let o=!1,i=[];for(let e of t.options){let t=e._zod.run({value:r.value,issues:[]},s);if(t instanceof Promise)i.push(t),o=!0;else{if(0===t.issues.length)return t;i.push(t)}}return o?Promise.all(i).then(t=>tO(t,r,e,s)):tO(i,r,e,s)}}),tj=P("$ZodDiscriminatedUnion",(e,t)=>{tR.init(e,t);let r=e._zod.parse;z(e._zod,"propValues",()=>{let e={};for(let r of t.options){let s=r._zod.propValues;if(!s||0===Object.keys(s).length)throw Error(`Invalid discriminated union option at index "${t.options.indexOf(r)}"`);for(let[t,r]of Object.entries(s))for(let s of(e[t]||(e[t]=new Set),r))e[t].add(s)}return e});let s=N(()=>{let e=t.options,r=new Map;for(let s of e){let e=s._zod.propValues[t.discriminator];if(!e||0===e.size)throw Error(`Invalid discriminated union option at index "${t.options.indexOf(s)}"`);for(let t of e){if(r.has(t))throw Error(`Duplicate discriminator value "${String(t)}"`);r.set(t,s)}}return r});e._zod.parse=(o,i)=>{let n=o.value;if(!L(n))return o.issues.push({code:"invalid_type",expected:"object",input:n,inst:e}),o;let a=s.value.get(n?.[t.discriminator]);return a?a._zod.run(o,i):t.unionFallback?r(o,i):(o.issues.push({code:"invalid_union",errors:[],note:"No matching discriminator",input:n,path:[t.discriminator],inst:e}),o)}}),tN=P("$ZodIntersection",(e,t)=>{e1.init(e,t),e._zod.parse=(e,r)=>{let s=e.value,o=t.left._zod.run({value:s,issues:[]},r),i=t.right._zod.run({value:s,issues:[]},r);return o instanceof Promise||i instanceof Promise?Promise.all([o,i]).then(([t,r])=>tA(e,t,r)):tA(e,o,i)}});function tA(e,t,r){if(t.issues.length&&e.issues.push(...t.issues),r.issues.length&&e.issues.push(...r.issues),G(e))return e;let s=function e(t,r){if(t===r||t instanceof Date&&r instanceof Date&&+t==+r)return{valid:!0,data:t};if(U(t)&&U(r)){let s=Object.keys(r),o=Object.keys(t).filter(e=>-1!==s.indexOf(e)),i={...t,...r};for(let s of o){let o=e(t[s],r[s]);if(!o.valid)return{valid:!1,mergeErrorPath:[s,...o.mergeErrorPath]};i[s]=o.data}return{valid:!0,data:i}}if(Array.isArray(t)&&Array.isArray(r)){if(t.length!==r.length)return{valid:!1,mergeErrorPath:[]};let s=[];for(let o=0;o<t.length;o++){let i=e(t[o],r[o]);if(!i.valid)return{valid:!1,mergeErrorPath:[o,...i.mergeErrorPath]};s.push(i.data)}return{valid:!0,data:s}}return{valid:!1,mergeErrorPath:[]}}(t.value,r.value);if(!s.valid)throw Error(`Unmergable intersection. Error path: ${JSON.stringify(s.mergeErrorPath)}`);return e.value=s.data,e}let tz=P("$ZodRecord",(e,t)=>{e1.init(e,t),e._zod.parse=(r,s)=>{let o=r.value;if(!U(o))return r.issues.push({expected:"record",code:"invalid_type",input:o,inst:e}),r;let i=[];if(t.keyType._zod.values){let n,a=t.keyType._zod.values;for(let e of(r.value={},a))if("string"==typeof e||"number"==typeof e||"symbol"==typeof e){let n=t.valueType._zod.run({value:o[e],issues:[]},s);n instanceof Promise?i.push(n.then(t=>{t.issues.length&&r.issues.push(...B(e,t.issues)),r.value[e]=t.value})):(n.issues.length&&r.issues.push(...B(e,n.issues)),r.value[e]=n.value)}for(let e in o)a.has(e)||(n=n??[]).push(e);n&&n.length>0&&r.issues.push({code:"unrecognized_keys",input:o,inst:e,keys:n})}else for(let n of(r.value={},Reflect.ownKeys(o))){if("__proto__"===n)continue;let a=t.keyType._zod.run({value:n,issues:[]},s);if(a instanceof Promise)throw Error("Async schemas not supported in object keys currently");if(a.issues.length){r.issues.push({origin:"record",code:"invalid_key",issues:a.issues.map(e=>J(e,s,R())),input:n,path:[n],inst:e}),r.value[a.value]=a.value;continue}let l=t.valueType._zod.run({value:o[n],issues:[]},s);l instanceof Promise?i.push(l.then(e=>{e.issues.length&&r.issues.push(...B(n,e.issues)),r.value[a.value]=e.value})):(l.issues.length&&r.issues.push(...B(n,l.issues)),r.value[a.value]=l.value)}return i.length?Promise.all(i).then(()=>r):r}}),tC=P("$ZodEnum",(e,t)=>{var r;let s;e1.init(e,t);let o=(s=Object.values(r=t.entries).filter(e=>"number"==typeof e),Object.entries(r).filter(([e,t])=>-1===s.indexOf(+e)).map(([e,t])=>t));e._zod.values=new Set(o),e._zod.pattern=RegExp(`^(${o.filter(e=>V.has(typeof e)).map(e=>"string"==typeof e?F(e):e.toString()).join("|")})$`),e._zod.parse=(t,r)=>{let s=t.value;return e._zod.values.has(s)||t.issues.push({code:"invalid_value",values:o,input:s,inst:e}),t}}),tM=P("$ZodLiteral",(e,t)=>{e1.init(e,t),e._zod.values=new Set(t.values),e._zod.pattern=RegExp(`^(${t.values.map(e=>"string"==typeof e?F(e):e?e.toString():String(e)).join("|")})$`),e._zod.parse=(r,s)=>{let o=r.value;return e._zod.values.has(o)||r.issues.push({code:"invalid_value",values:t.values,input:o,inst:e}),r}}),tD=P("$ZodTransform",(e,t)=>{e1.init(e,t),e._zod.parse=(e,r)=>{let s=t.transform(e.value,e);if(r.async)return(s instanceof Promise?s:Promise.resolve(s)).then(t=>(e.value=t,e));if(s instanceof Promise)throw new I;return e.value=s,e}}),tL=P("$ZodOptional",(e,t)=>{e1.init(e,t),e._zod.optin="optional",e._zod.optout="optional",z(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,void 0]):void 0),z(e._zod,"pattern",()=>{let e=t.innerType._zod.pattern;return e?RegExp(`^(${A(e.source)})?$`):void 0}),e._zod.parse=(e,r)=>"optional"===t.innerType._zod.optin?t.innerType._zod.run(e,r):void 0===e.value?e:t.innerType._zod.run(e,r)}),tq=P("$ZodNullable",(e,t)=>{e1.init(e,t),z(e._zod,"optin",()=>t.innerType._zod.optin),z(e._zod,"optout",()=>t.innerType._zod.optout),z(e._zod,"pattern",()=>{let e=t.innerType._zod.pattern;return e?RegExp(`^(${A(e.source)}|null)$`):void 0}),z(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,null]):void 0),e._zod.parse=(e,r)=>null===e.value?e:t.innerType._zod.run(e,r)}),tU=P("$ZodDefault",(e,t)=>{e1.init(e,t),e._zod.optin="optional",z(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(e,r)=>{if(void 0===e.value)return e.value=t.defaultValue,e;let s=t.innerType._zod.run(e,r);return s instanceof Promise?s.then(e=>tV(e,t)):tV(s,t)}});function tV(e,t){return void 0===e.value&&(e.value=t.defaultValue),e}let tF=P("$ZodPrefault",(e,t)=>{e1.init(e,t),e._zod.optin="optional",z(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(e,r)=>(void 0===e.value&&(e.value=t.defaultValue),t.innerType._zod.run(e,r))}),tH=P("$ZodNonOptional",(e,t)=>{e1.init(e,t),z(e._zod,"values",()=>{let e=t.innerType._zod.values;return e?new Set([...e].filter(e=>void 0!==e)):void 0}),e._zod.parse=(r,s)=>{let o=t.innerType._zod.run(r,s);return o instanceof Promise?o.then(t=>tK(t,e)):tK(o,e)}});function tK(e,t){return e.issues.length||void 0!==e.value||e.issues.push({code:"invalid_type",expected:"nonoptional",input:e.value,inst:t}),e}let tZ=P("$ZodCatch",(e,t)=>{e1.init(e,t),e._zod.optin="optional",z(e._zod,"optout",()=>t.innerType._zod.optout),z(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(e,r)=>{let s=t.innerType._zod.run(e,r);return s instanceof Promise?s.then(s=>(e.value=s.value,s.issues.length&&(e.value=t.catchValue({...e,error:{issues:s.issues.map(e=>J(e,r,R()))},input:e.value}),e.issues=[]),e)):(e.value=s.value,s.issues.length&&(e.value=t.catchValue({...e,error:{issues:s.issues.map(e=>J(e,r,R()))},input:e.value}),e.issues=[]),e)}}),tG=P("$ZodPipe",(e,t)=>{e1.init(e,t),z(e._zod,"values",()=>t.in._zod.values),z(e._zod,"optin",()=>t.in._zod.optin),z(e._zod,"optout",()=>t.out._zod.optout),e._zod.parse=(e,r)=>{let s=t.in._zod.run(e,r);return s instanceof Promise?s.then(e=>tB(e,t,r)):tB(s,t,r)}});function tB(e,t,r){return G(e)?e:t.out._zod.run({value:e.value,issues:e.issues},r)}let tW=P("$ZodReadonly",(e,t)=>{e1.init(e,t),z(e._zod,"propValues",()=>t.innerType._zod.propValues),z(e._zod,"values",()=>t.innerType._zod.values),z(e._zod,"optin",()=>t.innerType._zod.optin),z(e._zod,"optout",()=>t.innerType._zod.optout),e._zod.parse=(e,r)=>{let s=t.innerType._zod.run(e,r);return s instanceof Promise?s.then(tJ):tJ(s)}});function tJ(e){return e.value=Object.freeze(e.value),e}let tX=P("$ZodCustom",(e,t)=>{eC.init(e,t),e1.init(e,t),e._zod.parse=(e,t)=>e,e._zod.check=r=>{let s=r.value,o=t.fn(s);if(o instanceof Promise)return o.then(t=>tY(t,r,s,e));tY(o,r,s,e)}});function tY(e,t,r,s){if(!e){let e={code:"custom",input:r,inst:s,path:[...s._zod.def.path??[]],continue:!s._zod.def.abort};s._zod.def.params&&(e.params=s._zod.def.params),t.issues.push(Y(e))}}Symbol("ZodOutput"),Symbol("ZodInput");let tQ=new class e{constructor(){this._map=new Map,this._idmap=new Map}add(e,...t){let r=t[0];if(this._map.set(e,r),r&&"object"==typeof r&&"id"in r){if(this._idmap.has(r.id))throw Error(`ID ${r.id} already exists in the registry`);this._idmap.set(r.id,e)}return this}clear(){return this._map=new Map,this._idmap=new Map,this}remove(e){let t=this._map.get(e);return t&&"object"==typeof t&&"id"in t&&this._idmap.delete(t.id),this._map.delete(e),this}get(e){let t=e._zod.parent;if(t){let r={...this.get(t)??{}};return delete r.id,{...r,...this._map.get(e)}}return this._map.get(e)}has(e){return this._map.has(e)}};function t0(e,t){return new e({type:"string",format:"guid",check:"string_format",abort:!1,...K(t)})}function t1(e,t){return new e({type:"string",format:"url",check:"string_format",abort:!1,...K(t)})}function t2(e,t){return new eD({check:"less_than",...K(t),value:e,inclusive:!1})}function t5(e,t){return new eD({check:"less_than",...K(t),value:e,inclusive:!0})}function t9(e,t){return new eL({check:"greater_than",...K(t),value:e,inclusive:!1})}function t4(e,t){return new eL({check:"greater_than",...K(t),value:e,inclusive:!0})}function t6(e,t){return new eq({check:"multiple_of",...K(t),value:e})}function t8(e,t){return new eV({check:"max_length",...K(t),maximum:e})}function t3(e,t){return new eF({check:"min_length",...K(t),minimum:e})}function t7(e,t){return new eH({check:"length_equals",...K(t),length:e})}function re(e){return new eY({check:"overwrite",tx:e})}let rt=P("ZodISODateTime",(e,t)=>{ti.init(e,t),ry.init(e,t)});function rr(e){return new rt({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...K(e)})}let rs=P("ZodISODate",(e,t)=>{tn.init(e,t),ry.init(e,t)}),ro=P("ZodISOTime",(e,t)=>{ta.init(e,t),ry.init(e,t)}),ri=P("ZodISODuration",(e,t)=>{tl.init(e,t),ry.init(e,t)}),rn=(e,t)=>{ee.init(e,t),e.name="ZodError",Object.defineProperties(e,{format:{value:t=>{let r,s,o;return r=t||function(e){return e.message},s={_errors:[]},(o=e=>{for(let t of e.issues)if("invalid_union"===t.code&&t.errors.length)t.errors.map(e=>o({issues:e}));else if("invalid_key"===t.code)o({issues:t.issues});else if("invalid_element"===t.code)o({issues:t.issues});else if(0===t.path.length)s._errors.push(r(t));else{let e=s,o=0;for(;o<t.path.length;){let s=t.path[o];o===t.path.length-1?(e[s]=e[s]||{_errors:[]},e[s]._errors.push(r(t))):e[s]=e[s]||{_errors:[]},e=e[s],o++}}})(e),s}},flatten:{value:t=>(function(e,t=e=>e.message){let r={},s=[];for(let o of e.issues)o.path.length>0?(r[o.path[0]]=r[o.path[0]]||[],r[o.path[0]].push(t(o))):s.push(t(o));return{formErrors:s,fieldErrors:r}})(e,t)},addIssue:{value:t=>e.issues.push(t)},addIssues:{value:t=>e.issues.push(...t)},isEmpty:{get:()=>0===e.issues.length}})};P("ZodError",rn);let ra=P("ZodError",rn,{Parent:Error}),rl=(e,t,r,s)=>{let o=r?Object.assign(r,{async:!1}):{async:!1},i=e._zod.run({value:t,issues:[]},o);if(i instanceof Promise)throw new I;if(i.issues.length){let e=new(s?.Err??ra)(i.issues.map(e=>J(e,o,R())));throw D(e,s?.callee),e}return i.value},ru=async(e,t,r,s)=>{let o=r?Object.assign(r,{async:!0}):{async:!0},i=e._zod.run({value:t,issues:[]},o);if(i instanceof Promise&&(i=await i),i.issues.length){let e=new(s?.Err??ra)(i.issues.map(e=>J(e,o,R())));throw D(e,s?.callee),e}return i.value},rc=er(ra),rd=eo(ra),rp=P("ZodType",(e,t)=>(e1.init(e,t),e.def=t,Object.defineProperty(e,"_def",{value:t}),e.check=(...r)=>e.clone({...t,checks:[...t.checks??[],...r.map(e=>"function"==typeof e?{_zod:{check:e,def:{check:"custom"},onattach:[]}}:e)]}),e.clone=(t,r)=>H(e,t,r),e.brand=()=>e,e.register=(t,r)=>(t.add(e,r),e),e.parse=(t,r)=>rl(e,t,r,{callee:e.parse}),e.safeParse=(t,r)=>rc(e,t,r),e.parseAsync=async(t,r)=>ru(e,t,r,{callee:e.parseAsync}),e.safeParseAsync=async(t,r)=>rd(e,t,r),e.spa=e.safeParseAsync,e.refine=(t,r)=>e.check(function(e,t={}){return new sh({type:"custom",check:"custom",fn:e,...K(t)})}(t,r)),e.superRefine=t=>{var r,s;let o,i;return e.check((r=t,i=(s=e=>(e.addIssue=t=>{"string"==typeof t?e.issues.push(Y(t,e.value,i._zod.def)):(t.fatal&&(t.continue=!1),t.code??(t.code="custom"),t.input??(t.input=e.value),t.inst??(t.inst=i),t.continue??(t.continue=!i._zod.def.abort),e.issues.push(Y(t)))},r(e.value,e)),(o=new eC({check:"custom"}))._zod.check=s,o)))},e.overwrite=t=>e.check(re(t)),e.optional=()=>so(e),e.nullable=()=>sn(e),e.nullish=()=>so(sn(e)),e.nonoptional=t=>new su({type:"nonoptional",innerType:e,...K(t)}),e.array=()=>rW(e),e.or=t=>r0([e,t]),e.and=t=>r9(e,t),e.transform=t=>sp(e,sr(t)),e.default=t=>{var r,s;return r=e,s=t,new sa({type:"default",innerType:r,get defaultValue(){return"function"==typeof s?s():s}})},e.prefault=t=>{var r,s;return r=e,s=t,new sl({type:"prefault",innerType:r,get defaultValue(){return"function"==typeof s?s():s}})},e.catch=t=>{var r;return new sc({type:"catch",innerType:e,catchValue:"function"==typeof(r=t)?r:()=>r})},e.pipe=t=>sp(e,t),e.readonly=()=>new sf({type:"readonly",innerType:e}),e.describe=t=>{let r=e.clone();return tQ.add(r,{description:t}),r},Object.defineProperty(e,"description",{get:()=>tQ.get(e)?.description,configurable:!0}),e.meta=(...t)=>{if(0===t.length)return tQ.get(e);let r=e.clone();return tQ.add(r,t[0]),r},e.isOptional=()=>e.safeParse(void 0).success,e.isNullable=()=>e.safeParse(null).success,e)),rf=P("_ZodString",(e,t)=>{e2.init(e,t),rp.init(e,t);let r=e._zod.bag;e.format=r.format??null,e.minLength=r.minimum??null,e.maxLength=r.maximum??null,e.regex=(...t)=>e.check(function(e,t){return new eZ({check:"string_format",format:"regex",...K(t),pattern:e})}(...t)),e.includes=(...t)=>e.check(function(e,t){return new eW({check:"string_format",format:"includes",...K(t),includes:e})}(...t)),e.startsWith=(...t)=>e.check(function(e,t){return new eJ({check:"string_format",format:"starts_with",...K(t),prefix:e})}(...t)),e.endsWith=(...t)=>e.check(function(e,t){return new eX({check:"string_format",format:"ends_with",...K(t),suffix:e})}(...t)),e.min=(...t)=>e.check(t3(...t)),e.max=(...t)=>e.check(t8(...t)),e.length=(...t)=>e.check(t7(...t)),e.nonempty=(...t)=>e.check(t3(1,...t)),e.lowercase=t=>e.check(new eG({check:"string_format",format:"lowercase",...K(t)})),e.uppercase=t=>e.check(new eB({check:"string_format",format:"uppercase",...K(t)})),e.trim=()=>e.check(re(e=>e.trim())),e.normalize=(...t)=>e.check(function(e){return re(t=>t.normalize(e))}(...t)),e.toLowerCase=()=>e.check(re(e=>e.toLowerCase())),e.toUpperCase=()=>e.check(re(e=>e.toUpperCase()))}),rh=P("ZodString",(e,t)=>{e2.init(e,t),rf.init(e,t),e.email=t=>e.check(new rv({type:"string",format:"email",check:"string_format",abort:!1,...K(t)})),e.url=t=>e.check(t1(r$,t)),e.jwt=t=>e.check(new rz({type:"string",format:"jwt",check:"string_format",abort:!1,...K(t)})),e.emoji=t=>e.check(new rw({type:"string",format:"emoji",check:"string_format",abort:!1,...K(t)})),e.guid=t=>e.check(t0(rg,t)),e.uuid=t=>e.check(new r_({type:"string",format:"uuid",check:"string_format",abort:!1,...K(t)})),e.uuidv4=t=>e.check(new r_({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...K(t)})),e.uuidv6=t=>e.check(new r_({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...K(t)})),e.uuidv7=t=>e.check(new r_({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...K(t)})),e.nanoid=t=>e.check(new rb({type:"string",format:"nanoid",check:"string_format",abort:!1,...K(t)})),e.guid=t=>e.check(t0(rg,t)),e.cuid=t=>e.check(new rE({type:"string",format:"cuid",check:"string_format",abort:!1,...K(t)})),e.cuid2=t=>e.check(new rk({type:"string",format:"cuid2",check:"string_format",abort:!1,...K(t)})),e.ulid=t=>e.check(new rS({type:"string",format:"ulid",check:"string_format",abort:!1,...K(t)})),e.base64=t=>e.check(new rj({type:"string",format:"base64",check:"string_format",abort:!1,...K(t)})),e.base64url=t=>e.check(new rN({type:"string",format:"base64url",check:"string_format",abort:!1,...K(t)})),e.xid=t=>e.check(new rT({type:"string",format:"xid",check:"string_format",abort:!1,...K(t)})),e.ksuid=t=>e.check(new rx({type:"string",format:"ksuid",check:"string_format",abort:!1,...K(t)})),e.ipv4=t=>e.check(new rP({type:"string",format:"ipv4",check:"string_format",abort:!1,...K(t)})),e.ipv6=t=>e.check(new rI({type:"string",format:"ipv6",check:"string_format",abort:!1,...K(t)})),e.cidrv4=t=>e.check(new rO({type:"string",format:"cidrv4",check:"string_format",abort:!1,...K(t)})),e.cidrv6=t=>e.check(new rR({type:"string",format:"cidrv6",check:"string_format",abort:!1,...K(t)})),e.e164=t=>e.check(new rA({type:"string",format:"e164",check:"string_format",abort:!1,...K(t)})),e.datetime=t=>e.check(rr(t)),e.date=t=>e.check(new rs({type:"string",format:"date",check:"string_format",...K(t)})),e.time=t=>e.check(new ro({type:"string",format:"time",check:"string_format",precision:null,...K(t)})),e.duration=t=>e.check(new ri({type:"string",format:"duration",check:"string_format",...K(t)}))});function rm(e){return new rh({type:"string",...K(e)})}let ry=P("ZodStringFormat",(e,t)=>{e5.init(e,t),rf.init(e,t)}),rv=P("ZodEmail",(e,t)=>{e6.init(e,t),ry.init(e,t)}),rg=P("ZodGUID",(e,t)=>{e9.init(e,t),ry.init(e,t)}),r_=P("ZodUUID",(e,t)=>{e4.init(e,t),ry.init(e,t)}),r$=P("ZodURL",(e,t)=>{e8.init(e,t),ry.init(e,t)}),rw=P("ZodEmoji",(e,t)=>{e3.init(e,t),ry.init(e,t)}),rb=P("ZodNanoID",(e,t)=>{e7.init(e,t),ry.init(e,t)}),rE=P("ZodCUID",(e,t)=>{te.init(e,t),ry.init(e,t)}),rk=P("ZodCUID2",(e,t)=>{tt.init(e,t),ry.init(e,t)}),rS=P("ZodULID",(e,t)=>{tr.init(e,t),ry.init(e,t)}),rT=P("ZodXID",(e,t)=>{ts.init(e,t),ry.init(e,t)}),rx=P("ZodKSUID",(e,t)=>{to.init(e,t),ry.init(e,t)}),rP=P("ZodIPv4",(e,t)=>{tu.init(e,t),ry.init(e,t)}),rI=P("ZodIPv6",(e,t)=>{tc.init(e,t),ry.init(e,t)}),rO=P("ZodCIDRv4",(e,t)=>{td.init(e,t),ry.init(e,t)}),rR=P("ZodCIDRv6",(e,t)=>{tp.init(e,t),ry.init(e,t)}),rj=P("ZodBase64",(e,t)=>{th.init(e,t),ry.init(e,t)}),rN=P("ZodBase64URL",(e,t)=>{tm.init(e,t),ry.init(e,t)}),rA=P("ZodE164",(e,t)=>{ty.init(e,t),ry.init(e,t)}),rz=P("ZodJWT",(e,t)=>{tv.init(e,t),ry.init(e,t)}),rC=P("ZodNumber",(e,t)=>{tg.init(e,t),rp.init(e,t),e.gt=(t,r)=>e.check(t9(t,r)),e.gte=(t,r)=>e.check(t4(t,r)),e.min=(t,r)=>e.check(t4(t,r)),e.lt=(t,r)=>e.check(t2(t,r)),e.lte=(t,r)=>e.check(t5(t,r)),e.max=(t,r)=>e.check(t5(t,r)),e.int=t=>e.check(rL(t)),e.safe=t=>e.check(rL(t)),e.positive=t=>e.check(t9(0,t)),e.nonnegative=t=>e.check(t4(0,t)),e.negative=t=>e.check(t2(0,t)),e.nonpositive=t=>e.check(t5(0,t)),e.multipleOf=(t,r)=>e.check(t6(t,r)),e.step=(t,r)=>e.check(t6(t,r)),e.finite=()=>e;let r=e._zod.bag;e.minValue=Math.max(r.minimum??-1/0,r.exclusiveMinimum??-1/0)??null,e.maxValue=Math.min(r.maximum??1/0,r.exclusiveMaximum??1/0)??null,e.isInt=(r.format??"").includes("int")||Number.isSafeInteger(r.multipleOf??.5),e.isFinite=!0,e.format=r.format??null});function rM(e){return new rC({type:"number",checks:[],...K(e)})}let rD=P("ZodNumberFormat",(e,t)=>{t_.init(e,t),rC.init(e,t)});function rL(e){return new rD({type:"number",check:"number_format",abort:!1,format:"safeint",...K(e)})}let rq=P("ZodBoolean",(e,t)=>{t$.init(e,t),rp.init(e,t)});function rU(e){return new rq({type:"boolean",...K(e)})}let rV=P("ZodNull",(e,t)=>{tw.init(e,t),rp.init(e,t)});function rF(e){return new rV({type:"null",...K(e)})}let rH=P("ZodAny",(e,t)=>{tb.init(e,t),rp.init(e,t)}),rK=P("ZodUnknown",(e,t)=>{tE.init(e,t),rp.init(e,t)});function rZ(){return new rK({type:"unknown"})}let rG=P("ZodNever",(e,t)=>{tk.init(e,t),rp.init(e,t)}),rB=P("ZodArray",(e,t)=>{tT.init(e,t),rp.init(e,t),e.element=t.element,e.min=(t,r)=>e.check(t3(t,r)),e.nonempty=t=>e.check(t3(1,t)),e.max=(t,r)=>e.check(t8(t,r)),e.length=(t,r)=>e.check(t7(t,r)),e.unwrap=()=>e.element});function rW(e,t){return new rB({type:"array",element:e,...K(t)})}let rJ=P("ZodObject",(e,t)=>{tI.init(e,t),rp.init(e,t),z(e,"shape",()=>t.shape),e.keyof=()=>r3(Object.keys(e._zod.def.shape)),e.catchall=t=>e.clone({...e._zod.def,catchall:t}),e.passthrough=()=>e.clone({...e._zod.def,catchall:rZ()}),e.loose=()=>e.clone({...e._zod.def,catchall:rZ()}),e.strict=()=>e.clone({...e._zod.def,catchall:new rG({type:"never",...K(void 0)})}),e.strip=()=>e.clone({...e._zod.def,catchall:void 0}),e.extend=t=>(function(e,t){if(!U(t))throw Error("Invalid input to extend: expected a plain object");let r={...e._zod.def,get shape(){let r={...e._zod.def.shape,...t};return C(this,"shape",r),r},checks:[]};return H(e,r)})(e,t),e.merge=t=>H(e,{...e._zod.def,get shape(){let r={...e._zod.def.shape,...t._zod.def.shape};return C(this,"shape",r),r},catchall:t._zod.def.catchall,checks:[]}),e.pick=t=>(function(e,t){let r={},s=e._zod.def;for(let e in t){if(!(e in s.shape))throw Error(`Unrecognized key: "${e}"`);t[e]&&(r[e]=s.shape[e])}return H(e,{...e._zod.def,shape:r,checks:[]})})(e,t),e.omit=t=>(function(e,t){let r={...e._zod.def.shape},s=e._zod.def;for(let e in t){if(!(e in s.shape))throw Error(`Unrecognized key: "${e}"`);t[e]&&delete r[e]}return H(e,{...e._zod.def,shape:r,checks:[]})})(e,t),e.partial=(...t)=>(function(e,t,r){let s=t._zod.def.shape,o={...s};if(r)for(let t in r){if(!(t in s))throw Error(`Unrecognized key: "${t}"`);r[t]&&(o[t]=e?new e({type:"optional",innerType:s[t]}):s[t])}else for(let t in s)o[t]=e?new e({type:"optional",innerType:s[t]}):s[t];return H(t,{...t._zod.def,shape:o,checks:[]})})(ss,e,t[0]),e.required=(...t)=>(function(e,t,r){let s=t._zod.def.shape,o={...s};if(r)for(let t in r){if(!(t in o))throw Error(`Unrecognized key: "${t}"`);r[t]&&(o[t]=new e({type:"nonoptional",innerType:s[t]}))}else for(let t in s)o[t]=new e({type:"nonoptional",innerType:s[t]});return H(t,{...t._zod.def,shape:o,checks:[]})})(su,e,t[0])});function rX(e,t){return new rJ({type:"object",get shape(){return C(this,"shape",{...e}),this.shape},...K(t)})}function rY(e,t){return new rJ({type:"object",get shape(){return C(this,"shape",{...e}),this.shape},catchall:rZ(),...K(t)})}let rQ=P("ZodUnion",(e,t)=>{tR.init(e,t),rp.init(e,t),e.options=t.options});function r0(e,t){return new rQ({type:"union",options:e,...K(t)})}let r1=P("ZodDiscriminatedUnion",(e,t)=>{rQ.init(e,t),tj.init(e,t)});function r2(e,t,r){return new r1({type:"union",options:t,discriminator:e,...K(r)})}let r5=P("ZodIntersection",(e,t)=>{tN.init(e,t),rp.init(e,t)});function r9(e,t){return new r5({type:"intersection",left:e,right:t})}let r4=P("ZodRecord",(e,t)=>{tz.init(e,t),rp.init(e,t),e.keyType=t.keyType,e.valueType=t.valueType});function r6(e,t,r){return new r4({type:"record",keyType:e,valueType:t,...K(r)})}let r8=P("ZodEnum",(e,t)=>{tC.init(e,t),rp.init(e,t),e.enum=t.entries,e.options=Object.values(t.entries);let r=new Set(Object.keys(t.entries));e.extract=(e,s)=>{let o={};for(let s of e)if(r.has(s))o[s]=t.entries[s];else throw Error(`Key ${s} not found in enum`);return new r8({...t,checks:[],...K(s),entries:o})},e.exclude=(e,s)=>{let o={...t.entries};for(let t of e)if(r.has(t))delete o[t];else throw Error(`Key ${t} not found in enum`);return new r8({...t,checks:[],...K(s),entries:o})}});function r3(e,t){return new r8({type:"enum",entries:Array.isArray(e)?Object.fromEntries(e.map(e=>[e,e])):e,...K(t)})}let r7=P("ZodLiteral",(e,t)=>{tM.init(e,t),rp.init(e,t),e.values=new Set(t.values),Object.defineProperty(e,"value",{get(){if(t.values.length>1)throw Error("This schema contains multiple valid literal values. Use `.values` instead.");return t.values[0]}})});function se(e,t){return new r7({type:"literal",values:Array.isArray(e)?e:[e],...K(t)})}let st=P("ZodTransform",(e,t)=>{tD.init(e,t),rp.init(e,t),e._zod.parse=(r,s)=>{r.addIssue=s=>{"string"==typeof s?r.issues.push(Y(s,r.value,t)):(s.fatal&&(s.continue=!1),s.code??(s.code="custom"),s.input??(s.input=r.value),s.inst??(s.inst=e),s.continue??(s.continue=!0),r.issues.push(Y(s)))};let o=t.transform(r.value,r);return o instanceof Promise?o.then(e=>(r.value=e,r)):(r.value=o,r)}});function sr(e){return new st({type:"transform",transform:e})}let ss=P("ZodOptional",(e,t)=>{tL.init(e,t),rp.init(e,t),e.unwrap=()=>e._zod.def.innerType});function so(e){return new ss({type:"optional",innerType:e})}let si=P("ZodNullable",(e,t)=>{tq.init(e,t),rp.init(e,t),e.unwrap=()=>e._zod.def.innerType});function sn(e){return new si({type:"nullable",innerType:e})}let sa=P("ZodDefault",(e,t)=>{tU.init(e,t),rp.init(e,t),e.unwrap=()=>e._zod.def.innerType,e.removeDefault=e.unwrap}),sl=P("ZodPrefault",(e,t)=>{tF.init(e,t),rp.init(e,t),e.unwrap=()=>e._zod.def.innerType}),su=P("ZodNonOptional",(e,t)=>{tH.init(e,t),rp.init(e,t),e.unwrap=()=>e._zod.def.innerType}),sc=P("ZodCatch",(e,t)=>{tZ.init(e,t),rp.init(e,t),e.unwrap=()=>e._zod.def.innerType,e.removeCatch=e.unwrap}),sd=P("ZodPipe",(e,t)=>{tG.init(e,t),rp.init(e,t),e.in=t.in,e.out=t.out});function sp(e,t){return new sd({type:"pipe",in:e,out:t})}let sf=P("ZodReadonly",(e,t)=>{tW.init(e,t),rp.init(e,t)}),sh=P("ZodCustom",(e,t)=>{tX.init(e,t),rp.init(e,t)}),sm="2025-11-25",sy=[sm,"2025-06-18","2025-03-26","2024-11-05","2024-10-07"],sv="io.modelcontextprotocol/related-task",sg=(r=(e=>null!==e&&("object"==typeof e||"function"==typeof e))??(()=>!0),(t=K(void 0)).abort??(t.abort=!0),new sh({type:"custom",check:"custom",fn:r,...t})),s_=r0([rm(),rM().int()]),s$=rm();rY({ttl:r0([rM(),rF()]).optional(),pollInterval:rM().optional()});let sw=rX({ttl:rM().optional()}),sb=rX({taskId:rm()}),sE=rY({progressToken:s_.optional(),[sv]:sb.optional()}),sk=rX({_meta:sE.optional()}),sS=sk.extend({task:sw.optional()}),sT=rX({method:rm(),params:sk.loose().optional()}),sx=rX({_meta:sE.optional()}),sP=rX({method:rm(),params:sx.loose().optional()}),sI=rY({_meta:sE.optional()}),sO=r0([rm(),rM().int()]),sR=rX({jsonrpc:se("2.0"),id:sO,...sT.shape}).strict(),sj=e=>sR.safeParse(e).success,sN=rX({jsonrpc:se("2.0"),...sP.shape}).strict(),sA=rX({jsonrpc:se("2.0"),id:sO,result:sI}).strict(),sz=e=>sA.safeParse(e).success;(s=d||(d={}))[s.ConnectionClosed=-32e3]="ConnectionClosed",s[s.RequestTimeout=-32001]="RequestTimeout",s[s.ParseError=-32700]="ParseError",s[s.InvalidRequest=-32600]="InvalidRequest",s[s.MethodNotFound=-32601]="MethodNotFound",s[s.InvalidParams=-32602]="InvalidParams",s[s.InternalError=-32603]="InternalError",s[s.UrlElicitationRequired=-32042]="UrlElicitationRequired";let sC=rX({jsonrpc:se("2.0"),id:sO.optional(),error:rX({code:rM().int(),message:rm(),data:rZ().optional()})}).strict(),sM=r0([sR,sN,sA,sC]);r0([sA,sC]);let sD=sI.strict(),sL=sx.extend({requestId:sO.optional(),reason:rm().optional()}),sq=sP.extend({method:se("notifications/cancelled"),params:sL}),sU=rX({src:rm(),mimeType:rm().optional(),sizes:rW(rm()).optional(),theme:r3(["light","dark"]).optional()}),sV=rX({icons:rW(sU).optional()}),sF=rX({name:rm(),title:rm().optional()}),sH=sF.extend({...sF.shape,...sV.shape,version:rm(),websiteUrl:rm().optional(),description:rm().optional()}),sK=r9(rX({applyDefaults:rU().optional()}),r6(rm(),rZ())),sZ=(o=e=>e&&"object"==typeof e&&!Array.isArray(e)&&0===Object.keys(e).length?{form:{}}:e,a=r9(rX({form:sK.optional(),url:sg.optional()}),r6(rm(),rZ()).optional()),sp(sr(o),a)),sG=rY({list:sg.optional(),cancel:sg.optional(),requests:rY({sampling:rY({createMessage:sg.optional()}).optional(),elicitation:rY({create:sg.optional()}).optional()}).optional()}),sB=rY({list:sg.optional(),cancel:sg.optional(),requests:rY({tools:rY({call:sg.optional()}).optional()}).optional()}),sW=rX({experimental:r6(rm(),sg).optional(),sampling:rX({context:sg.optional(),tools:sg.optional()}).optional(),elicitation:sZ.optional(),roots:rX({listChanged:rU().optional()}).optional(),tasks:sG.optional()}),sJ=sk.extend({protocolVersion:rm(),capabilities:sW,clientInfo:sH}),sX=sT.extend({method:se("initialize"),params:sJ}),sY=rX({experimental:r6(rm(),sg).optional(),logging:sg.optional(),completions:sg.optional(),prompts:rX({listChanged:rU().optional()}).optional(),resources:rX({subscribe:rU().optional(),listChanged:rU().optional()}).optional(),tools:rX({listChanged:rU().optional()}).optional(),tasks:sB.optional()}),sQ=sI.extend({protocolVersion:rm(),capabilities:sY,serverInfo:sH,instructions:rm().optional()}),s0=sP.extend({method:se("notifications/initialized"),params:sx.optional()}),s1=sT.extend({method:se("ping"),params:sk.optional()}),s2=rX({progress:rM(),total:so(rM()),message:so(rm())}),s5=rX({...sx.shape,...s2.shape,progressToken:s_}),s9=sP.extend({method:se("notifications/progress"),params:s5}),s4=sk.extend({cursor:s$.optional()}),s6=sT.extend({params:s4.optional()}),s8=sI.extend({nextCursor:s$.optional()}),s3=r3(["working","input_required","completed","failed","cancelled"]),s7=rX({taskId:rm(),status:s3,ttl:r0([rM(),rF()]),createdAt:rm(),lastUpdatedAt:rm(),pollInterval:so(rM()),statusMessage:so(rm())}),oe=sI.extend({task:s7}),ot=sx.merge(s7),or=sP.extend({method:se("notifications/tasks/status"),params:ot}),os=sT.extend({method:se("tasks/get"),params:sk.extend({taskId:rm()})}),oo=sI.merge(s7),oi=sT.extend({method:se("tasks/result"),params:sk.extend({taskId:rm()})});sI.loose();let on=s6.extend({method:se("tasks/list")}),oa=s8.extend({tasks:rW(s7)}),ol=sT.extend({method:se("tasks/cancel"),params:sk.extend({taskId:rm()})}),ou=sI.merge(s7),oc=rX({uri:rm(),mimeType:so(rm()),_meta:r6(rm(),rZ()).optional()}),od=oc.extend({text:rm()}),op=rm().refine(e=>{try{return atob(e),!0}catch{return!1}},{message:"Invalid Base64 string"}),of=oc.extend({blob:op}),oh=r3(["user","assistant"]),om=rX({audience:rW(oh).optional(),priority:rM().min(0).max(1).optional(),lastModified:rr({offset:!0}).optional()}),oy=rX({...sF.shape,...sV.shape,uri:rm(),description:so(rm()),mimeType:so(rm()),annotations:om.optional(),_meta:so(rY({}))}),ov=rX({...sF.shape,...sV.shape,uriTemplate:rm(),description:so(rm()),mimeType:so(rm()),annotations:om.optional(),_meta:so(rY({}))}),og=s6.extend({method:se("resources/list")}),o_=s8.extend({resources:rW(oy)}),o$=s6.extend({method:se("resources/templates/list")}),ow=s8.extend({resourceTemplates:rW(ov)}),ob=sk.extend({uri:rm()}),oE=sT.extend({method:se("resources/read"),params:ob}),ok=sI.extend({contents:rW(r0([od,of]))}),oS=sP.extend({method:se("notifications/resources/list_changed"),params:sx.optional()}),oT=sT.extend({method:se("resources/subscribe"),params:ob}),ox=sT.extend({method:se("resources/unsubscribe"),params:ob}),oP=sx.extend({uri:rm()}),oI=sP.extend({method:se("notifications/resources/updated"),params:oP}),oO=rX({name:rm(),description:so(rm()),required:so(rU())}),oR=rX({...sF.shape,...sV.shape,description:so(rm()),arguments:so(rW(oO)),_meta:so(rY({}))}),oj=s6.extend({method:se("prompts/list")}),oN=s8.extend({prompts:rW(oR)}),oA=sk.extend({name:rm(),arguments:r6(rm(),rm()).optional()}),oz=sT.extend({method:se("prompts/get"),params:oA}),oC=rX({type:se("text"),text:rm(),annotations:om.optional(),_meta:r6(rm(),rZ()).optional()}),oM=rX({type:se("image"),data:op,mimeType:rm(),annotations:om.optional(),_meta:r6(rm(),rZ()).optional()}),oD=rX({type:se("audio"),data:op,mimeType:rm(),annotations:om.optional(),_meta:r6(rm(),rZ()).optional()}),oL=rX({type:se("tool_use"),name:rm(),id:rm(),input:r6(rm(),rZ()),_meta:r6(rm(),rZ()).optional()}),oq=rX({type:se("resource"),resource:r0([od,of]),annotations:om.optional(),_meta:r6(rm(),rZ()).optional()}),oU=r0([oC,oM,oD,oy.extend({type:se("resource_link")}),oq]),oV=rX({role:oh,content:oU}),oF=sI.extend({description:rm().optional(),messages:rW(oV)}),oH=sP.extend({method:se("notifications/prompts/list_changed"),params:sx.optional()}),oK=rX({title:rm().optional(),readOnlyHint:rU().optional(),destructiveHint:rU().optional(),idempotentHint:rU().optional(),openWorldHint:rU().optional()}),oZ=rX({taskSupport:r3(["required","optional","forbidden"]).optional()}),oG=rX({...sF.shape,...sV.shape,description:rm().optional(),inputSchema:rX({type:se("object"),properties:r6(rm(),sg).optional(),required:rW(rm()).optional()}).catchall(rZ()),outputSchema:rX({type:se("object"),properties:r6(rm(),sg).optional(),required:rW(rm()).optional()}).catchall(rZ()).optional(),annotations:oK.optional(),execution:oZ.optional(),_meta:r6(rm(),rZ()).optional()}),oB=s6.extend({method:se("tools/list")}),oW=s8.extend({tools:rW(oG)}),oJ=sI.extend({content:rW(oU).default([]),structuredContent:r6(rm(),rZ()).optional(),isError:rU().optional()});oJ.or(sI.extend({toolResult:rZ()}));let oX=sS.extend({name:rm(),arguments:r6(rm(),rZ()).optional()}),oY=sT.extend({method:se("tools/call"),params:oX}),oQ=sP.extend({method:se("notifications/tools/list_changed"),params:sx.optional()}),o0=rX({autoRefresh:rU().default(!0),debounceMs:rM().int().nonnegative().default(300)}),o1=r3(["debug","info","notice","warning","error","critical","alert","emergency"]),o2=sk.extend({level:o1}),o5=sT.extend({method:se("logging/setLevel"),params:o2}),o9=sx.extend({level:o1,logger:rm().optional(),data:rZ()}),o4=sP.extend({method:se("notifications/message"),params:o9}),o6=rX({name:rm().optional()}),o8=rX({hints:rW(o6).optional(),costPriority:rM().min(0).max(1).optional(),speedPriority:rM().min(0).max(1).optional(),intelligencePriority:rM().min(0).max(1).optional()}),o3=rX({mode:r3(["auto","required","none"]).optional()}),o7=rX({type:se("tool_result"),toolUseId:rm().describe("The unique identifier for the corresponding tool call."),content:rW(oU).default([]),structuredContent:rX({}).loose().optional(),isError:rU().optional(),_meta:r6(rm(),rZ()).optional()}),ie=r2("type",[oC,oM,oD]),it=r2("type",[oC,oM,oD,oL,o7]),ir=rX({role:oh,content:r0([it,rW(it)]),_meta:r6(rm(),rZ()).optional()}),is=sS.extend({messages:rW(ir),modelPreferences:o8.optional(),systemPrompt:rm().optional(),includeContext:r3(["none","thisServer","allServers"]).optional(),temperature:rM().optional(),maxTokens:rM().int(),stopSequences:rW(rm()).optional(),metadata:sg.optional(),tools:rW(oG).optional(),toolChoice:o3.optional()}),io=sT.extend({method:se("sampling/createMessage"),params:is}),ii=sI.extend({model:rm(),stopReason:so(r3(["endTurn","stopSequence","maxTokens"]).or(rm())),role:oh,content:ie}),ia=sI.extend({model:rm(),stopReason:so(r3(["endTurn","stopSequence","maxTokens","toolUse"]).or(rm())),role:oh,content:r0([it,rW(it)])}),il=rX({type:se("boolean"),title:rm().optional(),description:rm().optional(),default:rU().optional()}),iu=rX({type:se("string"),title:rm().optional(),description:rm().optional(),minLength:rM().optional(),maxLength:rM().optional(),format:r3(["email","uri","date","date-time"]).optional(),default:rm().optional()}),ic=rX({type:r3(["number","integer"]),title:rm().optional(),description:rm().optional(),minimum:rM().optional(),maximum:rM().optional(),default:rM().optional()}),id=rX({type:se("string"),title:rm().optional(),description:rm().optional(),enum:rW(rm()),default:rm().optional()}),ip=rX({type:se("string"),title:rm().optional(),description:rm().optional(),oneOf:rW(rX({const:rm(),title:rm()})),default:rm().optional()}),ih=rX({type:se("string"),title:rm().optional(),description:rm().optional(),enum:rW(rm()),enumNames:rW(rm()).optional(),default:rm().optional()}),im=r0([id,ip]),iy=r0([rX({type:se("array"),title:rm().optional(),description:rm().optional(),minItems:rM().optional(),maxItems:rM().optional(),items:rX({type:se("string"),enum:rW(rm())}),default:rW(rm()).optional()}),rX({type:se("array"),title:rm().optional(),description:rm().optional(),minItems:rM().optional(),maxItems:rM().optional(),items:rX({anyOf:rW(rX({const:rm(),title:rm()}))}),default:rW(rm()).optional()})]),iv=r0([ih,im,iy]),ig=r0([iv,il,iu,ic]),i_=r0([sS.extend({mode:se("form").optional(),message:rm(),requestedSchema:rX({type:se("object"),properties:r6(rm(),ig),required:rW(rm()).optional()})}),sS.extend({mode:se("url"),message:rm(),elicitationId:rm(),url:rm().url()})]),i$=sT.extend({method:se("elicitation/create"),params:i_}),iw=sx.extend({elicitationId:rm()}),ib=sP.extend({method:se("notifications/elicitation/complete"),params:iw}),iE=sI.extend({action:r3(["accept","decline","cancel"]),content:(l=e=>null===e?void 0:e,u=r6(rm(),r0([rm(),rM(),rU(),rW(rm())])).optional(),sp(sr(l),u))}),ik=rX({type:se("ref/resource"),uri:rm()}),iS=rX({type:se("ref/prompt"),name:rm()}),iT=sk.extend({ref:r0([iS,ik]),argument:rX({name:rm(),value:rm()}),context:rX({arguments:r6(rm(),rm()).optional()}).optional()}),ix=sT.extend({method:se("completion/complete"),params:iT}),iP=sI.extend({completion:rY({values:rW(rm()).max(100),total:so(rM().int()),hasMore:so(rU())})}),iI=rX({uri:rm().startsWith("file://"),name:rm().optional(),_meta:r6(rm(),rZ()).optional()}),iO=sT.extend({method:se("roots/list"),params:sk.optional()}),iR=sI.extend({roots:rW(iI)}),ij=sP.extend({method:se("notifications/roots/list_changed"),params:sx.optional()});r0([s1,sX,ix,o5,oz,oj,og,o$,oE,oT,ox,oY,oB,os,oi,on,ol]),r0([sq,s9,s0,ij,or]),r0([sD,ii,ia,iE,iR,oo,oa,oe]),r0([s1,io,i$,iO,os,oi,on,ol]),r0([sq,s9,o4,oI,oS,oQ,oH,or,ib]),r0([sD,sQ,iP,oF,oN,o_,ow,ok,oJ,oW,oo,oa,oe]);class iN extends Error{constructor(e,t,r){super(`MCP error ${e}: ${t}`),this.code=e,this.data=r,this.name="McpError"}static fromError(e,t,r){return e===d.UrlElicitationRequired&&r&&r.elicitations?new iA(r.elicitations,t):new iN(e,t,r)}}class iA extends iN{constructor(e,t=`URL elicitation${e.length>1?"s":""} required`){super(d.UrlElicitationRequired,t,{elicitations:e})}get elicitations(){return this.data?.elicitations??[]}}function iz(e){return"completed"===e||"failed"===e||"cancelled"===e}function iC(e){let t=el(e),r=t?.method;if(!r)throw Error("Schema is missing a method literal");let s=function(e){if(en(e)){let t=e._zod?.def;if(t){if(void 0!==t.value)return t.value;if(Array.isArray(t.values)&&t.values.length>0)return t.values[0]}}let t=e._def;if(t){if(void 0!==t.value)return t.value;if(Array.isArray(t.values)&&t.values.length>0)return t.values[0]}let r=e.value;if(void 0!==r)return r}(r);if("string"!=typeof s)throw Error("Schema method literal must be a string");return s}function iM(e,t){let r=ea(e,t);if(!r.success)throw r.error;return r.data}Symbol("Let zodToJsonSchema decide on which parser to use");class iD{constructor(e){this._options=e,this._requestMessageId=0,this._requestHandlers=new Map,this._requestHandlerAbortControllers=new Map,this._notificationHandlers=new Map,this._responseHandlers=new Map,this._progressHandlers=new Map,this._timeoutInfo=new Map,this._pendingDebouncedNotifications=new Set,this._taskProgressTokens=new Map,this._requestResolvers=new Map,this.setNotificationHandler(sq,e=>{this._oncancel(e)}),this.setNotificationHandler(s9,e=>{this._onprogress(e)}),this.setRequestHandler(s1,e=>({})),this._taskStore=e?.taskStore,this._taskMessageQueue=e?.taskMessageQueue,this._taskStore&&(this.setRequestHandler(os,async(e,t)=>{let r=await this._taskStore.getTask(e.params.taskId,t.sessionId);if(!r)throw new iN(d.InvalidParams,"Failed to retrieve task: Task not found");return{...r}}),this.setRequestHandler(oi,async(e,t)=>{let r=async()=>{let s=e.params.taskId;if(this._taskMessageQueue){let e;for(;e=await this._taskMessageQueue.dequeue(s,t.sessionId);){if("response"===e.type||"error"===e.type){let t=e.message,r=t.id,s=this._requestResolvers.get(r);if(s)this._requestResolvers.delete(r),s("response"===e.type?t:new iN(t.error.code,t.error.message,t.error.data));else{let t="response"===e.type?"Response":"Error";this._onerror(Error(`${t} handler missing for request ${r}`))}continue}await this._transport?.send(e.message,{relatedRequestId:t.requestId})}}let o=await this._taskStore.getTask(s,t.sessionId);if(!o)throw new iN(d.InvalidParams,`Task not found: ${s}`);if(!iz(o.status))return await this._waitForTaskUpdate(s,t.signal),await r();if(iz(o.status)){let e=await this._taskStore.getTaskResult(s,t.sessionId);return this._clearTaskQueue(s),{...e,_meta:{...e._meta,[sv]:{taskId:s}}}}return await r()};return await r()}),this.setRequestHandler(on,async(e,t)=>{try{let{tasks:r,nextCursor:s}=await this._taskStore.listTasks(e.params?.cursor,t.sessionId);return{tasks:r,nextCursor:s,_meta:{}}}catch(e){throw new iN(d.InvalidParams,`Failed to list tasks: ${e instanceof Error?e.message:String(e)}`)}}),this.setRequestHandler(ol,async(e,t)=>{try{let r=await this._taskStore.getTask(e.params.taskId,t.sessionId);if(!r)throw new iN(d.InvalidParams,`Task not found: ${e.params.taskId}`);if(iz(r.status))throw new iN(d.InvalidParams,`Cannot cancel task in terminal status: ${r.status}`);await this._taskStore.updateTaskStatus(e.params.taskId,"cancelled","Client cancelled task execution.",t.sessionId),this._clearTaskQueue(e.params.taskId);let s=await this._taskStore.getTask(e.params.taskId,t.sessionId);if(!s)throw new iN(d.InvalidParams,`Task not found after cancellation: ${e.params.taskId}`);return{_meta:{},...s}}catch(e){if(e instanceof iN)throw e;throw new iN(d.InvalidRequest,`Failed to cancel task: ${e instanceof Error?e.message:String(e)}`)}}))}async _oncancel(e){if(!e.params.requestId)return;let t=this._requestHandlerAbortControllers.get(e.params.requestId);t?.abort(e.params.reason)}_setupTimeout(e,t,r,s,o=!1){this._timeoutInfo.set(e,{timeoutId:setTimeout(s,t),startTime:Date.now(),timeout:t,maxTotalTimeout:r,resetTimeoutOnProgress:o,onTimeout:s})}_resetTimeout(e){let t=this._timeoutInfo.get(e);if(!t)return!1;let r=Date.now()-t.startTime;if(t.maxTotalTimeout&&r>=t.maxTotalTimeout)throw this._timeoutInfo.delete(e),iN.fromError(d.RequestTimeout,"Maximum total timeout exceeded",{maxTotalTimeout:t.maxTotalTimeout,totalElapsed:r});return clearTimeout(t.timeoutId),t.timeoutId=setTimeout(t.onTimeout,t.timeout),!0}_cleanupTimeout(e){let t=this._timeoutInfo.get(e);t&&(clearTimeout(t.timeoutId),this._timeoutInfo.delete(e))}async connect(e){this._transport=e;let t=this.transport?.onclose;this._transport.onclose=()=>{t?.(),this._onclose()};let r=this.transport?.onerror;this._transport.onerror=e=>{r?.(e),this._onerror(e)};let s=this._transport?.onmessage;this._transport.onmessage=(e,t)=>{if(s?.(e,t),sz(e)||sC.safeParse(e).success)this._onresponse(e);else if(sj(e))this._onrequest(e,t);else sN.safeParse(e).success?this._onnotification(e):this._onerror(Error(`Unknown message type: ${JSON.stringify(e)}`))},await this._transport.start()}_onclose(){let e=this._responseHandlers;this._responseHandlers=new Map,this._progressHandlers.clear(),this._taskProgressTokens.clear(),this._pendingDebouncedNotifications.clear();let t=iN.fromError(d.ConnectionClosed,"Connection closed");for(let r of(this._transport=void 0,this.onclose?.(),e.values()))r(t)}_onerror(e){this.onerror?.(e)}_onnotification(e){let t=this._notificationHandlers.get(e.method)??this.fallbackNotificationHandler;void 0!==t&&Promise.resolve().then(()=>t(e)).catch(e=>this._onerror(Error(`Uncaught error in notification handler: ${e}`)))}_onrequest(e,t){let r,s=this._requestHandlers.get(e.method)??this.fallbackRequestHandler,o=this._transport,i=e.params?._meta?.[sv]?.taskId;if(void 0===s){let t={jsonrpc:"2.0",id:e.id,error:{code:d.MethodNotFound,message:"Method not found"}};i&&this._taskMessageQueue?this._enqueueTaskMessage(i,{type:"error",message:t,timestamp:Date.now()},o?.sessionId).catch(e=>this._onerror(Error(`Failed to enqueue error response: ${e}`))):o?.send(t).catch(e=>this._onerror(Error(`Failed to send an error response: ${e}`)));return}let n=new AbortController;this._requestHandlerAbortControllers.set(e.id,n);let a=(r=e.params,sS.safeParse(r).success)?e.params.task:void 0,l=this._taskStore?this.requestTaskStore(e,o?.sessionId):void 0,u={signal:n.signal,sessionId:o?.sessionId,_meta:e.params?._meta,sendNotification:async t=>{let r={relatedRequestId:e.id};i&&(r.relatedTask={taskId:i}),await this.notification(t,r)},sendRequest:async(t,r,s)=>{let o={...s,relatedRequestId:e.id};i&&!o.relatedTask&&(o.relatedTask={taskId:i});let n=o.relatedTask?.taskId??i;return n&&l&&await l.updateTaskStatus(n,"input_required"),await this.request(t,r,o)},authInfo:t?.authInfo,requestId:e.id,requestInfo:t?.requestInfo,taskId:i,taskStore:l,taskRequestedTtl:a?.ttl,closeSSEStream:t?.closeSSEStream,closeStandaloneSSEStream:t?.closeStandaloneSSEStream};Promise.resolve().then(()=>{a&&this.assertTaskHandlerCapability(e.method)}).then(()=>s(e,u)).then(async t=>{if(n.signal.aborted)return;let r={result:t,jsonrpc:"2.0",id:e.id};i&&this._taskMessageQueue?await this._enqueueTaskMessage(i,{type:"response",message:r,timestamp:Date.now()},o?.sessionId):await o?.send(r)},async t=>{if(n.signal.aborted)return;let r={jsonrpc:"2.0",id:e.id,error:{code:Number.isSafeInteger(t.code)?t.code:d.InternalError,message:t.message??"Internal error",...void 0!==t.data&&{data:t.data}}};i&&this._taskMessageQueue?await this._enqueueTaskMessage(i,{type:"error",message:r,timestamp:Date.now()},o?.sessionId):await o?.send(r)}).catch(e=>this._onerror(Error(`Failed to send response: ${e}`))).finally(()=>{this._requestHandlerAbortControllers.delete(e.id)})}_onprogress(e){let{progressToken:t,...r}=e.params,s=Number(t),o=this._progressHandlers.get(s);if(!o)return void this._onerror(Error(`Received a progress notification for an unknown token: ${JSON.stringify(e)}`));let i=this._responseHandlers.get(s),n=this._timeoutInfo.get(s);if(n&&i&&n.resetTimeoutOnProgress)try{this._resetTimeout(s)}catch(e){this._responseHandlers.delete(s),this._progressHandlers.delete(s),this._cleanupTimeout(s),i(e);return}o(r)}_onresponse(e){let t=Number(e.id),r=this._requestResolvers.get(t);if(r){this._requestResolvers.delete(t),r(sz(e)?e:new iN(e.error.code,e.error.message,e.error.data));return}let s=this._responseHandlers.get(t);if(void 0===s)return void this._onerror(Error(`Received a response for an unknown message ID: ${JSON.stringify(e)}`));this._responseHandlers.delete(t),this._cleanupTimeout(t);let o=!1;if(sz(e)&&e.result&&"object"==typeof e.result){let r=e.result;if(r.task&&"object"==typeof r.task){let e=r.task;"string"==typeof e.taskId&&(o=!0,this._taskProgressTokens.set(e.taskId,t))}}o||this._progressHandlers.delete(t),s(sz(e)?e:iN.fromError(e.error.code,e.error.message,e.error.data))}get transport(){return this._transport}async close(){await this._transport?.close()}async *requestStream(e,t,r){let s,{task:o}=r??{};if(!o){try{let s=await this.request(e,t,r);yield{type:"result",result:s}}catch(e){yield{type:"error",error:e instanceof iN?e:new iN(d.InternalError,String(e))}}return}try{let o=await this.request(e,oe,r);if(o.task)s=o.task.taskId,yield{type:"taskCreated",task:o.task};else throw new iN(d.InternalError,"Task creation did not return a task");for(;;){let e=await this.getTask({taskId:s},r);if(yield{type:"taskStatus",task:e},iz(e.status)){if("completed"===e.status){let e=await this.getTaskResult({taskId:s},t,r);yield{type:"result",result:e}}else"failed"===e.status?yield{type:"error",error:new iN(d.InternalError,`Task ${s} failed`)}:"cancelled"===e.status&&(yield{type:"error",error:new iN(d.InternalError,`Task ${s} was cancelled`)});return}if("input_required"===e.status){let e=await this.getTaskResult({taskId:s},t,r);yield{type:"result",result:e};return}let o=e.pollInterval??this._options?.defaultTaskPollInterval??1e3;await new Promise(e=>setTimeout(e,o)),r?.signal?.throwIfAborted()}}catch(e){yield{type:"error",error:e instanceof iN?e:new iN(d.InternalError,String(e))}}}request(e,t,r){let{relatedRequestId:s,resumptionToken:o,onresumptiontoken:i,task:n,relatedTask:a}=r??{};return new Promise((l,u)=>{let c=e=>{u(e)};if(!this._transport)return void c(Error("Not connected"));if(this._options?.enforceStrictCapabilities===!0)try{this.assertCapabilityForMethod(e.method),n&&this.assertTaskCapability(e.method)}catch(e){c(e);return}r?.signal?.throwIfAborted();let p=this._requestMessageId++,f={...e,jsonrpc:"2.0",id:p};r?.onprogress&&(this._progressHandlers.set(p,r.onprogress),f.params={...e.params,_meta:{...e.params?._meta||{},progressToken:p}}),n&&(f.params={...f.params,task:n}),a&&(f.params={...f.params,_meta:{...f.params?._meta||{},[sv]:a}});let h=e=>{this._responseHandlers.delete(p),this._progressHandlers.delete(p),this._cleanupTimeout(p),this._transport?.send({jsonrpc:"2.0",method:"notifications/cancelled",params:{requestId:p,reason:String(e)}},{relatedRequestId:s,resumptionToken:o,onresumptiontoken:i}).catch(e=>this._onerror(Error(`Failed to send cancellation: ${e}`))),u(e instanceof iN?e:new iN(d.RequestTimeout,String(e)))};this._responseHandlers.set(p,e=>{if(!r?.signal?.aborted){if(e instanceof Error)return u(e);try{let r=ea(t,e.result);r.success?l(r.data):u(r.error)}catch(e){u(e)}}}),r?.signal?.addEventListener("abort",()=>{h(r?.signal?.reason)});let m=r?.timeout??6e4;this._setupTimeout(p,m,r?.maxTotalTimeout,()=>h(iN.fromError(d.RequestTimeout,"Request timed out",{timeout:m})),r?.resetTimeoutOnProgress??!1);let y=a?.taskId;if(y){let e=e=>{let t=this._responseHandlers.get(p);t?t(e):this._onerror(Error(`Response handler missing for side-channeled request ${p}`))};this._requestResolvers.set(p,e),this._enqueueTaskMessage(y,{type:"request",message:f,timestamp:Date.now()}).catch(e=>{this._cleanupTimeout(p),u(e)})}else this._transport.send(f,{relatedRequestId:s,resumptionToken:o,onresumptiontoken:i}).catch(e=>{this._cleanupTimeout(p),u(e)})})}async getTask(e,t){return this.request({method:"tasks/get",params:e},oo,t)}async getTaskResult(e,t,r){return this.request({method:"tasks/result",params:e},t,r)}async listTasks(e,t){return this.request({method:"tasks/list",params:e},oa,t)}async cancelTask(e,t){return this.request({method:"tasks/cancel",params:e},ou,t)}async notification(e,t){if(!this._transport)throw Error("Not connected");this.assertNotificationCapability(e.method);let r=t?.relatedTask?.taskId;if(r){let s={...e,jsonrpc:"2.0",params:{...e.params,_meta:{...e.params?._meta||{},[sv]:t.relatedTask}}};await this._enqueueTaskMessage(r,{type:"notification",message:s,timestamp:Date.now()});return}if((this._options?.debouncedNotificationMethods??[]).includes(e.method)&&!e.params&&!t?.relatedRequestId&&!t?.relatedTask){if(this._pendingDebouncedNotifications.has(e.method))return;this._pendingDebouncedNotifications.add(e.method),Promise.resolve().then(()=>{if(this._pendingDebouncedNotifications.delete(e.method),!this._transport)return;let r={...e,jsonrpc:"2.0"};t?.relatedTask&&(r={...r,params:{...r.params,_meta:{...r.params?._meta||{},[sv]:t.relatedTask}}}),this._transport?.send(r,t).catch(e=>this._onerror(e))});return}let s={...e,jsonrpc:"2.0"};t?.relatedTask&&(s={...s,params:{...s.params,_meta:{...s.params?._meta||{},[sv]:t.relatedTask}}}),await this._transport.send(s,t)}setRequestHandler(e,t){let r=iC(e);this.assertRequestHandlerCapability(r),this._requestHandlers.set(r,(r,s)=>Promise.resolve(t(iM(e,r),s)))}removeRequestHandler(e){this._requestHandlers.delete(e)}assertCanSetRequestHandler(e){if(this._requestHandlers.has(e))throw Error(`A request handler for ${e} already exists, which would be overridden`)}setNotificationHandler(e,t){let r=iC(e);this._notificationHandlers.set(r,r=>Promise.resolve(t(iM(e,r))))}removeNotificationHandler(e){this._notificationHandlers.delete(e)}_cleanupTaskProgressHandler(e){let t=this._taskProgressTokens.get(e);void 0!==t&&(this._progressHandlers.delete(t),this._taskProgressTokens.delete(e))}async _enqueueTaskMessage(e,t,r){if(!this._taskStore||!this._taskMessageQueue)throw Error("Cannot enqueue task message: taskStore and taskMessageQueue are not configured");let s=this._options?.maxTaskQueueSize;await this._taskMessageQueue.enqueue(e,t,r,s)}async _clearTaskQueue(e,t){if(this._taskMessageQueue){for(let r of(await this._taskMessageQueue.dequeueAll(e,t)))if("request"===r.type&&sj(r.message)){let t=r.message.id,s=this._requestResolvers.get(t);s?(s(new iN(d.InternalError,"Task cancelled or completed")),this._requestResolvers.delete(t)):this._onerror(Error(`Resolver missing for request ${t} during task ${e} cleanup`))}}}async _waitForTaskUpdate(e,t){let r=this._options?.defaultTaskPollInterval??1e3;try{let t=await this._taskStore?.getTask(e);t?.pollInterval&&(r=t.pollInterval)}catch{}return new Promise((e,s)=>{if(t.aborted)return void s(new iN(d.InvalidRequest,"Request cancelled"));let o=setTimeout(e,r);t.addEventListener("abort",()=>{clearTimeout(o),s(new iN(d.InvalidRequest,"Request cancelled"))},{once:!0})})}requestTaskStore(e,t){let r=this._taskStore;if(!r)throw Error("No task store configured");return{createTask:async s=>{if(!e)throw Error("No request provided");return await r.createTask(s,e.id,{method:e.method,params:e.params},t)},getTask:async e=>{let s=await r.getTask(e,t);if(!s)throw new iN(d.InvalidParams,"Failed to retrieve task: Task not found");return s},storeTaskResult:async(e,s,o)=>{await r.storeTaskResult(e,s,o,t);let i=await r.getTask(e,t);if(i){let t=or.parse({method:"notifications/tasks/status",params:i});await this.notification(t),iz(i.status)&&this._cleanupTaskProgressHandler(e)}},getTaskResult:e=>r.getTaskResult(e,t),updateTaskStatus:async(e,s,o)=>{let i=await r.getTask(e,t);if(!i)throw new iN(d.InvalidParams,`Task "${e}" not found - it may have been cleaned up`);if(iz(i.status))throw new iN(d.InvalidParams,`Cannot update task "${e}" from terminal status "${i.status}" to "${s}". Terminal states (completed, failed, cancelled) cannot transition to other states.`);await r.updateTaskStatus(e,s,o,t);let n=await r.getTask(e,t);if(n){let t=or.parse({method:"notifications/tasks/status",params:n});await this.notification(t),iz(n.status)&&this._cleanupTaskProgressHandler(e)}},listTasks:e=>r.listTasks(e,t)}}}function iL(e){return null!==e&&"object"==typeof e&&!Array.isArray(e)}var iq=i(4319),iU=i(494);class iV{constructor(e){this._ajv=e??function(){let e=new iq({strict:!1,validateFormats:!0,validateSchema:!1,allErrors:!0});return iU(e),e}()}getValidator(e){let t="$id"in e&&"string"==typeof e.$id?this._ajv.getSchema(e.$id)??this._ajv.compile(e):this._ajv.compile(e);return e=>t(e)?{valid:!0,data:e,errorMessage:void 0}:{valid:!1,data:void 0,errorMessage:this._ajv.errorsText(t.errors)}}}class iF{constructor(e){this._client=e}async *callToolStream(e,t=oJ,r){let s=this._client,o={...r,task:r?.task??(s.isToolTask(e.name)?{}:void 0)},i=s.requestStream({method:"tools/call",params:e},t,o),n=s.getToolOutputValidator(e.name);for await(let t of i){if("result"===t.type&&n){let r=t.result;if(!r.structuredContent&&!r.isError)return void(yield{type:"error",error:new iN(d.InvalidRequest,`Tool ${e.name} has an output schema but did not return structured content`)});if(r.structuredContent)try{let e=n(r.structuredContent);if(!e.valid)return void(yield{type:"error",error:new iN(d.InvalidParams,`Structured content does not match the tool's output schema: ${e.errorMessage}`)})}catch(e){if(e instanceof iN)return void(yield{type:"error",error:e});yield{type:"error",error:new iN(d.InvalidParams,`Failed to validate structured content: ${e instanceof Error?e.message:String(e)}`)};return}}yield t}}async getTask(e,t){return this._client.getTask({taskId:e},t)}async getTaskResult(e,t,r){return this._client.getTaskResult({taskId:e},t,r)}async listTasks(e,t){return this._client.listTasks(e?{cursor:e}:void 0,t)}async cancelTask(e,t){return this._client.cancelTask({taskId:e},t)}requestStream(e,t,r){return this._client.requestStream(e,t,r)}}class iH extends iD{constructor(e,t){super(t),this._clientInfo=e,this._cachedToolOutputValidators=new Map,this._cachedKnownTaskTools=new Set,this._cachedRequiredTaskTools=new Set,this._listChangedDebounceTimers=new Map,this._capabilities=t?.capabilities??{},this._jsonSchemaValidator=t?.jsonSchemaValidator??new iV,t?.listChanged&&(this._pendingListChangedConfig=t.listChanged)}_setupListChangedHandlers(e){e.tools&&this._serverCapabilities?.tools?.listChanged&&this._setupListChangedHandler("tools",oQ,e.tools,async()=>(await this.listTools()).tools),e.prompts&&this._serverCapabilities?.prompts?.listChanged&&this._setupListChangedHandler("prompts",oH,e.prompts,async()=>(await this.listPrompts()).prompts),e.resources&&this._serverCapabilities?.resources?.listChanged&&this._setupListChangedHandler("resources",oS,e.resources,async()=>(await this.listResources()).resources)}get experimental(){return this._experimental||(this._experimental={tasks:new iF(this)}),this._experimental}registerCapabilities(e){if(this.transport)throw Error("Cannot register capabilities after connecting to transport");this._capabilities=function(e,t){let r={...e};for(let e in t){let s=t[e];if(void 0===s)continue;let o=r[e];iL(o)&&iL(s)?r[e]={...o,...s}:r[e]=s}return r}(this._capabilities,e)}setRequestHandler(e,t){let r,s=el(e),o=s?.method;if(!o)throw Error("Schema is missing a method literal");if(en(o)){let e=o._zod?.def;r=e?.value??o.value}else{let e=o._def;r=e?.value??o.value}if("string"!=typeof r)throw Error("Schema method literal must be a string");let i=r;if("elicitation/create"===i){let r=async(e,r)=>{let s=ea(i$,e);if(!s.success){let e=s.error instanceof Error?s.error.message:String(s.error);throw new iN(d.InvalidParams,`Invalid elicitation request: ${e}`)}let{params:o}=s.data;o.mode=o.mode??"form";let{supportsFormMode:i,supportsUrlMode:n}=function(e){if(!e)return{supportsFormMode:!1,supportsUrlMode:!1};let t=void 0!==e.form,r=void 0!==e.url;return{supportsFormMode:t||!t&&!r,supportsUrlMode:r}}(this._capabilities.elicitation);if("form"===o.mode&&!i)throw new iN(d.InvalidParams,"Client does not support form-mode elicitation requests");if("url"===o.mode&&!n)throw new iN(d.InvalidParams,"Client does not support URL-mode elicitation requests");let a=await Promise.resolve(t(e,r));if(o.task){let e=ea(oe,a);if(!e.success){let t=e.error instanceof Error?e.error.message:String(e.error);throw new iN(d.InvalidParams,`Invalid task creation result: ${t}`)}return e.data}let l=ea(iE,a);if(!l.success){let e=l.error instanceof Error?l.error.message:String(l.error);throw new iN(d.InvalidParams,`Invalid elicitation result: ${e}`)}let u=l.data,c="form"===o.mode?o.requestedSchema:void 0;if("form"===o.mode&&"accept"===u.action&&u.content&&c&&this._capabilities.elicitation?.form?.applyDefaults)try{!function e(t,r){if(t&&null!==r&&"object"==typeof r){if("object"===t.type&&t.properties&&"object"==typeof t.properties){let s=t.properties;for(let t of Object.keys(s)){let o=s[t];void 0===r[t]&&Object.prototype.hasOwnProperty.call(o,"default")&&(r[t]=o.default),void 0!==r[t]&&e(o,r[t])}}if(Array.isArray(t.anyOf))for(let s of t.anyOf)"boolean"!=typeof s&&e(s,r);if(Array.isArray(t.oneOf))for(let s of t.oneOf)"boolean"!=typeof s&&e(s,r)}}(c,u.content)}catch{}return u};return super.setRequestHandler(e,r)}if("sampling/createMessage"===i){let r=async(e,r)=>{let s=ea(io,e);if(!s.success){let e=s.error instanceof Error?s.error.message:String(s.error);throw new iN(d.InvalidParams,`Invalid sampling request: ${e}`)}let{params:o}=s.data,i=await Promise.resolve(t(e,r));if(o.task){let e=ea(oe,i);if(!e.success){let t=e.error instanceof Error?e.error.message:String(e.error);throw new iN(d.InvalidParams,`Invalid task creation result: ${t}`)}return e.data}let n=ea(ii,i);if(!n.success){let e=n.error instanceof Error?n.error.message:String(n.error);throw new iN(d.InvalidParams,`Invalid sampling result: ${e}`)}return n.data};return super.setRequestHandler(e,r)}return super.setRequestHandler(e,t)}assertCapability(e,t){if(!this._serverCapabilities?.[e])throw Error(`Server does not support ${e} (required for ${t})`)}async connect(e,t){if(await super.connect(e),void 0===e.sessionId)try{let r=await this.request({method:"initialize",params:{protocolVersion:sm,capabilities:this._capabilities,clientInfo:this._clientInfo}},sQ,t);if(void 0===r)throw Error(`Server sent invalid initialize result: ${r}`);if(!sy.includes(r.protocolVersion))throw Error(`Server's protocol version is not supported: ${r.protocolVersion}`);this._serverCapabilities=r.capabilities,this._serverVersion=r.serverInfo,e.setProtocolVersion&&e.setProtocolVersion(r.protocolVersion),this._instructions=r.instructions,await this.notification({method:"notifications/initialized"}),this._pendingListChangedConfig&&(this._setupListChangedHandlers(this._pendingListChangedConfig),this._pendingListChangedConfig=void 0)}catch(e){throw this.close(),e}}getServerCapabilities(){return this._serverCapabilities}getServerVersion(){return this._serverVersion}getInstructions(){return this._instructions}assertCapabilityForMethod(e){switch(e){case"logging/setLevel":if(!this._serverCapabilities?.logging)throw Error(`Server does not support logging (required for ${e})`);break;case"prompts/get":case"prompts/list":if(!this._serverCapabilities?.prompts)throw Error(`Server does not support prompts (required for ${e})`);break;case"resources/list":case"resources/templates/list":case"resources/read":case"resources/subscribe":case"resources/unsubscribe":if(!this._serverCapabilities?.resources)throw Error(`Server does not support resources (required for ${e})`);if("resources/subscribe"===e&&!this._serverCapabilities.resources.subscribe)throw Error(`Server does not support resource subscriptions (required for ${e})`);break;case"tools/call":case"tools/list":if(!this._serverCapabilities?.tools)throw Error(`Server does not support tools (required for ${e})`);break;case"completion/complete":if(!this._serverCapabilities?.completions)throw Error(`Server does not support completions (required for ${e})`)}}assertNotificationCapability(e){if("notifications/roots/list_changed"===e&&!this._capabilities.roots?.listChanged)throw Error(`Client does not support roots list changed notifications (required for ${e})`)}assertRequestHandlerCapability(e){if(this._capabilities)switch(e){case"sampling/createMessage":if(!this._capabilities.sampling)throw Error(`Client does not support sampling capability (required for ${e})`);break;case"elicitation/create":if(!this._capabilities.elicitation)throw Error(`Client does not support elicitation capability (required for ${e})`);break;case"roots/list":if(!this._capabilities.roots)throw Error(`Client does not support roots capability (required for ${e})`);break;case"tasks/get":case"tasks/list":case"tasks/result":case"tasks/cancel":if(!this._capabilities.tasks)throw Error(`Client does not support tasks capability (required for ${e})`)}}assertTaskCapability(e){var t=this._serverCapabilities?.tasks?.requests,r="Server";if(!t)throw Error(`${r} does not support task creation (required for ${e})`);if("tools/call"===e&&!t.tools?.call)throw Error(`${r} does not support task creation for tools/call (required for ${e})`)}assertTaskHandlerCapability(e){if(this._capabilities){var t=this._capabilities.tasks?.requests,r="Client";if(!t)throw Error(`${r} does not support task creation (required for ${e})`);switch(e){case"sampling/createMessage":if(!t.sampling?.createMessage)throw Error(`${r} does not support task creation for sampling/createMessage (required for ${e})`);break;case"elicitation/create":if(!t.elicitation?.create)throw Error(`${r} does not support task creation for elicitation/create (required for ${e})`)}}}async ping(e){return this.request({method:"ping"},sD,e)}async complete(e,t){return this.request({method:"completion/complete",params:e},iP,t)}async setLoggingLevel(e,t){return this.request({method:"logging/setLevel",params:{level:e}},sD,t)}async getPrompt(e,t){return this.request({method:"prompts/get",params:e},oF,t)}async listPrompts(e,t){return this.request({method:"prompts/list",params:e},oN,t)}async listResources(e,t){return this.request({method:"resources/list",params:e},o_,t)}async listResourceTemplates(e,t){return this.request({method:"resources/templates/list",params:e},ow,t)}async readResource(e,t){return this.request({method:"resources/read",params:e},ok,t)}async subscribeResource(e,t){return this.request({method:"resources/subscribe",params:e},sD,t)}async unsubscribeResource(e,t){return this.request({method:"resources/unsubscribe",params:e},sD,t)}async callTool(e,t=oJ,r){if(this.isToolTaskRequired(e.name))throw new iN(d.InvalidRequest,`Tool "${e.name}" requires task-based execution. Use client.experimental.tasks.callToolStream() instead.`);let s=await this.request({method:"tools/call",params:e},t,r),o=this.getToolOutputValidator(e.name);if(o){if(!s.structuredContent&&!s.isError)throw new iN(d.InvalidRequest,`Tool ${e.name} has an output schema but did not return structured content`);if(s.structuredContent)try{let e=o(s.structuredContent);if(!e.valid)throw new iN(d.InvalidParams,`Structured content does not match the tool's output schema: ${e.errorMessage}`)}catch(e){if(e instanceof iN)throw e;throw new iN(d.InvalidParams,`Failed to validate structured content: ${e instanceof Error?e.message:String(e)}`)}}return s}isToolTask(e){return!!this._serverCapabilities?.tasks?.requests?.tools?.call&&this._cachedKnownTaskTools.has(e)}isToolTaskRequired(e){return this._cachedRequiredTaskTools.has(e)}cacheToolMetadata(e){for(let t of(this._cachedToolOutputValidators.clear(),this._cachedKnownTaskTools.clear(),this._cachedRequiredTaskTools.clear(),e)){if(t.outputSchema){let e=this._jsonSchemaValidator.getValidator(t.outputSchema);this._cachedToolOutputValidators.set(t.name,e)}let e=t.execution?.taskSupport;("required"===e||"optional"===e)&&this._cachedKnownTaskTools.add(t.name),"required"===e&&this._cachedRequiredTaskTools.add(t.name)}}getToolOutputValidator(e){return this._cachedToolOutputValidators.get(e)}async listTools(e,t){let r=await this.request({method:"tools/list",params:e},oW,t);return this.cacheToolMetadata(r.tools),r}_setupListChangedHandler(e,t,r,s){let o=o0.safeParse(r);if(!o.success)throw Error(`Invalid ${e} listChanged options: ${o.error.message}`);if("function"!=typeof r.onChanged)throw Error(`Invalid ${e} listChanged options: onChanged must be a function`);let{autoRefresh:i,debounceMs:n}=o.data,{onChanged:a}=r,l=async()=>{if(!i)return void a(null,null);try{let e=await s();a(null,e)}catch(e){a(e instanceof Error?e:Error(String(e)),null)}},u=()=>{if(n){let t=this._listChangedDebounceTimers.get(e);t&&clearTimeout(t);let r=setTimeout(l,n);this._listChangedDebounceTimers.set(e,r)}else l()};this.setNotificationHandler(t,u)}async sendRootsListChanged(){return this.notification({method:"notifications/roots/list_changed"})}}var iK=i(6507);let iZ=require("node:process"),iG=require("node:stream");class iB{append(e){this._buffer=this._buffer?Buffer.concat([this._buffer,e]):e}readMessage(){var e;if(!this._buffer)return null;let t=this._buffer.indexOf("\n");if(-1===t)return null;let r=this._buffer.toString("utf8",0,t).replace(/\r$/,"");return this._buffer=this._buffer.subarray(t+1),e=r,sM.parse(JSON.parse(e))}clear(){this._buffer=void 0}}let iW="win32"===iZ.platform?["APPDATA","HOMEDRIVE","HOMEPATH","LOCALAPPDATA","PATH","PROCESSOR_ARCHITECTURE","SYSTEMDRIVE","SYSTEMROOT","TEMP","USERNAME","USERPROFILE","PROGRAMFILES"]:["HOME","LOGNAME","PATH","SHELL","TERM","USER"];class iJ{constructor(e){this._readBuffer=new iB,this._stderrStream=null,this._serverParams=e,("pipe"===e.stderr||"overlapped"===e.stderr)&&(this._stderrStream=new iG.PassThrough)}async start(){if(this._process)throw Error("StdioClientTransport already started! If using Client class, note that connect() calls start() automatically.");return new Promise((e,t)=>{this._process=iK(this._serverParams.command,this._serverParams.args??[],{env:{...function(){let e={};for(let t of iW){let r=iZ.env[t];void 0!==r&&(r.startsWith("()")||(e[t]=r))}return e}(),...this._serverParams.env},stdio:["pipe","pipe",this._serverParams.stderr??"inherit"],shell:!1,windowsHide:"win32"===iZ.platform&&"type"in process,cwd:this._serverParams.cwd}),this._process.on("error",e=>{t(e),this.onerror?.(e)}),this._process.on("spawn",()=>{e()}),this._process.on("close",e=>{this._process=void 0,this.onclose?.()}),this._process.stdin?.on("error",e=>{this.onerror?.(e)}),this._process.stdout?.on("data",e=>{this._readBuffer.append(e),this.processReadBuffer()}),this._process.stdout?.on("error",e=>{this.onerror?.(e)}),this._stderrStream&&this._process.stderr&&this._process.stderr.pipe(this._stderrStream)})}get stderr(){return this._stderrStream?this._stderrStream:this._process?.stderr??null}get pid(){return this._process?.pid??null}processReadBuffer(){for(;;)try{let e=this._readBuffer.readMessage();if(null===e)break;this.onmessage?.(e)}catch(e){this.onerror?.(e)}}async close(){if(this._process){let e=this._process;this._process=void 0;let t=new Promise(t=>{e.once("close",()=>{t()})});try{e.stdin?.end()}catch{}if(await Promise.race([t,new Promise(e=>setTimeout(e,2e3).unref())]),null===e.exitCode){try{e.kill("SIGTERM")}catch{}await Promise.race([t,new Promise(e=>setTimeout(e,2e3).unref())])}if(null===e.exitCode)try{e.kill("SIGKILL")}catch{}}this._readBuffer.clear()}send(e){return new Promise(t=>{if(!this._process?.stdin)throw Error("Not connected");let r=JSON.stringify(e)+"\n";this._process.stdin.write(r)?t():this._process.stdin.once("drain",t)})}}function iX(e){return e?e instanceof Headers?Object.fromEntries(e.entries()):Array.isArray(e)?Object.fromEntries(e):{...e}:{}}async function iY(t){return(await e).getRandomValues(new Uint8Array(t))}async function iQ(e){let t="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789-._~",r=256-256%t.length,s="";for(;s.length<e;)for(let o of(await iY(e-s.length)))o<r&&(s+=t[o%t.length]);return s}async function i0(e){return await iQ(e)}async function i1(t){return btoa(String.fromCharCode(...new Uint8Array(await (await e).subtle.digest("SHA-256",new TextEncoder().encode(t))))).replace(/\//g,"_").replace(/\+/g,"-").replace(/=/g,"")}async function i2(e){if(e||(e=43),e<43||e>128)throw`Expected a length between 43 and 128. Received ${e}.`;let t=await i0(e),r=await i1(t);return{code_verifier:t,code_challenge:r}}e=globalThis.crypto?.webcrypto??globalThis.crypto??Promise.resolve().then(i.t.bind(i,7598,19)).then(e=>e.webcrypto);let i5=t1(r$,void 0).superRefine((e,t)=>{if(!URL.canParse(e))return t.addIssue({code:"custom",message:"URL must be parseable",fatal:!0}),x}).refine(e=>{let t=new URL(e);return"javascript:"!==t.protocol&&"data:"!==t.protocol&&"vbscript:"!==t.protocol},{message:"URL cannot use javascript:, data:, or vbscript: scheme"}),i9=rY({resource:rm().url(),authorization_servers:rW(i5).optional(),jwks_uri:rm().url().optional(),scopes_supported:rW(rm()).optional(),bearer_methods_supported:rW(rm()).optional(),resource_signing_alg_values_supported:rW(rm()).optional(),resource_name:rm().optional(),resource_documentation:rm().optional(),resource_policy_uri:rm().url().optional(),resource_tos_uri:rm().url().optional(),tls_client_certificate_bound_access_tokens:rU().optional(),authorization_details_types_supported:rW(rm()).optional(),dpop_signing_alg_values_supported:rW(rm()).optional(),dpop_bound_access_tokens_required:rU().optional()}),i4=rY({issuer:rm(),authorization_endpoint:i5,token_endpoint:i5,registration_endpoint:i5.optional(),scopes_supported:rW(rm()).optional(),response_types_supported:rW(rm()),response_modes_supported:rW(rm()).optional(),grant_types_supported:rW(rm()).optional(),token_endpoint_auth_methods_supported:rW(rm()).optional(),token_endpoint_auth_signing_alg_values_supported:rW(rm()).optional(),service_documentation:i5.optional(),revocation_endpoint:i5.optional(),revocation_endpoint_auth_methods_supported:rW(rm()).optional(),revocation_endpoint_auth_signing_alg_values_supported:rW(rm()).optional(),introspection_endpoint:rm().optional(),introspection_endpoint_auth_methods_supported:rW(rm()).optional(),introspection_endpoint_auth_signing_alg_values_supported:rW(rm()).optional(),code_challenge_methods_supported:rW(rm()).optional(),client_id_metadata_document_supported:rU().optional()}),i6=rX({...rY({issuer:rm(),authorization_endpoint:i5,token_endpoint:i5,userinfo_endpoint:i5.optional(),jwks_uri:i5,registration_endpoint:i5.optional(),scopes_supported:rW(rm()).optional(),response_types_supported:rW(rm()),response_modes_supported:rW(rm()).optional(),grant_types_supported:rW(rm()).optional(),acr_values_supported:rW(rm()).optional(),subject_types_supported:rW(rm()),id_token_signing_alg_values_supported:rW(rm()),id_token_encryption_alg_values_supported:rW(rm()).optional(),id_token_encryption_enc_values_supported:rW(rm()).optional(),userinfo_signing_alg_values_supported:rW(rm()).optional(),userinfo_encryption_alg_values_supported:rW(rm()).optional(),userinfo_encryption_enc_values_supported:rW(rm()).optional(),request_object_signing_alg_values_supported:rW(rm()).optional(),request_object_encryption_alg_values_supported:rW(rm()).optional(),request_object_encryption_enc_values_supported:rW(rm()).optional(),token_endpoint_auth_methods_supported:rW(rm()).optional(),token_endpoint_auth_signing_alg_values_supported:rW(rm()).optional(),display_values_supported:rW(rm()).optional(),claim_types_supported:rW(rm()).optional(),claims_supported:rW(rm()).optional(),service_documentation:rm().optional(),claims_locales_supported:rW(rm()).optional(),ui_locales_supported:rW(rm()).optional(),claims_parameter_supported:rU().optional(),request_parameter_supported:rU().optional(),request_uri_parameter_supported:rU().optional(),require_request_uri_registration:rU().optional(),op_policy_uri:i5.optional(),op_tos_uri:i5.optional(),client_id_metadata_document_supported:rU().optional()}).shape,...i4.pick({code_challenge_methods_supported:!0}).shape}),i8=rX({access_token:rm(),id_token:rm().optional(),token_type:rm(),expires_in:new rC({type:"number",coerce:!0,checks:[],...K(void 0)}).optional(),scope:rm().optional(),refresh_token:rm().optional()}).strip(),i3=rX({error:rm(),error_description:rm().optional(),error_uri:rm().optional()}),i7=i5.optional().or(se("").transform(()=>void 0)),ne=rX({redirect_uris:rW(i5),token_endpoint_auth_method:rm().optional(),grant_types:rW(rm()).optional(),response_types:rW(rm()).optional(),client_name:rm().optional(),client_uri:i5.optional(),logo_uri:i7,scope:rm().optional(),contacts:rW(rm()).optional(),tos_uri:i7,policy_uri:rm().optional(),jwks_uri:i5.optional(),jwks:new rH({type:"any"}).optional(),software_id:rm().optional(),software_version:rm().optional(),software_statement:rm().optional()}).strip(),nt=rX({client_id:rm(),client_secret:rm().optional(),client_id_issued_at:rM().optional(),client_secret_expires_at:rM().optional()}).strip(),nr=ne.merge(nt);rX({error:rm(),error_description:rm().optional()}).strip(),rX({token:rm(),token_type_hint:rm().optional()}).strip();class ns extends Error{constructor(e,t){super(e),this.errorUri=t,this.name=this.constructor.name}toResponseObject(){let e={error:this.errorCode,error_description:this.message};return this.errorUri&&(e.error_uri=this.errorUri),e}get errorCode(){return this.constructor.errorCode}}class no extends ns{}no.errorCode="invalid_request";class ni extends ns{}ni.errorCode="invalid_client";class nn extends ns{}nn.errorCode="invalid_grant";class na extends ns{}na.errorCode="unauthorized_client";class nl extends ns{}nl.errorCode="unsupported_grant_type";class nu extends ns{}nu.errorCode="invalid_scope";class nc extends ns{}nc.errorCode="access_denied";class nd extends ns{}nd.errorCode="server_error";class np extends ns{}np.errorCode="temporarily_unavailable";class nf extends ns{}nf.errorCode="unsupported_response_type";class nh extends ns{}nh.errorCode="unsupported_token_type";class nm extends ns{}nm.errorCode="invalid_token";class ny extends ns{}ny.errorCode="method_not_allowed";class nv extends ns{}nv.errorCode="too_many_requests";class ng extends ns{}ng.errorCode="invalid_client_metadata";class n_ extends ns{}n_.errorCode="insufficient_scope";class n$ extends ns{}n$.errorCode="invalid_target";let nw={[no.errorCode]:no,[ni.errorCode]:ni,[nn.errorCode]:nn,[na.errorCode]:na,[nl.errorCode]:nl,[nu.errorCode]:nu,[nc.errorCode]:nc,[nd.errorCode]:nd,[np.errorCode]:np,[nf.errorCode]:nf,[nh.errorCode]:nh,[nm.errorCode]:nm,[ny.errorCode]:ny,[nv.errorCode]:nv,[ng.errorCode]:ng,[n_.errorCode]:n_,[n$.errorCode]:n$};class nb extends Error{constructor(e){super(e??"Unauthorized")}}let nE="code",nk="S256";async function nS(e){let t=e instanceof Response?e.status:void 0,r=e instanceof Response?await e.text():e;try{let{error:e,error_description:t,error_uri:s}=i3.parse(JSON.parse(r));return new(nw[e]||nd)(t||"",s)}catch(e){return new nd(`${t?`HTTP ${t}: `:""}Invalid OAuth error response: ${e}. Raw body: ${r}`)}}async function nT(e,t){try{return await nx(e,t)}catch(r){if(r instanceof ni||r instanceof na)return await e.invalidateCredentials?.("all"),await nx(e,t);if(r instanceof nn)return await e.invalidateCredentials?.("tokens"),await nx(e,t);throw r}}async function nx(e,{serverUrl:t,authorizationCode:r,scope:s,resourceMetadataUrl:o,fetchFn:i}){let n,a;try{(n=await nR(t,{resourceMetadataUrl:o},i)).authorization_servers&&n.authorization_servers.length>0&&(a=n.authorization_servers[0])}catch{}a||(a=new URL("/",t));let l=await nP(t,e,n),u=await nz(a,{fetchFn:i}),c=await Promise.resolve(e.clientInformation());if(!c){if(void 0!==r)throw Error("Existing OAuth client information is required when exchanging an authorization code");let t=u?.client_id_metadata_document_supported===!0,s=e.clientMetadataUrl;if(s&&!function(e){if(!e)return!1;try{let t=new URL(e);return"https:"===t.protocol&&"/"!==t.pathname}catch{return!1}}(s))throw new ng(`clientMetadataUrl must be a valid HTTPS URL with a non-root pathname, got: ${s}`);if(t&&s)c={client_id:s},await e.saveClientInformation?.(c);else{if(!e.saveClientInformation)throw Error("OAuth client information must be saveable for dynamic registration");let t=await nq(a,{metadata:u,clientMetadata:e.clientMetadata,fetchFn:i});await e.saveClientInformation(t),c=t}}let d=!e.redirectUrl;if(void 0!==r||d){let t=await nL(e,a,{metadata:u,resource:l,authorizationCode:r,fetchFn:i});return await e.saveTokens(t),"AUTHORIZED"}let p=await e.tokens();if(p?.refresh_token)try{let t=await nD(a,{metadata:u,clientInformation:c,refreshToken:p.refresh_token,resource:l,addClientAuthentication:e.addClientAuthentication,fetchFn:i});return await e.saveTokens(t),"AUTHORIZED"}catch(e){if(!(e instanceof ns)||e instanceof nd);else throw e}let f=e.state?await e.state():void 0,{authorizationUrl:h,codeVerifier:m}=await nC(a,{metadata:u,clientInformation:c,state:f,redirectUrl:e.redirectUrl,scope:s||n?.scopes_supported?.join(" ")||e.clientMetadata.scope,resource:l});return await e.saveCodeVerifier(m),await e.redirectToAuthorization(h),"REDIRECT"}async function nP(e,t,r){let s,o=((s=new URL("string"==typeof e?e:e.href)).hash="",s);if(t.validateResourceURL)return await t.validateResourceURL(o,r?.resource);if(r){if(!function({requestedResource:e,configuredResource:t}){let r=new URL("string"==typeof e?e:e.href),s=new URL("string"==typeof t?t:t.href);if(r.origin!==s.origin||r.pathname.length<s.pathname.length)return!1;let o=r.pathname.endsWith("/")?r.pathname:r.pathname+"/",i=s.pathname.endsWith("/")?s.pathname:s.pathname+"/";return o.startsWith(i)}({requestedResource:o,configuredResource:r.resource}))throw Error(`Protected resource ${r.resource} does not match expected ${o} (or origin)`);return new URL(r.resource)}}function nI(e){let t,r=e.headers.get("WWW-Authenticate");if(!r)return{};let[s,o]=r.split(" ");if("bearer"!==s.toLowerCase()||!o)return{};let i=nO(e,"resource_metadata")||void 0;if(i)try{t=new URL(i)}catch{}return{resourceMetadataUrl:t,scope:nO(e,"scope")||void 0,error:nO(e,"error")||void 0}}function nO(e,t){let r=e.headers.get("WWW-Authenticate");if(!r)return null;let s=RegExp(`${t}=(?:"([^"]+)"|([^\\s,]+))`),o=r.match(s);return o?o[1]||o[2]:null}async function nR(e,t,r=fetch){let s=await nA(e,"oauth-protected-resource",r,{protocolVersion:t?.protocolVersion,metadataUrl:t?.resourceMetadataUrl});if(!s||404===s.status)throw await s?.body?.cancel(),Error("Resource server does not implement OAuth 2.0 Protected Resource Metadata.");if(!s.ok)throw await s.body?.cancel(),Error(`HTTP ${s.status} trying to load well-known OAuth protected resource metadata.`);return i9.parse(await s.json())}async function nj(e,t,r=fetch){try{return await r(e,{headers:t})}catch(s){if(s instanceof TypeError)if(t)return nj(e,void 0,r);else return;throw s}}async function nN(e,t,r=fetch){return await nj(e,{"MCP-Protocol-Version":t},r)}async function nA(e,t,r,s){var o,i;let n,a=new URL(e),l=s?.protocolVersion??sm;s?.metadataUrl?n=new URL(s.metadataUrl):(n=new URL(function(e,t="",r={}){return t.endsWith("/")&&(t=t.slice(0,-1)),r.prependPathname?`${t}/.well-known/${e}`:`/.well-known/${e}${t}`}(t,a.pathname),s?.metadataServerUrl??a)).search=a.search;let u=await nN(n,l,r);if(!s?.metadataUrl&&(o=u,i=a.pathname,!o||o.status>=400&&o.status<500&&"/"!==i)){let e=new URL(`/.well-known/${t}`,a);u=await nN(e,l,r)}return u}async function nz(e,{fetchFn:t=fetch,protocolVersion:r=sm}={}){let s={"MCP-Protocol-Version":r,Accept:"application/json"};for(let{url:r,type:o}of function(e){let t="string"==typeof e?new URL(e):e,r="/"!==t.pathname,s=[];if(!r)return s.push({url:new URL("/.well-known/oauth-authorization-server",t.origin),type:"oauth"}),s.push({url:new URL("/.well-known/openid-configuration",t.origin),type:"oidc"}),s;let o=t.pathname;return o.endsWith("/")&&(o=o.slice(0,-1)),s.push({url:new URL(`/.well-known/oauth-authorization-server${o}`,t.origin),type:"oauth"}),s.push({url:new URL(`/.well-known/openid-configuration${o}`,t.origin),type:"oidc"}),s.push({url:new URL(`${o}/.well-known/openid-configuration`,t.origin),type:"oidc"}),s}(e)){let e=await nj(r,s,t);if(e){if(!e.ok){if(await e.body?.cancel(),e.status>=400&&e.status<500)continue;throw Error(`HTTP ${e.status} trying to load ${"oauth"===o?"OAuth":"OpenID provider"} metadata from ${r}`)}if("oauth"===o)return i4.parse(await e.json());return i6.parse(await e.json())}}}async function nC(e,{metadata:t,clientInformation:r,redirectUrl:s,scope:o,state:i,resource:n}){let a;if(t){if(a=new URL(t.authorization_endpoint),!t.response_types_supported.includes(nE))throw Error(`Incompatible auth server: does not support response type ${nE}`);if(t.code_challenge_methods_supported&&!t.code_challenge_methods_supported.includes(nk))throw Error(`Incompatible auth server: does not support code challenge method ${nk}`)}else a=new URL("/authorize",e);let l=await i2(),u=l.code_verifier,c=l.code_challenge;return a.searchParams.set("response_type",nE),a.searchParams.set("client_id",r.client_id),a.searchParams.set("code_challenge",c),a.searchParams.set("code_challenge_method",nk),a.searchParams.set("redirect_uri",String(s)),i&&a.searchParams.set("state",i),o&&a.searchParams.set("scope",o),o?.includes("offline_access")&&a.searchParams.append("prompt","consent"),n&&a.searchParams.set("resource",n.href),{authorizationUrl:a,codeVerifier:u}}async function nM(e,{metadata:t,tokenRequestParams:r,clientInformation:s,addClientAuthentication:o,resource:i,fetchFn:n}){var a,l;let u,c=t?.token_endpoint?new URL(t.token_endpoint):new URL("/token",e),d=new Headers({"Content-Type":"application/x-www-form-urlencoded",Accept:"application/json"});i&&r.set("resource",i.href),o?await o(d,r,c,t):s&&function(e,t,r,s){let{client_id:o,client_secret:i}=t;switch(e){case"client_secret_basic":var n,a,l,u,c=o,d=i,p=r;if(!d)throw Error("client_secret_basic authentication requires a client_secret");let f=btoa(`${c}:${d}`);p.set("Authorization",`Basic ${f}`);return;case"client_secret_post":n=o,a=i,(l=s).set("client_id",n),a&&l.set("client_secret",a);return;case"none":u=o,s.set("client_id",u);return;default:throw Error(`Unsupported client authentication method: ${e}`)}}((a=s,l=t?.token_endpoint_auth_methods_supported??[],u=void 0!==a.client_secret,0===l.length?u?"client_secret_post":"none":"token_endpoint_auth_method"in a&&a.token_endpoint_auth_method&&["client_secret_basic","client_secret_post","none"].includes(a.token_endpoint_auth_method)&&l.includes(a.token_endpoint_auth_method)?a.token_endpoint_auth_method:u&&l.includes("client_secret_basic")?"client_secret_basic":u&&l.includes("client_secret_post")?"client_secret_post":l.includes("none")?"none":u?"client_secret_post":"none"),s,d,r);let p=await (n??fetch)(c,{method:"POST",headers:d,body:r});if(!p.ok)throw await nS(p);return i8.parse(await p.json())}async function nD(e,{metadata:t,clientInformation:r,refreshToken:s,resource:o,addClientAuthentication:i,fetchFn:n}){let a=new URLSearchParams({grant_type:"refresh_token",refresh_token:s});return{refresh_token:s,...await nM(e,{metadata:t,tokenRequestParams:a,clientInformation:r,addClientAuthentication:i,resource:o,fetchFn:n})}}async function nL(e,t,{metadata:r,resource:s,authorizationCode:o,fetchFn:i}={}){let n,a=e.clientMetadata.scope;if(e.prepareTokenRequest&&(n=await e.prepareTokenRequest(a)),!n){if(!o)throw Error("Either provider.prepareTokenRequest() or authorizationCode is required");if(!e.redirectUrl)throw Error("redirectUrl is required for authorization_code flow");n=new URLSearchParams({grant_type:"authorization_code",code:o,code_verifier:await e.codeVerifier(),redirect_uri:String(e.redirectUrl)})}return nM(t,{metadata:r,tokenRequestParams:n,clientInformation:await e.clientInformation()??void 0,addClientAuthentication:e.addClientAuthentication,resource:s,fetchFn:i})}async function nq(e,{metadata:t,clientMetadata:r,fetchFn:s}){let o;if(t){if(!t.registration_endpoint)throw Error("Incompatible auth server: does not support dynamic client registration");o=new URL(t.registration_endpoint)}else o=new URL("/register",e);let i=await (s??fetch)(o,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if(!i.ok)throw await nS(i);return nr.parse(await i.json())}class nU extends Error{constructor(e,t){super(e),this.name="ParseError",this.type=t.type,this.field=t.field,this.value=t.value,this.line=t.line}}function nV(e){}class nF extends TransformStream{constructor({onError:e,onRetry:t,onComment:r}={}){let s;super({start(o){s=function(e){if("function"==typeof e)throw TypeError("`callbacks` must be an object, got a function instead. Did you mean `{onEvent: fn}`?");let{onEvent:t=nV,onError:r=nV,onRetry:s=nV,onComment:o}=e,i="",n=!0,a,l="",u="";function c(e){if(""===e)return void(l.length>0&&t({id:a,event:u||void 0,data:l.endsWith(`
`)?l.slice(0,-1):l}),a=void 0,l="",u="");if(e.startsWith(":")){o&&o(e.slice(e.startsWith(": ")?2:1));return}let r=e.indexOf(":");if(-1!==r){let t=e.slice(0,r),s=" "===e[r+1]?2:1;d(t,e.slice(r+s),e);return}d(e,"",e)}function d(e,t,o){switch(e){case"event":u=t;break;case"data":l=`${l}${t}
`;break;case"id":a=t.includes("\0")?void 0:t;break;case"retry":/^\d+$/.test(t)?s(parseInt(t,10)):r(new nU(`Invalid \`retry\` value: "${t}"`,{type:"invalid-retry",value:t,line:o}));break;default:r(new nU(`Unknown field "${e.length>20?`${e.slice(0,20)}\u2026`:e}"`,{type:"unknown-field",field:e,value:t,line:o}))}}return{feed:function(e){let t=n?e.replace(/^\xEF\xBB\xBF/,""):e,[r,s]=function(e){let t=[],r="",s=0;for(;s<e.length;){let o=e.indexOf("\r",s),i=e.indexOf(`
`,s),n=-1;if(-1!==o&&-1!==i?n=Math.min(o,i):-1!==o?n=o===e.length-1?-1:o:-1!==i&&(n=i),-1===n){r=e.slice(s);break}{let r=e.slice(s,n);t.push(r),"\r"===e[(s=n+1)-1]&&e[s]===`
`&&s++}}return[t,r]}(`${i}${t}`);for(let e of r)c(e);i=s,n=!1},reset:function(e={}){i&&e.consume&&c(i),n=!0,a=void 0,l="",u="",i=""}}}({onEvent:e=>{o.enqueue(e)},onError(t){"terminate"===e?o.error(t):"function"==typeof e&&e(t)},onRetry:t,onComment:r})},transform(e){s.feed(e)}})}}let nH={initialReconnectionDelay:1e3,maxReconnectionDelay:3e4,reconnectionDelayGrowFactor:1.5,maxRetries:2};class nK extends Error{constructor(e,t){super(`Streamable HTTP error: ${t}`),this.code=e}}class nZ{constructor(e,t){this._hasCompletedAuthFlow=!1,this._url=e,this._resourceMetadataUrl=void 0,this._scope=void 0,this._requestInit=t?.requestInit,this._authProvider=t?.authProvider,this._fetch=t?.fetch,this._fetchWithInit=function(e=fetch,t){return t?async(r,s)=>e(r,{...t,...s,headers:s?.headers?{...iX(t.headers),...iX(s.headers)}:t.headers}):e}(t?.fetch,t?.requestInit),this._sessionId=t?.sessionId,this._reconnectionOptions=t?.reconnectionOptions??nH}async _authThenStart(){let e;if(!this._authProvider)throw new nb("No auth provider");try{e=await nT(this._authProvider,{serverUrl:this._url,resourceMetadataUrl:this._resourceMetadataUrl,scope:this._scope,fetchFn:this._fetchWithInit})}catch(e){throw this.onerror?.(e),e}if("AUTHORIZED"!==e)throw new nb;return await this._startOrAuthSse({resumptionToken:void 0})}async _commonHeaders(){let e={};if(this._authProvider){let t=await this._authProvider.tokens();t&&(e.Authorization=`Bearer ${t.access_token}`)}this._sessionId&&(e["mcp-session-id"]=this._sessionId),this._protocolVersion&&(e["mcp-protocol-version"]=this._protocolVersion);let t=iX(this._requestInit?.headers);return new Headers({...e,...t})}async _startOrAuthSse(e){let{resumptionToken:t}=e;try{let r=await this._commonHeaders();r.set("Accept","text/event-stream"),t&&r.set("last-event-id",t);let s=await (this._fetch??fetch)(this._url,{method:"GET",headers:r,signal:this._abortController?.signal});if(!s.ok){if(await s.body?.cancel(),401===s.status&&this._authProvider)return await this._authThenStart();if(405===s.status)return;throw new nK(s.status,`Failed to open SSE stream: ${s.statusText}`)}this._handleSseStream(s.body,e,!0)}catch(e){throw this.onerror?.(e),e}}_getNextReconnectionDelay(e){return void 0!==this._serverRetryMs?this._serverRetryMs:Math.min(this._reconnectionOptions.initialReconnectionDelay*Math.pow(this._reconnectionOptions.reconnectionDelayGrowFactor,e),this._reconnectionOptions.maxReconnectionDelay)}_scheduleReconnection(e,t=0){let r=this._reconnectionOptions.maxRetries;if(t>=r)return void this.onerror?.(Error(`Maximum reconnection attempts (${r}) exceeded.`));let s=this._getNextReconnectionDelay(t);this._reconnectionTimeout=setTimeout(()=>{this._startOrAuthSse(e).catch(r=>{this.onerror?.(Error(`Failed to reconnect SSE stream: ${r instanceof Error?r.message:String(r)}`)),this._scheduleReconnection(e,t+1)})},s)}_handleSseStream(e,t,r){let s;if(!e)return;let{onresumptiontoken:o,replayMessageId:i}=t,n=!1,a=!1;(async()=>{try{let t=e.pipeThrough(new TextDecoderStream).pipeThrough(new nF({onRetry:e=>{this._serverRetryMs=e}})).getReader();for(;;){let{value:e,done:r}=await t.read();if(r)break;if((e.id&&(s=e.id,n=!0,o?.(e.id)),e.data)&&(!e.event||"message"===e.event))try{let t=sM.parse(JSON.parse(e.data));sz(t)&&(a=!0,void 0!==i&&(t.id=i)),this.onmessage?.(t)}catch(e){this.onerror?.(e)}}(r||n)&&!a&&this._abortController&&!this._abortController.signal.aborted&&this._scheduleReconnection({resumptionToken:s,onresumptiontoken:o,replayMessageId:i},0)}catch(e){if(this.onerror?.(Error(`SSE stream disconnected: ${e}`)),(r||n)&&!a&&this._abortController&&!this._abortController.signal.aborted)try{this._scheduleReconnection({resumptionToken:s,onresumptiontoken:o,replayMessageId:i},0)}catch(e){this.onerror?.(Error(`Failed to reconnect: ${e instanceof Error?e.message:String(e)}`))}}})()}async start(){if(this._abortController)throw Error("StreamableHTTPClientTransport already started! If using Client class, note that connect() calls start() automatically.");this._abortController=new AbortController}async finishAuth(e){if(!this._authProvider)throw new nb("No auth provider");if("AUTHORIZED"!==await nT(this._authProvider,{serverUrl:this._url,authorizationCode:e,resourceMetadataUrl:this._resourceMetadataUrl,scope:this._scope,fetchFn:this._fetchWithInit}))throw new nb("Failed to authorize")}async close(){this._reconnectionTimeout&&(clearTimeout(this._reconnectionTimeout),this._reconnectionTimeout=void 0),this._abortController?.abort(),this.onclose?.()}async send(e,t){try{let{resumptionToken:r,onresumptiontoken:s}=t||{};if(r)return void this._startOrAuthSse({resumptionToken:r,replayMessageId:sj(e)?e.id:void 0}).catch(e=>this.onerror?.(e));let o=await this._commonHeaders();o.set("content-type","application/json"),o.set("accept","application/json, text/event-stream");let i={...this._requestInit,method:"POST",headers:o,body:JSON.stringify(e),signal:this._abortController?.signal},n=await (this._fetch??fetch)(this._url,i),a=n.headers.get("mcp-session-id");if(a&&(this._sessionId=a),!n.ok){let t=await n.text().catch(()=>null);if(401===n.status&&this._authProvider){if(this._hasCompletedAuthFlow)throw new nK(401,"Server returned 401 after successful authentication");let{resourceMetadataUrl:t,scope:r}=nI(n);this._resourceMetadataUrl=t,this._scope=r;let s=await nT(this._authProvider,{serverUrl:this._url,resourceMetadataUrl:this._resourceMetadataUrl,scope:this._scope,fetchFn:this._fetchWithInit});if("AUTHORIZED"!==s)throw new nb;return this._hasCompletedAuthFlow=!0,this.send(e)}if(403===n.status&&this._authProvider){let{resourceMetadataUrl:t,scope:r,error:s}=nI(n);if("insufficient_scope"===s){let s=n.headers.get("WWW-Authenticate");if(this._lastUpscopingHeader===s)throw new nK(403,"Server returned 403 after trying upscoping");r&&(this._scope=r),t&&(this._resourceMetadataUrl=t),this._lastUpscopingHeader=s??void 0;let o=await nT(this._authProvider,{serverUrl:this._url,resourceMetadataUrl:this._resourceMetadataUrl,scope:this._scope,fetchFn:this._fetch});if("AUTHORIZED"!==o)throw new nb;return this.send(e)}}throw new nK(n.status,`Error POSTing to endpoint: ${t}`)}if(this._hasCompletedAuthFlow=!1,this._lastUpscopingHeader=void 0,202===n.status){await n.body?.cancel(),s0.safeParse(e).success&&this._startOrAuthSse({resumptionToken:void 0}).catch(e=>this.onerror?.(e));return}let l=(Array.isArray(e)?e:[e]).filter(e=>"method"in e&&"id"in e&&void 0!==e.id).length>0,u=n.headers.get("content-type");if(l)if(u?.includes("text/event-stream"))this._handleSseStream(n.body,{onresumptiontoken:s},!1);else if(u?.includes("application/json")){let e=await n.json();for(let t of Array.isArray(e)?e.map(e=>sM.parse(e)):[sM.parse(e)])this.onmessage?.(t)}else throw await n.body?.cancel(),new nK(-1,`Unexpected content type: ${u}`);else await n.body?.cancel()}catch(e){throw this.onerror?.(e),e}}get sessionId(){return this._sessionId}async terminateSession(){if(this._sessionId)try{let e=await this._commonHeaders(),t={...this._requestInit,method:"DELETE",headers:e,signal:this._abortController?.signal},r=await (this._fetch??fetch)(this._url,t);if(await r.body?.cancel(),!r.ok&&405!==r.status)throw new nK(r.status,`Failed to terminate session: ${r.statusText}`);this._sessionId=void 0}catch(e){throw this.onerror?.(e),e}}setProtocolVersion(e){this._protocolVersion=e}get protocolVersion(){return this._protocolVersion}async resumeStream(e,t){await this._startOrAuthSse({resumptionToken:e,onresumptiontoken:t?.onresumptiontoken})}}let nG=e=>"env"in e&&"string"==typeof e.env,nB=e=>{let t={};return e.forEach(e=>{let r=e.name.trim();if(nG(e)){let s=process.env[e.env];if(void 0===s)throw Error(`Environment variable "${e.env}" is not set (required for header "${r}")`);t[r]=s}else t[r]=e.value.trim()}),t},nW=i(8330),nJ={name:nW.name,version:nW.version},nX={capabilities:{sampling:{},elicitation:{},roots:{listChanged:!0}}};async function nY({url:e,headers:t}){let r=new iH(nJ,nX),s=t?nB(t):{},o=new nZ(new URL(e),{...t?{requestInit:{headers:s}}:{},reconnectionOptions:{maxReconnectionDelay:3e4,initialReconnectionDelay:1e3,reconnectionDelayGrowFactor:1.5,maxRetries:2}});return await r.connect(o),r}async function nQ(e){let{onStderrData:t,...r}=e,s=new iH(nJ,nX),o=new iJ({...r,stderr:r.stderr??"pipe"}),i=o.stderr;if(i){let e=t??(e=>{console.error(`[STDIO MCP Server stderr]: ${e}`)});i.on("data",e)}return await s.connect(o),{client:s,transport:o}}async function n0(e){try{return(await e.client.listTools()).tools.map(e=>e.name)}catch(e){return console.error("Failed to list stdio MCP tools:",e),[]}}async function n1(e,t,r){try{return await e.client.callTool({name:t,arguments:r})}catch(e){throw console.error(`Failed to call stdio MCP tool "${t}":`,e),e}}async function n2(e){try{await e.transport.close(),await e.client.close()}catch(e){throw console.error("Error disconnecting from stdio MCP server:",e),e}}f().config()})(),n})());